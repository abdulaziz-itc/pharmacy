INFO:     Will watch for changes in these directories: ['/Users/macbook13/Documents/pharma_new/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [17587] using StatReload
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
Process SpawnProcess-1:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/macbook13/Documents/pharma_new/backend/app/main.py", line 4, in <module>
    from app.api.v1.api import api_router
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/api.py", line 2, in <module>
    from app.api.v1.endpoints import (
    ...<3 lines>...
    )
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/sales.py", line 7, in <module>
    from app.crud import crud_sales
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_sales.py", line 11, in <module>
    from app.schemas.sales import (
        PlanCreateCreate, ReservationCreate, ReservationUpdate, PaymentCreate
    )
ImportError: cannot import name 'PlanCreateCreate' from 'app.schemas.sales' (/Users/macbook13/Documents/pharma_new/backend/app/schemas/sales.py)
WARNING:  StatReload detected changes in 'app/crud/crud_sales.py'. Reloading...
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
Process SpawnProcess-2:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/macbook13/Documents/pharma_new/backend/app/main.py", line 4, in <module>
    from app.api.v1.api import api_router
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/api.py", line 2, in <module>
    from app.api.v1.endpoints import (
    ...<3 lines>...
    )
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/sales.py", line 7, in <module>
    from app.crud import crud_sales
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_sales.py", line 40, in <module>
    async def create_sale_fact(db: AsyncSession, obj_in: SaleFactCreate) -> SaleFact:
                                                         ^^^^^^^^^^^^^^
NameError: name 'SaleFactCreate' is not defined
WARNING:  StatReload detected changes in 'app/crud/crud_sales.py'. Reloading...
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
Process SpawnProcess-3:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/macbook13/Documents/pharma_new/backend/app/main.py", line 4, in <module>
    from app.api.v1.api import api_router
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/api.py", line 2, in <module>
    from app.api.v1.endpoints import (
    ...<3 lines>...
    )
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/sales.py", line 7, in <module>
    from app.crud import crud_sales
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_sales.py", line 7, in <module>
    from app.models.sales import (
    ...<2 lines>...
    )
ImportError: cannot import name 'SaleFact' from 'app.models.sales' (/Users/macbook13/Documents/pharma_new/backend/app/models/sales.py)
WARNING:  StatReload detected changes in 'app/schemas/sales.py'. Reloading...
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'app/crud/crud_sales.py'. Reloading...
INFO:     Started server process [17968]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [17977]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:60366 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 07:17:59,251 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-20 07:17:59,253 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 07:17:59,611 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-20 07:17:59,613 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 07:17:59,658 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-20 07:17:59,659 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 07:17:59,675 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:18:00,192 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:18:00,193 INFO sqlalchemy.engine.Engine [generated in 0.00136s] (6,)
2026-02-20 07:18:00,519 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 07:18:00,523 INFO sqlalchemy.engine.Engine [generated in 0.00249s] (2, 2026)
INFO:     127.0.0.1:60366 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 07:18:00,577 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60368 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:60441 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:18:13,206 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:18:13,207 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:18:13,207 INFO sqlalchemy.engine.Engine [cached since 13.02s ago] (6,)
2026-02-20 07:18:13,230 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:18:13,231 INFO sqlalchemy.engine.Engine [generated in 0.00057s] (100, 0)
2026-02-20 07:18:13,249 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:18:13,250 INFO sqlalchemy.engine.Engine [generated in 0.00066s] (1,)
2026-02-20 07:18:13,271 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 07:18:13,271 INFO sqlalchemy.engine.Engine [generated in 0.00055s] (5, 4)
INFO:     127.0.0.1:60368 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:18:13,305 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:18:13,430 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:18:13,436 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:18:13,436 INFO sqlalchemy.engine.Engine [cached since 13.24s ago] (6,)
2026-02-20 07:18:13,453 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:18:13,453 INFO sqlalchemy.engine.Engine [cached since 0.2231s ago] (100, 0)
2026-02-20 07:18:13,461 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:18:13,462 INFO sqlalchemy.engine.Engine [cached since 0.2132s ago] (1,)
2026-02-20 07:18:13,467 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 07:18:13,467 INFO sqlalchemy.engine.Engine [cached since 0.1969s ago] (5, 4)
INFO:     127.0.0.1:60368 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:18:13,480 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60443 - "OPTIONS /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-20 07:18:30,966 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:18:30,967 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:18:30,967 INFO sqlalchemy.engine.Engine [cached since 30.78s ago] (6,)
INFO:     127.0.0.1:60517 - "OPTIONS /api/v1/categories/ HTTP/1.1" 200 OK
2026-02-20 07:18:30,985 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:18:30,986 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:18:30,987 INFO sqlalchemy.engine.Engine [cached since 30.8s ago] (6,)
2026-02-20 07:18:30,993 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:18:30,993 INFO sqlalchemy.engine.Engine [generated in 0.00047s] (100, 0)
2026-02-20 07:18:30,997 INFO sqlalchemy.engine.Engine SELECT category.id, category.name 
FROM category 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:18:30,997 INFO sqlalchemy.engine.Engine [generated in 0.00043s] (100, 0)
INFO:     127.0.0.1:60443 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-20 07:18:31,005 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60519 - "GET /api/v1/categories/ HTTP/1.1" 200 OK
2026-02-20 07:18:31,014 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60614 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
INFO:     127.0.0.1:60616 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 07:18:53,072 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:18:53,072 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:18:53,072 INFO sqlalchemy.engine.Engine [cached since 52.88s ago] (6,)
2026-02-20 07:18:53,221 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 07:18:53,221 INFO sqlalchemy.engine.Engine [generated in 0.00038s] ()
INFO:     127.0.0.1:60618 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 07:18:53,238 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:18:53,243 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:18:53,245 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:18:53,246 INFO sqlalchemy.engine.Engine [cached since 53.05s ago] (6,)
2026-02-20 07:18:53,370 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 07:18:53,371 INFO sqlalchemy.engine.Engine [cached since 0.1499s ago] ()
INFO:     127.0.0.1:60618 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 07:18:53,414 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60701 - "OPTIONS /api/v1/domain/orders/reservations/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:60701 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:60701 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:60701 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:60701 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:60703 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 07:19:39,134 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:19:39,135 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:19:39,135 INFO sqlalchemy.engine.Engine [cached since 98.94s ago] (6,)
INFO:     127.0.0.1:60816 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 07:19:39,145 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:19:39,146 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:19:39,147 INFO sqlalchemy.engine.Engine [cached since 98.95s ago] (6,)
2026-02-20 07:19:39,211 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:19:39,212 INFO sqlalchemy.engine.Engine [generated in 0.00126s] (100, 0)
2026-02-20 07:19:39,218 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:19:39,226 INFO sqlalchemy.engine.Engine [cached since 85.99s ago] (100, 0)
2026-02-20 07:19:39,253 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:19:39,254 INFO sqlalchemy.engine.Engine [cached since 86s ago] (1,)
2026-02-20 07:19:39,277 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 07:19:39,278 INFO sqlalchemy.engine.Engine [generated in 0.00076s] (1,)
2026-02-20 07:19:39,281 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 07:19:39,281 INFO sqlalchemy.engine.Engine [cached since 86.01s ago] (5, 4)
INFO:     127.0.0.1:60817 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:19:39,288 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:19:39,295 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 07:19:39,295 INFO sqlalchemy.engine.Engine [generated in 0.00072s] (1,)
2026-02-20 07:19:39,302 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:19:39,303 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:19:39,304 INFO sqlalchemy.engine.Engine [cached since 99.11s ago] (6,)
2026-02-20 07:19:39,330 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 07:19:39,330 INFO sqlalchemy.engine.Engine [generated in 0.00068s] (1,)
2026-02-20 07:19:39,546 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER)
2026-02-20 07:19:39,546 INFO sqlalchemy.engine.Engine [generated in 0.00145s] (1,)
2026-02-20 07:19:39,550 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60819 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 93, in read_med_orgs
    return await crud_crm.get_med_orgs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 60, in get_med_orgs
    selectinload(MedicalOrganization.assigned_rep)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'MedicalOrganization' has no attribute 'assigned_rep'. Did you mean: 'assigned_reps'?
2026-02-20 07:19:39,630 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 07:19:39,631 INFO sqlalchemy.engine.Engine [generated in 0.00080s] (1,)
INFO:     127.0.0.1:60703 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 07:19:39,660 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60994 - "OPTIONS /api/v1/domain/payments/invoices/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:60994 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60994 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60994 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:60994 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-20 07:21:27,829 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:21:27,835 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:21:27,836 INFO sqlalchemy.engine.Engine [cached since 207.6s ago] (6,)
2026-02-20 07:21:27,896 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 07:21:27,903 INFO sqlalchemy.engine.Engine [cached since 207.4s ago] (2, 2026)
INFO:     127.0.0.1:61267 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 07:21:27,946 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:24:09,958 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:24:09,969 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:24:09,971 INFO sqlalchemy.engine.Engine [cached since 369.8s ago] (6,)
2026-02-20 07:24:10,006 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:24:10,007 INFO sqlalchemy.engine.Engine [cached since 339s ago] (100, 0)
INFO:     127.0.0.1:61933 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-20 07:24:10,068 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:24:10,083 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:24:10,089 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:24:10,092 INFO sqlalchemy.engine.Engine [cached since 369.9s ago] (6,)
2026-02-20 07:24:10,222 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:24:10,223 INFO sqlalchemy.engine.Engine [cached since 339.2s ago] (100, 0)
INFO:     127.0.0.1:61933 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-20 07:24:10,228 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62074 - "OPTIONS /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-20 07:24:46,309 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:24:46,309 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:24:46,310 INFO sqlalchemy.engine.Engine [cached since 406.1s ago] (6,)
2026-02-20 07:24:46,459 INFO sqlalchemy.engine.Engine INSERT INTO manufacturer (name, created_at, updated_at) VALUES ($1::VARCHAR, $2::TIMESTAMP WITHOUT TIME ZONE, $3::TIMESTAMP WITHOUT TIME ZONE) RETURNING manufacturer.id
2026-02-20 07:24:46,459 INFO sqlalchemy.engine.Engine [generated in 0.00276s] ('Test Pharma Corp', datetime.datetime(2026, 2, 20, 2, 24, 46, 458523), datetime.datetime(2026, 2, 20, 2, 24, 46, 458544))
2026-02-20 07:24:46,546 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 07:24:46,555 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:24:46,563 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
WHERE manufacturer.id = $1::INTEGER
2026-02-20 07:24:46,563 INFO sqlalchemy.engine.Engine [generated in 0.00073s] (2,)
INFO:     127.0.0.1:62074 - "POST /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-20 07:24:46,589 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:24:46,597 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:24:46,598 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:24:46,598 INFO sqlalchemy.engine.Engine [cached since 406.4s ago] (6,)
2026-02-20 07:24:46,632 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:24:46,633 INFO sqlalchemy.engine.Engine [cached since 375.6s ago] (100, 0)
INFO:     127.0.0.1:62074 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-20 07:24:46,638 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62523 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:26:33,661 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:26:33,675 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:26:33,676 INFO sqlalchemy.engine.Engine [cached since 513.5s ago] (6,)
INFO:     127.0.0.1:62527 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:26:33,702 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:26:33,703 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:26:33,704 INFO sqlalchemy.engine.Engine [cached since 513.5s ago] (6,)
2026-02-20 07:26:33,763 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:26:33,763 INFO sqlalchemy.engine.Engine [generated in 0.00123s] (100, 0)
2026-02-20 07:26:33,776 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62525 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 93, in read_med_orgs
    return await crud_crm.get_med_orgs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 60, in get_med_orgs
    selectinload(MedicalOrganization.assigned_rep)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'MedicalOrganization' has no attribute 'assigned_rep'. Did you mean: 'assigned_reps'?
2026-02-20 07:26:33,859 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:26:33,877 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:26:33,877 INFO sqlalchemy.engine.Engine [cached since 513.7s ago] (6,)
INFO:     127.0.0.1:62523 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:26:34,089 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:26:34,092 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:26:34,093 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:26:34,094 INFO sqlalchemy.engine.Engine [cached since 513.9s ago] (6,)
2026-02-20 07:26:34,101 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:26:34,102 INFO sqlalchemy.engine.Engine [cached since 0.3397s ago] (100, 0)
2026-02-20 07:26:34,214 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62527 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 93, in read_med_orgs
    return await crud_crm.get_med_orgs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 60, in get_med_orgs
    selectinload(MedicalOrganization.assigned_rep)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'MedicalOrganization' has no attribute 'assigned_rep'. Did you mean: 'assigned_reps'?
INFO:     127.0.0.1:62523 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:26:34,236 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:26:34,428 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:26:34,430 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:26:34,431 INFO sqlalchemy.engine.Engine [cached since 514.2s ago] (6,)
2026-02-20 07:26:34,599 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:26:34,600 INFO sqlalchemy.engine.Engine [cached since 0.8375s ago] (100, 0)
INFO:     127.0.0.1:62523 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:26:34,603 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:26:34,609 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:26:34,610 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:26:34,610 INFO sqlalchemy.engine.Engine [cached since 514.4s ago] (6,)
2026-02-20 07:26:35,224 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:26:35,224 INFO sqlalchemy.engine.Engine [cached since 1.462s ago] (100, 0)
INFO:     127.0.0.1:62523 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:26:35,323 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:26:49,884 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:26:49,887 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:26:49,887 INFO sqlalchemy.engine.Engine [cached since 529.7s ago] (6,)
2026-02-20 07:26:49,895 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:26:49,896 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:26:49,897 INFO sqlalchemy.engine.Engine [cached since 529.7s ago] (6,)
2026-02-20 07:26:49,937 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:26:49,938 INFO sqlalchemy.engine.Engine [cached since 16.18s ago] (100, 0)
2026-02-20 07:26:49,962 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 07:26:49,962 INFO sqlalchemy.engine.Engine [cached since 476.7s ago] ()
INFO:     127.0.0.1:62529 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:26:49,968 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62594 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 07:26:49,981 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63054 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63055 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:28:40,109 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:28:40,110 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:28:40,111 INFO sqlalchemy.engine.Engine [cached since 639.9s ago] (6,)
2026-02-20 07:28:40,273 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:28:40,279 INFO sqlalchemy.engine.Engine [cached since 627s ago] (100, 0)
2026-02-20 07:28:40,356 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:28:40,356 INFO sqlalchemy.engine.Engine [cached since 627.1s ago] (1,)
2026-02-20 07:28:40,373 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 07:28:40,373 INFO sqlalchemy.engine.Engine [cached since 627.1s ago] (5, 4)
INFO:     127.0.0.1:63054 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:28:40,397 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:28:40,417 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:28:40,418 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:28:40,419 INFO sqlalchemy.engine.Engine [cached since 640.2s ago] (6,)
2026-02-20 07:28:40,498 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:28:40,499 INFO sqlalchemy.engine.Engine [cached since 627.3s ago] (100, 0)
2026-02-20 07:28:40,532 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:28:40,533 INFO sqlalchemy.engine.Engine [cached since 627.3s ago] (1,)
2026-02-20 07:28:40,542 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 07:28:40,543 INFO sqlalchemy.engine.Engine [cached since 627.3s ago] (5, 4)
INFO:     127.0.0.1:63054 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:28:40,572 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:29:06,220 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:29:06,223 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:29:06,224 INFO sqlalchemy.engine.Engine [cached since 666s ago] (6,)
INFO:     127.0.0.1:63166 - "OPTIONS /api/v1/categories/ HTTP/1.1" 200 OK
2026-02-20 07:29:06,264 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:29:06,265 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:29:06,266 INFO sqlalchemy.engine.Engine [cached since 666.1s ago] (6,)
2026-02-20 07:29:06,288 INFO sqlalchemy.engine.Engine SELECT category.id, category.name 
FROM category 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:29:06,288 INFO sqlalchemy.engine.Engine [cached since 635.3s ago] (100, 0)
2026-02-20 07:29:06,293 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:29:06,294 INFO sqlalchemy.engine.Engine [cached since 635.3s ago] (100, 0)
INFO:     127.0.0.1:63057 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-20 07:29:06,305 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63166 - "GET /api/v1/categories/ HTTP/1.1" 200 OK
2026-02-20 07:29:06,314 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63438 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:30:13,373 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:13,375 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:30:13,376 INFO sqlalchemy.engine.Engine [cached since 733.2s ago] (6,)
2026-02-20 07:30:13,420 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
WHERE manufacturer.id IN ($1::INTEGER)
2026-02-20 07:30:13,420 INFO sqlalchemy.engine.Engine [generated in 0.00204s] (2,)
2026-02-20 07:30:13,502 INFO sqlalchemy.engine.Engine INSERT INTO product (name, price, production_price, category_id, is_active, marketing_expense, salary_expense, created_at, updated_at) VALUES ($1::VARCHAR, $2::FLOAT, $3::FLOAT, $4::INTEGER, $5::BOOLEAN, $6::FLOAT, $7::FLOAT, $8::TIMESTAMP WITHOUT TIME ZONE, $9::TIMESTAMP WITHOUT TIME ZONE) RETURNING product.id
2026-02-20 07:30:13,502 INFO sqlalchemy.engine.Engine [generated in 0.00274s] ('Test Med 500mg', 50000.0, 30000.0, 1, True, 0.0, 0.0, datetime.datetime(2026, 2, 20, 2, 30, 13, 500607), datetime.datetime(2026, 2, 20, 2, 30, 13, 500652))
2026-02-20 07:30:13,562 INFO sqlalchemy.engine.Engine INSERT INTO product_manufacturer (product_id, manufacturer_id) VALUES ($1::INTEGER, $2::INTEGER)
2026-02-20 07:30:13,563 INFO sqlalchemy.engine.Engine [generated in 0.00134s] (6, 2)
2026-02-20 07:30:13,596 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 07:30:13,603 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:13,609 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
WHERE product.id = $1::INTEGER
2026-02-20 07:30:13,610 INFO sqlalchemy.engine.Engine [generated in 0.00052s] (6,)
2026-02-20 07:30:13,655 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
WHERE product.id = $1::INTEGER
2026-02-20 07:30:13,656 INFO sqlalchemy.engine.Engine [generated in 0.00065s] (6,)
2026-02-20 07:30:13,671 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:30:13,676 INFO sqlalchemy.engine.Engine [cached since 720.4s ago] (1,)
2026-02-20 07:30:13,705 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER)
2026-02-20 07:30:13,706 INFO sqlalchemy.engine.Engine [cached since 720.4s ago] (6,)
INFO:     127.0.0.1:63438 - "POST /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:30:13,820 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:30:13,831 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:13,833 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:30:13,833 INFO sqlalchemy.engine.Engine [cached since 733.6s ago] (6,)
2026-02-20 07:30:13,849 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:30:13,850 INFO sqlalchemy.engine.Engine [cached since 720.6s ago] (100, 0)
2026-02-20 07:30:13,856 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:30:13,857 INFO sqlalchemy.engine.Engine [cached since 720.6s ago] (1,)
2026-02-20 07:30:13,866 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 07:30:13,867 INFO sqlalchemy.engine.Engine [cached since 720.6s ago] (5, 4, 6)
INFO:     127.0.0.1:63438 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:30:13,875 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:30:42,434 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:42,436 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:30:42,436 INFO sqlalchemy.engine.Engine [cached since 762.2s ago] (6,)
INFO:     127.0.0.1:63564 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63566 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 07:30:42,451 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:42,452 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:30:42,453 INFO sqlalchemy.engine.Engine [cached since 762.3s ago] (6,)
2026-02-20 07:30:42,470 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:30:42,471 INFO sqlalchemy.engine.Engine [cached since 248.7s ago] (100, 0)
2026-02-20 07:30:42,476 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63564 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 93, in read_med_orgs
    return await crud_crm.get_med_orgs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 60, in get_med_orgs
    selectinload(MedicalOrganization.assigned_rep)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'MedicalOrganization' has no attribute 'assigned_rep'. Did you mean: 'assigned_reps'?
INFO:     127.0.0.1:63440 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:30:42,520 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:30:42,526 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:42,526 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:30:42,527 INFO sqlalchemy.engine.Engine [cached since 762.3s ago] (6,)
2026-02-20 07:30:42,532 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:42,533 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:30:42,533 INFO sqlalchemy.engine.Engine [cached since 762.3s ago] (6,)
2026-02-20 07:30:42,558 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63566 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 93, in read_med_orgs
    return await crud_crm.get_med_orgs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 60, in get_med_orgs
    selectinload(MedicalOrganization.assigned_rep)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'MedicalOrganization' has no attribute 'assigned_rep'. Did you mean: 'assigned_reps'?
2026-02-20 07:30:42,638 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:30:42,639 INFO sqlalchemy.engine.Engine [cached since 248.9s ago] (100, 0)
INFO:     127.0.0.1:63440 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:30:42,675 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:30:42,897 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:42,897 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:30:42,898 INFO sqlalchemy.engine.Engine [cached since 762.7s ago] (6,)
2026-02-20 07:30:42,905 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:30:42,906 INFO sqlalchemy.engine.Engine [cached since 249.1s ago] (100, 0)
INFO:     127.0.0.1:63440 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:30:42,926 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:30:42,940 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:30:42,941 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:30:42,942 INFO sqlalchemy.engine.Engine [cached since 762.7s ago] (6,)
2026-02-20 07:30:42,949 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:30:42,949 INFO sqlalchemy.engine.Engine [cached since 249.2s ago] (100, 0)
INFO:     127.0.0.1:63440 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:30:42,972 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:31:09,365 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:09,366 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:09,367 INFO sqlalchemy.engine.Engine [cached since 789.2s ago] (6,)
INFO:     127.0.0.1:63682 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 07:31:09,382 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:09,384 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:09,384 INFO sqlalchemy.engine.Engine [cached since 789.2s ago] (6,)
2026-02-20 07:31:09,440 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:31:09,440 INFO sqlalchemy.engine.Engine [cached since 275.7s ago] (100, 0)
2026-02-20 07:31:09,445 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 07:31:09,445 INFO sqlalchemy.engine.Engine [cached since 736.2s ago] ()
INFO:     127.0.0.1:63568 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:31:09,448 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63682 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 07:31:09,453 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63684 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 07:31:43,573 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:43,574 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:43,574 INFO sqlalchemy.engine.Engine [cached since 823.4s ago] (6,)
2026-02-20 07:31:43,625 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63684 - "POST /api/v1/crm/med-orgs/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 111, in create_med_org
    return await crud_crm.create_med_org(db, obj_in=med_org_in)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 74, in create_med_org
    db_obj = MedicalOrganization(**obj_in.dict())
  File "<string>", line 4, in __init__
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 596, in _initialize_instance
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 594, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/decl_base.py", line 2179, in _declarative_constructor
    raise TypeError(
        "%r is an invalid keyword argument for %s" % (k, cls_.__name__)
    )
TypeError: 'assigned_rep_id' is an invalid keyword argument for MedicalOrganization
2026-02-20 07:31:44,279 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:44,280 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:44,280 INFO sqlalchemy.engine.Engine [cached since 824.1s ago] (6,)
2026-02-20 07:31:44,286 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:44,288 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:44,288 INFO sqlalchemy.engine.Engine [cached since 824.1s ago] (6,)
2026-02-20 07:31:44,390 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 07:31:44,391 INFO sqlalchemy.engine.Engine [cached since 771.2s ago] ()
2026-02-20 07:31:44,395 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:31:44,396 INFO sqlalchemy.engine.Engine [cached since 310.6s ago] (100, 0)
INFO:     127.0.0.1:63824 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 07:31:44,400 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:31:44,409 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:44,410 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:44,411 INFO sqlalchemy.engine.Engine [cached since 824.2s ago] (6,)
INFO:     127.0.0.1:63822 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:31:44,419 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:31:44,431 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:44,432 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:44,433 INFO sqlalchemy.engine.Engine [cached since 824.2s ago] (6,)
2026-02-20 07:31:44,436 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 07:31:44,436 INFO sqlalchemy.engine.Engine [cached since 771.2s ago] ()
2026-02-20 07:31:44,442 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:31:44,442 INFO sqlalchemy.engine.Engine [cached since 310.7s ago] (100, 0)
INFO:     127.0.0.1:63824 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 07:31:44,447 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63822 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:31:44,453 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:31:44,459 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:44,460 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:44,460 INFO sqlalchemy.engine.Engine [cached since 824.3s ago] (6,)
2026-02-20 07:31:44,469 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:31:44,469 INFO sqlalchemy.engine.Engine [cached since 310.7s ago] (100, 0)
INFO:     127.0.0.1:63822 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:31:44,473 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:31:44,479 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:31:44,480 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:31:44,480 INFO sqlalchemy.engine.Engine [cached since 824.3s ago] (6,)
2026-02-20 07:31:44,484 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:31:44,484 INFO sqlalchemy.engine.Engine [cached since 310.7s ago] (100, 0)
INFO:     127.0.0.1:63822 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 07:31:44,490 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64321 - "OPTIONS /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 07:33:46,352 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:33:46,384 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-20 07:33:46,386 INFO sqlalchemy.engine.Engine [generated in 0.00416s] ('admindeputy_director',)
2026-02-20 07:33:46,465 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64328 - "POST /api/v1/login/access-token HTTP/1.1" 400 Bad Request
2026-02-20 07:35:30,410 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:35:30,412 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-20 07:35:30,413 INFO sqlalchemy.engine.Engine [cached since 104s ago] ('admin',)
INFO:     127.0.0.1:64748 - "POST /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 07:35:31,573 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64748 - "OPTIONS /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 07:35:31,787 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:35:31,788 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:35:31,789 INFO sqlalchemy.engine.Engine [cached since 1052s ago] (6,)
INFO:     127.0.0.1:64748 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 07:35:31,809 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64748 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 07:35:32,124 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:35:32,125 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:35:32,125 INFO sqlalchemy.engine.Engine [cached since 1052s ago] (1,)
2026-02-20 07:35:32,162 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 07:35:32,163 INFO sqlalchemy.engine.Engine [cached since 1052s ago] (2, 2026)
INFO:     127.0.0.1:64754 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 07:35:32,192 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51936 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 07:49:46,561 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:49:46,568 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:49:46,569 INFO sqlalchemy.engine.Engine [cached since 1906s ago] (1,)
2026-02-20 07:49:46,707 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 07:49:46,707 INFO sqlalchemy.engine.Engine [cached since 1906s ago] (2, 2026)
INFO:     127.0.0.1:51936 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 07:49:46,837 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51936 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:51938 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:49:47,277 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:49:47,277 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:49:47,277 INFO sqlalchemy.engine.Engine [cached since 1907s ago] (1,)
2026-02-20 07:49:47,290 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:49:47,290 INFO sqlalchemy.engine.Engine [cached since 1894s ago] (100, 0)
2026-02-20 07:49:47,294 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:49:47,295 INFO sqlalchemy.engine.Engine [cached since 1894s ago] (1,)
2026-02-20 07:49:47,297 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 07:49:47,297 INFO sqlalchemy.engine.Engine [cached since 1894s ago] (5, 4, 6)
INFO:     127.0.0.1:51936 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:49:47,300 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:49:47,303 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:49:47,303 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:49:47,303 INFO sqlalchemy.engine.Engine [cached since 1907s ago] (1,)
2026-02-20 07:49:47,306 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:49:47,306 INFO sqlalchemy.engine.Engine [cached since 1894s ago] (100, 0)
2026-02-20 07:49:47,308 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 07:49:47,308 INFO sqlalchemy.engine.Engine [cached since 1894s ago] (1,)
2026-02-20 07:49:47,310 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 07:49:47,310 INFO sqlalchemy.engine.Engine [cached since 1894s ago] (5, 4, 6)
INFO:     127.0.0.1:51936 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 07:49:47,314 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51936 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:51938 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 07:49:47,694 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:49:47,694 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:49:47,694 INFO sqlalchemy.engine.Engine [cached since 1907s ago] (1,)
2026-02-20 07:49:47,716 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:49:47,716 INFO sqlalchemy.engine.Engine [generated in 0.00032s] (100, 0)
INFO:     127.0.0.1:51945 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 07:49:47,721 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:49:47,724 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:49:47,725 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:49:47,726 INFO sqlalchemy.engine.Engine [cached since 1907s ago] (1,)
2026-02-20 07:49:47,728 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 07:49:47,728 INFO sqlalchemy.engine.Engine [cached since 0.01207s ago] (100, 0)
INFO:     127.0.0.1:51945 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 07:49:47,732 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 07:53:50,796 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 07:53:50,797 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 07:53:50,798 INFO sqlalchemy.engine.Engine [cached since 1950s ago] (1,)
2026-02-20 07:53:50,806 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 07:53:50,807 INFO sqlalchemy.engine.Engine [cached since 1950s ago] (2, 2026)
INFO:     127.0.0.1:52469 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 07:53:50,813 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:10:07,436 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:10:07,445 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:10:07,446 INFO sqlalchemy.engine.Engine [cached since 1993s ago] (1,)
2026-02-20 08:10:07,518 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 08:10:07,518 INFO sqlalchemy.engine.Engine [cached since 1993s ago] (2, 2026)
INFO:     127.0.0.1:52986 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 08:10:07,686 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:28:15,171 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:28:15,438 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:28:15,439 INFO sqlalchemy.engine.Engine [cached since 2029s ago] (1,)
2026-02-20 08:28:16,152 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 08:28:16,157 INFO sqlalchemy.engine.Engine [cached since 2030s ago] (2, 2026)
INFO:     127.0.0.1:53239 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 08:28:16,365 INFO sqlalchemy.engine.Engine ROLLBACK
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/crm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17977]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [18508]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-02-20 08:31:33,646 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-20 08:31:33,647 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 08:31:33,666 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-20 08:31:33,666 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 08:31:33,739 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-20 08:31:33,740 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 08:31:33,744 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:31:34,433 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:31:34,434 INFO sqlalchemy.engine.Engine [generated in 0.00100s] (1,)
2026-02-20 08:31:34,524 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 08:31:34,524 INFO sqlalchemy.engine.Engine [generated in 0.00043s] (2, 2026)
INFO:     127.0.0.1:54102 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 08:31:34,559 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54290 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:32:13,278 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:32:13,280 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:32:13,280 INFO sqlalchemy.engine.Engine [cached since 38.85s ago] (1,)
2026-02-20 08:32:13,305 INFO sqlalchemy.engine.Engine INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id
2026-02-20 08:32:13,305 INFO sqlalchemy.engine.Engine [generated in 0.00050s] ('Tashkent City',)
2026-02-20 08:32:13,338 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 08:32:13,348 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:32:13,373 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-20 08:32:13,373 INFO sqlalchemy.engine.Engine [generated in 0.00071s] (2,)
INFO:     127.0.0.1:54290 - "POST /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:32:13,487 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:32:13,515 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:32:13,515 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:32:13,515 INFO sqlalchemy.engine.Engine [cached since 39.08s ago] (1,)
2026-02-20 08:32:13,521 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:32:13,521 INFO sqlalchemy.engine.Engine [generated in 0.00039s] (100, 0)
INFO:     127.0.0.1:54290 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:32:13,526 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:33:10,704 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:33:10,717 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:33:10,717 INFO sqlalchemy.engine.Engine [cached since 96.28s ago] (1,)
2026-02-20 08:33:10,825 INFO sqlalchemy.engine.Engine INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id
2026-02-20 08:33:10,825 INFO sqlalchemy.engine.Engine [cached since 57.52s ago] ('Tashkent City',)
2026-02-20 08:33:10,905 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54292 - "POST /api/v1/crm/regions/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 205, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Tashkent City) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Tashkent City) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 38, in create_region
    return await crud_crm.create_region(db, obj_in=region_in)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 20, in create_region
    await db.commit()
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Tashkent City) already exists.
[SQL: INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id]
[parameters: ('Tashkent City',)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2026-02-20 08:34:51,620 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:34:51,645 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:34:51,648 INFO sqlalchemy.engine.Engine [cached since 197.2s ago] (1,)
INFO:     127.0.0.1:54975 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:54977 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:34:51,845 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:34:51,845 INFO sqlalchemy.engine.Engine [cached since 158.3s ago] (100, 0)
INFO:     127.0.0.1:54973 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:34:51,898 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:34:51,960 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:34:51,961 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:34:51,961 INFO sqlalchemy.engine.Engine [cached since 197.5s ago] (1,)
2026-02-20 08:34:51,986 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:34:51,988 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:34:51,988 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:34:51,989 INFO sqlalchemy.engine.Engine [cached since 197.6s ago] (1,)
INFO:     127.0.0.1:54983 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 93, in read_med_orgs
    return await crud_crm.get_med_orgs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 60, in get_med_orgs
    selectinload(MedicalOrganization.assigned_rep)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'MedicalOrganization' has no attribute 'assigned_rep'. Did you mean: 'assigned_reps'?
2026-02-20 08:34:52,143 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:34:52,143 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:34:52,143 INFO sqlalchemy.engine.Engine [cached since 197.7s ago] (1,)
2026-02-20 08:34:52,185 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:34:52,185 INFO sqlalchemy.engine.Engine [cached since 158.7s ago] (100, 0)
2026-02-20 08:34:52,188 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54977 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 93, in read_med_orgs
    return await crud_crm.get_med_orgs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 60, in get_med_orgs
    selectinload(MedicalOrganization.assigned_rep)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'MedicalOrganization' has no attribute 'assigned_rep'. Did you mean: 'assigned_reps'?
INFO:     127.0.0.1:54973 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:34:52,201 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:34:52,372 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:34:52,374 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:34:52,374 INFO sqlalchemy.engine.Engine [cached since 197.9s ago] (1,)
2026-02-20 08:34:52,393 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:34:52,394 INFO sqlalchemy.engine.Engine [cached since 158.9s ago] (100, 0)
INFO:     127.0.0.1:54973 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:34:52,405 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:34:52,408 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:34:52,409 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:34:52,409 INFO sqlalchemy.engine.Engine [cached since 198s ago] (1,)
2026-02-20 08:34:52,416 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:34:52,416 INFO sqlalchemy.engine.Engine [cached since 158.9s ago] (100, 0)
INFO:     127.0.0.1:54973 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:34:52,423 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55167 - "OPTIONS /api/v1/doctor-specialties/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55169 - "OPTIONS /api/v1/doctor-categories/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55167 - "GET /api/v1/doctor-specialties/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55171 - "GET /api/v1/doctor-categories/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55171 - "OPTIONS /api/v1/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55167 - "GET /api/v1/med-orgs/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55167 - "OPTIONS /api/v1/regions/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55171 - "GET /api/v1/regions/ HTTP/1.1" 404 Not Found
WARNING:  StatReload detected changes in 'app/schemas/crm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [18508]
WARNING:  StatReload detected changes in 'app/crud/crud_crm.py'. Reloading...
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [18538]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [18540]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:55828 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 08:37:58,109 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-20 08:37:58,110 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 08:37:58,130 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-20 08:37:58,130 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 08:37:58,132 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-20 08:37:58,132 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 08:37:58,134 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:37:58,259 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:37:58,260 INFO sqlalchemy.engine.Engine [generated in 0.00032s] (1,)
2026-02-20 08:37:58,270 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 08:37:58,270 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (2, 2026)
INFO:     127.0.0.1:55828 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 08:37:58,276 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:38:33,135 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:38:33,137 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:38:33,138 INFO sqlalchemy.engine.Engine [cached since 34.88s ago] (1,)
2026-02-20 08:38:33,243 INFO sqlalchemy.engine.Engine INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id
2026-02-20 08:38:33,244 INFO sqlalchemy.engine.Engine [generated in 0.00047s] ('Samarkand Hub',)
2026-02-20 08:38:33,277 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 08:38:33,287 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:38:33,291 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-20 08:38:33,291 INFO sqlalchemy.engine.Engine [generated in 0.00046s] (4,)
INFO:     127.0.0.1:55830 - "POST /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:38:33,305 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:38:33,368 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:38:33,369 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:38:33,370 INFO sqlalchemy.engine.Engine [cached since 35.11s ago] (1,)
2026-02-20 08:38:33,381 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:38:33,382 INFO sqlalchemy.engine.Engine [generated in 0.00064s] (100, 0)
INFO:     127.0.0.1:55830 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:38:33,388 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:39:08,508 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:39:08,510 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:39:08,510 INFO sqlalchemy.engine.Engine [cached since 70.25s ago] (1,)
2026-02-20 08:39:08,718 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:39:08,719 INFO sqlalchemy.engine.Engine [cached since 35.34s ago] (100, 0)
INFO:     127.0.0.1:56125 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:39:08,783 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:39:08,846 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:39:08,847 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:39:08,847 INFO sqlalchemy.engine.Engine [cached since 70.59s ago] (1,)
2026-02-20 08:39:08,848 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:39:08,848 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:39:08,849 INFO sqlalchemy.engine.Engine [cached since 70.59s ago] (1,)
2026-02-20 08:39:08,858 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:39:08,859 INFO sqlalchemy.engine.Engine [cached since 35.48s ago] (100, 0)
2026-02-20 08:39:09,007 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:39:09,007 INFO sqlalchemy.engine.Engine [generated in 0.00044s] (100, 0)
INFO:     127.0.0.1:56125 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:39:09,016 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:39:09,044 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 08:39:09,044 INFO sqlalchemy.engine.Engine [generated in 0.00184s] (1,)
2026-02-20 08:39:09,072 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-20 08:39:09,072 INFO sqlalchemy.engine.Engine [generated in 0.00089s] (1,)
INFO:     127.0.0.1:56127 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:39:09,097 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:39:09,101 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:39:09,102 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:39:09,103 INFO sqlalchemy.engine.Engine [cached since 70.84s ago] (1,)
2026-02-20 08:39:09,107 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:39:09,107 INFO sqlalchemy.engine.Engine [cached since 0.1004s ago] (100, 0)
2026-02-20 08:39:09,114 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 08:39:09,114 INFO sqlalchemy.engine.Engine [cached since 0.0718s ago] (1,)
2026-02-20 08:39:09,119 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-20 08:39:09,120 INFO sqlalchemy.engine.Engine [cached since 0.04857s ago] (1,)
INFO:     127.0.0.1:56127 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:39:09,128 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:39:09,379 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:39:09,380 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:39:09,380 INFO sqlalchemy.engine.Engine [cached since 71.12s ago] (1,)
2026-02-20 08:39:09,410 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:39:09,410 INFO sqlalchemy.engine.Engine [cached since 36.03s ago] (100, 0)
INFO:     127.0.0.1:56127 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:39:09,429 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:39:09,433 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:39:09,435 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:39:09,436 INFO sqlalchemy.engine.Engine [cached since 71.18s ago] (1,)
2026-02-20 08:39:09,683 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:39:09,683 INFO sqlalchemy.engine.Engine [cached since 36.3s ago] (100, 0)
INFO:     127.0.0.1:56127 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:39:09,700 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:39:27,886 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:39:27,888 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:39:27,889 INFO sqlalchemy.engine.Engine [cached since 89.63s ago] (1,)
INFO:     127.0.0.1:56216 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 08:39:27,901 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:39:27,901 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:39:27,901 INFO sqlalchemy.engine.Engine [cached since 89.64s ago] (1,)
2026-02-20 08:39:27,922 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:39:27,923 INFO sqlalchemy.engine.Engine [cached since 54.54s ago] (100, 0)
2026-02-20 08:39:27,932 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 08:39:27,932 INFO sqlalchemy.engine.Engine [generated in 0.00032s] ()
INFO:     127.0.0.1:56215 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:39:27,936 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56216 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 08:39:27,952 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56523 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:40:42,037 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:40:42,043 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:40:42,044 INFO sqlalchemy.engine.Engine [cached since 163.8s ago] (1,)
2026-02-20 08:40:42,183 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 08:40:42,183 INFO sqlalchemy.engine.Engine [generated in 0.00217s] (5,)
2026-02-20 08:40:42,249 INFO sqlalchemy.engine.Engine INSERT INTO medicalorganization (name, address, region_id, org_type, brand, director_name) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR) RETURNING medicalorganization.id
2026-02-20 08:40:42,249 INFO sqlalchemy.engine.Engine [generated in 0.00113s] ('Clinic Samarkand', 'Samarkand, Central St 10', 4, <MedicalOrganizationType.CLINIC: 'clinic'>, None, None)
2026-02-20 08:40:42,374 INFO sqlalchemy.engine.Engine INSERT INTO medrep_organization (user_id, organization_id) VALUES ($1::INTEGER, $2::INTEGER)
2026-02-20 08:40:42,375 INFO sqlalchemy.engine.Engine [generated in 0.00053s] (5, 2)
2026-02-20 08:40:42,391 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 08:40:42,400 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:40:42,403 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-20 08:40:42,403 INFO sqlalchemy.engine.Engine [generated in 0.00044s] (2,)
2026-02-20 08:40:42,422 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-20 08:40:42,423 INFO sqlalchemy.engine.Engine [generated in 0.00142s] (2,)
2026-02-20 08:40:42,437 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 08:40:42,438 INFO sqlalchemy.engine.Engine [cached since 93.39s ago] (4,)
2026-02-20 08:40:42,442 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-20 08:40:42,445 INFO sqlalchemy.engine.Engine [cached since 93.37s ago] (2,)
INFO:     127.0.0.1:56523 - "POST /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:40:42,468 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:40:42,628 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:40:42,629 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:40:42,629 INFO sqlalchemy.engine.Engine [cached since 164.4s ago] (1,)
2026-02-20 08:40:42,644 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:40:42,645 INFO sqlalchemy.engine.Engine [cached since 93.64s ago] (100, 0)
2026-02-20 08:40:42,656 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:40:42,656 INFO sqlalchemy.engine.Engine [cached since 93.61s ago] (1, 4)
2026-02-20 08:40:42,666 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:40:42,666 INFO sqlalchemy.engine.Engine [cached since 93.59s ago] (1, 2)
INFO:     127.0.0.1:56523 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:40:42,682 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56853 - "GET /api/v1/doctor-specialties/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56855 - "GET /api/v1/doctor-categories/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56857 - "GET /api/v1/med-orgs/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:56859 - "GET /api/v1/regions/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57894 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:44:32,186 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:44:32,198 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:44:32,200 INFO sqlalchemy.engine.Engine [cached since 393.9s ago] (1,)
2026-02-20 08:44:32,256 INFO sqlalchemy.engine.Engine INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id
2026-02-20 08:44:32,257 INFO sqlalchemy.engine.Engine [cached since 359s ago] ('Samarkand Hub',)
2026-02-20 08:44:32,319 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57894 - "POST /api/v1/crm/regions/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 205, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Samarkand Hub) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Samarkand Hub) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 38, in create_region
    return await crud_crm.create_region(db, obj_in=region_in)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 20, in create_region
    await db.commit()
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Samarkand Hub) already exists.
[SQL: INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id]
[parameters: ('Samarkand Hub',)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2026-02-20 08:46:01,414 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:46:01,432 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:46:01,433 INFO sqlalchemy.engine.Engine [cached since 483.2s ago] (1,)
2026-02-20 08:46:01,484 INFO sqlalchemy.engine.Engine INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id
2026-02-20 08:46:01,485 INFO sqlalchemy.engine.Engine [cached since 448.2s ago] ('Samarkand Hub',)
2026-02-20 08:46:01,504 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58277 - "POST /api/v1/crm/regions/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 205, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Samarkand Hub) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Samarkand Hub) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 38, in create_region
    return await crud_crm.create_region(db, obj_in=region_in)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/macbook13/Documents/pharma_new/backend/app/crud/crud_crm.py", line 20, in create_region
    await db.commit()
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_region_name"
DETAIL:  Key (name)=(Samarkand Hub) already exists.
[SQL: INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id]
[parameters: ('Samarkand Hub',)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2026-02-20 08:47:12,733 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:47:12,742 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:47:12,742 INFO sqlalchemy.engine.Engine [cached since 554.5s ago] (1,)
2026-02-20 08:47:12,747 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:47:12,748 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:47:12,749 INFO sqlalchemy.engine.Engine [cached since 554.5s ago] (1,)
2026-02-20 08:47:12,983 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:47:12,985 INFO sqlalchemy.engine.Engine [cached since 484s ago] (100, 0)
2026-02-20 08:47:12,990 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:47:12,991 INFO sqlalchemy.engine.Engine [cached since 519.6s ago] (100, 0)
2026-02-20 08:47:13,002 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:47:13,002 INFO sqlalchemy.engine.Engine [cached since 483.9s ago] (1, 4)
INFO:     127.0.0.1:58571 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:47:13,011 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:47:13,027 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:47:13,028 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:47:13,028 INFO sqlalchemy.engine.Engine [cached since 554.8s ago] (1,)
2026-02-20 08:47:13,044 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:47:13,044 INFO sqlalchemy.engine.Engine [cached since 484s ago] (1, 2)
2026-02-20 08:47:13,129 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:47:13,129 INFO sqlalchemy.engine.Engine [cached since 519.7s ago] (100, 0)
INFO:     127.0.0.1:58573 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:47:13,178 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58571 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:47:13,184 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:47:13,187 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:47:13,187 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:47:13,187 INFO sqlalchemy.engine.Engine [cached since 554.9s ago] (1,)
2026-02-20 08:47:13,192 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:47:13,192 INFO sqlalchemy.engine.Engine [cached since 484.2s ago] (100, 0)
2026-02-20 08:47:13,197 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:47:13,197 INFO sqlalchemy.engine.Engine [cached since 484.1s ago] (1, 4)
2026-02-20 08:47:13,201 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:47:13,201 INFO sqlalchemy.engine.Engine [cached since 484.1s ago] (1, 2)
INFO:     127.0.0.1:58573 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:47:13,208 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:47:13,506 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:47:13,508 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:47:13,508 INFO sqlalchemy.engine.Engine [cached since 555.2s ago] (1,)
2026-02-20 08:47:13,528 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:47:13,529 INFO sqlalchemy.engine.Engine [cached since 520.1s ago] (100, 0)
INFO:     127.0.0.1:58573 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:47:13,538 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:47:13,542 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:47:13,543 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:47:13,543 INFO sqlalchemy.engine.Engine [cached since 555.3s ago] (1,)
2026-02-20 08:47:13,554 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:47:13,554 INFO sqlalchemy.engine.Engine [cached since 520.2s ago] (100, 0)
INFO:     127.0.0.1:58573 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:47:13,557 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59596 - "OPTIONS /api/v1/doctor-specialties/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59598 - "OPTIONS /api/v1/doctor-categories/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59600 - "OPTIONS /api/v1/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59601 - "OPTIONS /api/v1/regions/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59596 - "GET /api/v1/doctor-specialties/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59598 - "GET /api/v1/med-orgs/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59600 - "GET /api/v1/regions/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59603 - "GET /api/v1/doctor-categories/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:59932 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 08:52:28,995 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:52:29,003 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:52:29,004 INFO sqlalchemy.engine.Engine [cached since 870.7s ago] (1,)
2026-02-20 08:52:29,053 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 08:52:29,053 INFO sqlalchemy.engine.Engine [cached since 870.8s ago] (2, 2026)
INFO:     127.0.0.1:59932 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 08:52:29,083 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:52:40,973 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:52:40,981 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:52:40,981 INFO sqlalchemy.engine.Engine [cached since 882.7s ago] (1,)
2026-02-20 08:52:41,261 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:52:41,261 INFO sqlalchemy.engine.Engine [cached since 847.9s ago] (100, 0)
INFO:     127.0.0.1:59934 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:52:41,274 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:52:41,280 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:52:41,281 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:52:41,282 INFO sqlalchemy.engine.Engine [cached since 883s ago] (1,)
2026-02-20 08:52:41,509 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:52:41,509 INFO sqlalchemy.engine.Engine [cached since 848.1s ago] (100, 0)
INFO:     127.0.0.1:59934 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:52:41,539 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:14,822 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:14,823 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:14,824 INFO sqlalchemy.engine.Engine [cached since 916.5s ago] (1,)
2026-02-20 08:53:14,981 INFO sqlalchemy.engine.Engine INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id
2026-02-20 08:53:14,981 INFO sqlalchemy.engine.Engine [cached since 881.7s ago] ('Bukhara Hub',)
2026-02-20 08:53:15,090 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 08:53:15,125 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:15,129 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-20 08:53:15,130 INFO sqlalchemy.engine.Engine [cached since 881.8s ago] (7,)
INFO:     127.0.0.1:60127 - "POST /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:53:15,151 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:15,475 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:15,476 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:15,476 INFO sqlalchemy.engine.Engine [cached since 917.2s ago] (1,)
2026-02-20 08:53:15,496 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:53:15,496 INFO sqlalchemy.engine.Engine [cached since 882.1s ago] (100, 0)
INFO:     127.0.0.1:60127 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:53:15,501 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:32,601 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:32,612 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:32,612 INFO sqlalchemy.engine.Engine [cached since 934.3s ago] (1,)
INFO:     127.0.0.1:60204 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:60206 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:53:32,644 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:32,652 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:32,653 INFO sqlalchemy.engine.Engine [cached since 934.4s ago] (1,)
2026-02-20 08:53:32,679 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:53:32,679 INFO sqlalchemy.engine.Engine [cached since 899.3s ago] (100, 0)
INFO:     127.0.0.1:60202 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:53:32,688 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:32,704 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:32,705 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:32,705 INFO sqlalchemy.engine.Engine [cached since 934.4s ago] (1,)
2026-02-20 08:53:32,732 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:53:32,732 INFO sqlalchemy.engine.Engine [cached since 899.3s ago] (100, 0)
2026-02-20 08:53:32,795 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:53:32,796 INFO sqlalchemy.engine.Engine [cached since 863.8s ago] (100, 0)
INFO:     127.0.0.1:60202 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:53:32,843 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:32,862 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:53:32,862 INFO sqlalchemy.engine.Engine [cached since 863.8s ago] (1, 4)
2026-02-20 08:53:32,870 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:53:32,870 INFO sqlalchemy.engine.Engine [cached since 863.8s ago] (1, 2)
INFO:     127.0.0.1:60204 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:53:32,886 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:32,893 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:32,895 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:32,895 INFO sqlalchemy.engine.Engine [cached since 934.6s ago] (1,)
2026-02-20 08:53:32,907 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:53:32,907 INFO sqlalchemy.engine.Engine [cached since 863.9s ago] (100, 0)
2026-02-20 08:53:32,912 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:53:32,912 INFO sqlalchemy.engine.Engine [cached since 863.9s ago] (1, 4)
2026-02-20 08:53:32,916 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 08:53:32,917 INFO sqlalchemy.engine.Engine [cached since 863.8s ago] (1, 2)
INFO:     127.0.0.1:60204 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:53:32,936 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:33,141 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:33,146 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:33,146 INFO sqlalchemy.engine.Engine [cached since 934.9s ago] (1,)
2026-02-20 08:53:33,172 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:53:33,172 INFO sqlalchemy.engine.Engine [cached since 899.8s ago] (100, 0)
INFO:     127.0.0.1:60204 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:53:33,178 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:33,185 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:33,187 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:33,188 INFO sqlalchemy.engine.Engine [cached since 934.9s ago] (1,)
2026-02-20 08:53:33,197 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:53:33,198 INFO sqlalchemy.engine.Engine [cached since 899.8s ago] (100, 0)
INFO:     127.0.0.1:60204 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:53:33,256 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:50,398 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:50,399 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:50,399 INFO sqlalchemy.engine.Engine [cached since 952.1s ago] (1,)
INFO:     127.0.0.1:60282 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 08:53:50,423 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:53:50,423 INFO sqlalchemy.engine.Engine [cached since 917s ago] (100, 0)
2026-02-20 08:53:50,434 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:53:50,435 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:53:50,435 INFO sqlalchemy.engine.Engine [cached since 952.2s ago] (1,)
INFO:     127.0.0.1:60208 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:53:50,439 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:53:50,456 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 08:53:50,457 INFO sqlalchemy.engine.Engine [cached since 862.5s ago] ()
INFO:     127.0.0.1:60284 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 08:53:50,500 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60668 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:55:24,544 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:55:24,901 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:55:24,903 INFO sqlalchemy.engine.Engine [cached since 1047s ago] (1,)
2026-02-20 08:55:25,042 INFO sqlalchemy.engine.Engine INSERT INTO medicalorganization (name, address, region_id, org_type, brand, director_name) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR) RETURNING medicalorganization.id
2026-02-20 08:55:25,043 INFO sqlalchemy.engine.Engine [cached since 882.8s ago] ('Clinic Bukhara', 'Bukhara, Main St 5', 7, <MedicalOrganizationType.CLINIC: 'clinic'>, None, None)
2026-02-20 08:55:25,126 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 08:55:25,136 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:55:25,139 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-20 08:55:25,140 INFO sqlalchemy.engine.Engine [cached since 882.7s ago] (3,)
2026-02-20 08:55:25,181 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-20 08:55:25,181 INFO sqlalchemy.engine.Engine [cached since 882.7s ago] (3,)
2026-02-20 08:55:25,192 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 08:55:25,193 INFO sqlalchemy.engine.Engine [cached since 976.1s ago] (7,)
2026-02-20 08:55:25,204 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-20 08:55:25,204 INFO sqlalchemy.engine.Engine [cached since 976.1s ago] (3,)
INFO:     127.0.0.1:60668 - "POST /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:55:25,223 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:55:25,432 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:55:25,433 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:55:25,433 INFO sqlalchemy.engine.Engine [cached since 1047s ago] (1,)
2026-02-20 08:55:25,454 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:55:25,454 INFO sqlalchemy.engine.Engine [cached since 976.4s ago] (100, 0)
2026-02-20 08:55:25,480 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 08:55:25,481 INFO sqlalchemy.engine.Engine [cached since 976.4s ago] (1, 4, 7)
2026-02-20 08:55:25,676 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 08:55:25,676 INFO sqlalchemy.engine.Engine [cached since 976.6s ago] (1, 2, 3)
INFO:     127.0.0.1:60668 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:55:25,719 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60670 - "OPTIONS /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-20 08:56:09,562 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:56:09,567 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:56:09,568 INFO sqlalchemy.engine.Engine [cached since 1091s ago] (1,)
INFO:     127.0.0.1:60863 - "OPTIONS /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-20 08:56:09,578 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:56:09,578 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:56:09,578 INFO sqlalchemy.engine.Engine [cached since 1091s ago] (1,)
INFO:     127.0.0.1:60866 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:56:09,596 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:56:09,596 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:56:09,597 INFO sqlalchemy.engine.Engine [cached since 1091s ago] (1,)
2026-02-20 08:56:09,971 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:56:09,972 INFO sqlalchemy.engine.Engine [generated in 0.00166s] (100, 0)
2026-02-20 08:56:09,981 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:56:09,981 INFO sqlalchemy.engine.Engine [cached since 1021s ago] (100, 0)
2026-02-20 08:56:10,004 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 08:56:10,004 INFO sqlalchemy.engine.Engine [cached since 1021s ago] (1, 4, 7)
2026-02-20 08:56:10,013 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:56:10,013 INFO sqlalchemy.engine.Engine [generated in 0.00060s] (100, 0)
2026-02-20 08:56:10,031 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 08:56:10,031 INFO sqlalchemy.engine.Engine [cached since 1021s ago] (1, 2, 3)
INFO:     127.0.0.1:60865 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 08:56:10,091 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60670 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-20 08:56:10,131 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60868 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-20 08:56:10,175 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 08:56:10,247 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 08:56:10,248 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 08:56:10,248 INFO sqlalchemy.engine.Engine [cached since 1092s ago] (1,)
2026-02-20 08:56:10,268 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 08:56:10,269 INFO sqlalchemy.engine.Engine [cached since 1057s ago] (100, 0)
INFO:     127.0.0.1:60863 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 08:56:10,284 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63158 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 09:05:18,355 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:05:18,381 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:05:18,382 INFO sqlalchemy.engine.Engine [cached since 1640s ago] (1,)
2026-02-20 09:05:18,788 INFO sqlalchemy.engine.Engine INSERT INTO doctor (full_name, contact1, contact2, email, birth_date, latitude, longitude, address, region_id, specialty_id, category_id, med_org_id, assigned_rep_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::DATE, $6::FLOAT, $7::FLOAT, $8::VARCHAR, $9::INTEGER, $10::INTEGER, $11::INTEGER, $12::INTEGER, $13::INTEGER) RETURNING doctor.id
2026-02-20 09:05:18,789 INFO sqlalchemy.engine.Engine [generated in 0.00335s] ('Dr. Strange', '', '', '', None, None, None, '', 1, 1, 1, 3, None)
2026-02-20 09:05:18,891 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 09:05:18,899 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:05:18,913 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:05:18,914 INFO sqlalchemy.engine.Engine [generated in 0.00183s] (2,)
2026-02-20 09:05:19,029 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:05:19,030 INFO sqlalchemy.engine.Engine [generated in 0.00175s] (2,)
2026-02-20 09:05:19,040 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 09:05:19,040 INFO sqlalchemy.engine.Engine [generated in 0.00075s] (1,)
2026-02-20 09:05:19,045 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 09:05:19,045 INFO sqlalchemy.engine.Engine [generated in 0.00029s] (1,)
2026-02-20 09:05:19,054 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 09:05:19,054 INFO sqlalchemy.engine.Engine [generated in 0.00029s] (1,)
2026-02-20 09:05:19,062 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER)
2026-02-20 09:05:19,063 INFO sqlalchemy.engine.Engine [generated in 0.00113s] (3,)
2026-02-20 09:05:19,088 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-20 09:05:19,089 INFO sqlalchemy.engine.Engine [generated in 0.00154s] (7,)
2026-02-20 09:05:18,930 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user", medrep_organization 
WHERE $1::INTEGER = medrep_organization.organization_id AND "user".id = medrep_organization.user_id
2026-02-20 09:05:18,930 INFO sqlalchemy.engine.Engine [generated in 0.00056s] (3,)
2026-02-20 09:05:18,947 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63158 - "POST /api/v1/crm/doctors/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 452, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 278, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'med_org', 'region'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.models.crm.MedicalOrganization object at 0x1065d1ef0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'med_org', 'assigned_reps'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.models.crm.MedicalOrganization object at 0x1065d1ef0>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 135, in create_doctor
    POST /api/v1/crm/doctors/
2026-02-20 09:07:38,636 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:07:38,649 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:07:38,650 INFO sqlalchemy.engine.Engine [cached since 1781s ago] (1,)
2026-02-20 09:07:38,766 INFO sqlalchemy.engine.Engine INSERT INTO doctor (full_name, contact1, contact2, email, birth_date, latitude, longitude, address, region_id, specialty_id, category_id, med_org_id, assigned_rep_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::DATE, $6::FLOAT, $7::FLOAT, $8::VARCHAR, $9::INTEGER, $10::INTEGER, $11::INTEGER, $12::INTEGER, $13::INTEGER) RETURNING doctor.id
2026-02-20 09:07:38,767 INFO sqlalchemy.engine.Engine [cached since 140.2s ago] ('Dr. Strange', '', '', '', None, 41.2994391291652, 69.24004554748537, '', 1, 1, 1, 3, None)
2026-02-20 09:07:39,070 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 09:07:39,073 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:07:39,074 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:07:39,074 INFO sqlalchemy.engine.Engine [cached since 140.4s ago] (3,)
2026-02-20 09:07:39,127 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:07:39,128 INFO sqlalchemy.engine.Engine [cached since 140.3s ago] (3,)
2026-02-20 09:07:39,134 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 09:07:39,134 INFO sqlalchemy.engine.Engine [cached since 140.3s ago] (1,)
2026-02-20 09:07:39,137 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 09:07:39,137 INFO sqlalchemy.engine.Engine [cached since 140.3s ago] (1,)
2026-02-20 09:07:39,145 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 09:07:39,145 INFO sqlalchemy.engine.Engine [cached since 140.3s ago] (1,)
2026-02-20 09:07:39,147 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER)
2026-02-20 09:07:39,147 INFO sqlalchemy.engine.Engine [cached since 140.3s ago] (3,)
2026-02-20 09:07:39,170 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-20 09:07:39,171 INFO sqlalchemy.engine.Engine [cached since 140.3s ago] (7,)
2026-02-20 09:07:39,172 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user", medrep_organization 
WHERE $1::INTEGER = medrep_organization.organization_id AND "user".id = medrep_organization.user_id
2026-02-20 09:07:39,172 INFO sqlalchemy.engine.Engine [cached since 140.2s ago] (3,)
2026-02-20 09:07:39,173 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63760 - "POST /api/v1/crm/doctors/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 452, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 278, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'med_org', 'region'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.models.crm.MedicalOrganization object at 0x106236350>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'med_org', 'assigned_reps'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.models.crm.MedicalOrganization object at 0x106236350>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 135, in create_doctor
    POST /api/v1/crm/doctors/
2026-02-20 09:09:41,895 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:09:41,909 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:09:41,912 INFO sqlalchemy.engine.Engine [cached since 1904s ago] (1,)
2026-02-20 09:09:42,014 INFO sqlalchemy.engine.Engine INSERT INTO doctor (full_name, contact1, contact2, email, birth_date, latitude, longitude, address, region_id, specialty_id, category_id, med_org_id, assigned_rep_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::DATE, $6::FLOAT, $7::FLOAT, $8::VARCHAR, $9::INTEGER, $10::INTEGER, $11::INTEGER, $12::INTEGER, $13::INTEGER) RETURNING doctor.id
2026-02-20 09:09:42,015 INFO sqlalchemy.engine.Engine [cached since 263.4s ago] ('Dr. Strange', '', '', '', None, 41.2994391291652, 69.24004554748537, 'Bukhara Center', 1, 1, 1, 3, None)
2026-02-20 09:09:42,087 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 09:09:42,111 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:09:42,112 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:09:42,113 INFO sqlalchemy.engine.Engine [cached since 263.4s ago] (4,)
2026-02-20 09:09:42,150 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:09:42,150 INFO sqlalchemy.engine.Engine [cached since 263.3s ago] (4,)
2026-02-20 09:09:42,180 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 09:09:42,181 INFO sqlalchemy.engine.Engine [cached since 263.4s ago] (1,)
2026-02-20 09:09:42,190 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 09:09:42,191 INFO sqlalchemy.engine.Engine [cached since 263.4s ago] (1,)
2026-02-20 09:09:42,206 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 09:09:42,206 INFO sqlalchemy.engine.Engine [cached since 263.4s ago] (1,)
2026-02-20 09:09:42,216 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER)
2026-02-20 09:09:42,217 INFO sqlalchemy.engine.Engine [cached since 263.4s ago] (3,)
2026-02-20 09:09:42,243 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-20 09:09:42,245 INFO sqlalchemy.engine.Engine [cached since 263.4s ago] (7,)
2026-02-20 09:09:42,251 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user", medrep_organization 
WHERE $1::INTEGER = medrep_organization.organization_id AND "user".id = medrep_organization.user_id
2026-02-20 09:09:42,251 INFO sqlalchemy.engine.Engine [cached since 263.3s ago] (3,)
2026-02-20 09:09:42,254 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64262 - "POST /api/v1/crm/doctors/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 452, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 278, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'med_org', 'region'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.models.crm.MedicalOrganization object at 0x106614910>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'med_org', 'assigned_reps'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.models.crm.MedicalOrganization object at 0x106614910>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 135, in create_doctor
    POST /api/v1/crm/doctors/
2026-02-20 09:10:03,275 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:10:03,277 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:10:03,278 INFO sqlalchemy.engine.Engine [cached since 1925s ago] (1,)
2026-02-20 09:10:03,293 INFO sqlalchemy.engine.Engine INSERT INTO doctor (full_name, contact1, contact2, email, birth_date, latitude, longitude, address, region_id, specialty_id, category_id, med_org_id, assigned_rep_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::DATE, $6::FLOAT, $7::FLOAT, $8::VARCHAR, $9::INTEGER, $10::INTEGER, $11::INTEGER, $12::INTEGER, $13::INTEGER) RETURNING doctor.id
2026-02-20 09:10:03,294 INFO sqlalchemy.engine.Engine [cached since 284.7s ago] ('Dr. Strange', '', '', '', None, 41.2994391291652, 69.24004554748537, 'Bukhara Center', 1, 1, 1, 3, None)
2026-02-20 09:10:03,311 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 09:10:03,315 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:10:03,316 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:10:03,316 INFO sqlalchemy.engine.Engine [cached since 284.6s ago] (5,)
2026-02-20 09:10:03,330 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:10:03,331 INFO sqlalchemy.engine.Engine [cached since 284.5s ago] (5,)
2026-02-20 09:10:03,349 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 09:10:03,349 INFO sqlalchemy.engine.Engine [cached since 284.5s ago] (1,)
2026-02-20 09:10:03,357 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 09:10:03,358 INFO sqlalchemy.engine.Engine [cached since 284.5s ago] (1,)
2026-02-20 09:10:03,362 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 09:10:03,363 INFO sqlalchemy.engine.Engine [cached since 284.5s ago] (1,)
2026-02-20 09:10:03,370 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER)
2026-02-20 09:10:03,371 INFO sqlalchemy.engine.Engine [cached since 284.5s ago] (3,)
2026-02-20 09:10:03,385 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-20 09:10:03,385 INFO sqlalchemy.engine.Engine [cached since 284.5s ago] (7,)
2026-02-20 09:10:03,390 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user", medrep_organization 
WHERE $1::INTEGER = medrep_organization.organization_id AND "user".id = medrep_organization.user_id
2026-02-20 09:10:03,391 INFO sqlalchemy.engine.Engine [cached since 284.5s ago] (3,)
2026-02-20 09:10:03,392 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64350 - "POST /api/v1/crm/doctors/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 452, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/fastapi/routing.py", line 278, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'med_org', 'region'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.models.crm.MedicalOrganization object at 0x106615630>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}
  {'type': 'get_attribute_error', 'loc': ('response', 'med_org', 'assigned_reps'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': <app.models.crm.MedicalOrganization object at 0x106615630>, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}}

  File "/Users/macbook13/Documents/pharma_new/backend/app/api/v1/endpoints/crm.py", line 135, in create_doctor
    POST /api/v1/crm/doctors/
WARNING:  StatReload detected changes in 'app/crud/crud_crm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [18540]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [19462]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:49772 - "OPTIONS /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:49775 - "OPTIONS /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:49777 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:49778 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 09:17:14,328 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-20 09:17:14,330 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 09:17:14,454 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-20 09:17:14,454 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 09:17:14,472 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-20 09:17:14,472 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 09:17:14,476 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:17:14,811 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:17:14,812 INFO sqlalchemy.engine.Engine [generated in 0.00068s] (1,)
2026-02-20 09:17:14,813 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:17:14,814 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:17:14,814 INFO sqlalchemy.engine.Engine [cached since 0.003143s ago] (1,)
2026-02-20 09:17:14,814 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:17:14,815 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:17:14,815 INFO sqlalchemy.engine.Engine [cached since 0.004593s ago] (1,)
2026-02-20 09:17:14,816 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:17:14,816 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:17:14,816 INFO sqlalchemy.engine.Engine [cached since 0.005847s ago] (1,)
2026-02-20 09:17:14,915 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 09:17:14,916 INFO sqlalchemy.engine.Engine [generated in 0.00103s] (100, 0)
2026-02-20 09:17:14,921 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 09:17:14,922 INFO sqlalchemy.engine.Engine [generated in 0.00055s] (100, 0)
2026-02-20 09:17:14,927 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 09:17:14,927 INFO sqlalchemy.engine.Engine [generated in 0.00053s] (100, 0)
2026-02-20 09:17:14,933 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 09:17:14,933 INFO sqlalchemy.engine.Engine [generated in 0.00033s] (100, 0)
INFO:     127.0.0.1:49784 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-20 09:17:14,967 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 09:17:14,968 INFO sqlalchemy.engine.Engine [generated in 0.00126s] (1, 4, 7)
2026-02-20 09:17:14,969 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49777 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 09:17:14,978 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49772 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-20 09:17:14,990 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 09:17:15,012 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 09:17:15,012 INFO sqlalchemy.engine.Engine [generated in 0.00062s] (1, 2, 3)
INFO:     127.0.0.1:49775 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 09:17:15,061 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51267 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 09:23:21,599 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:23:21,625 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:23:21,628 INFO sqlalchemy.engine.Engine [cached since 366.8s ago] (1,)
2026-02-20 09:23:22,216 INFO sqlalchemy.engine.Engine INSERT INTO doctor (full_name, contact1, contact2, email, birth_date, latitude, longitude, address, region_id, specialty_id, category_id, med_org_id, assigned_rep_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::DATE, $6::FLOAT, $7::FLOAT, $8::VARCHAR, $9::INTEGER, $10::INTEGER, $11::INTEGER, $12::INTEGER, $13::INTEGER) RETURNING doctor.id
2026-02-20 09:23:22,216 INFO sqlalchemy.engine.Engine [generated in 0.00543s] ('Dr. Final Test', '', '', '', None, None, None, '', 1, 1, 1, 3, None)
2026-02-20 09:23:22,459 INFO sqlalchemy.engine.Engine COMMIT
2026-02-20 09:23:22,471 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:23:22,483 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:23:22,483 INFO sqlalchemy.engine.Engine [generated in 0.00179s] (6,)
2026-02-20 09:23:22,536 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.id = $1::INTEGER
2026-02-20 09:23:22,537 INFO sqlalchemy.engine.Engine [generated in 0.00083s] (6,)
2026-02-20 09:23:22,549 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 09:23:22,550 INFO sqlalchemy.engine.Engine [generated in 0.00148s] (1,)
2026-02-20 09:23:22,558 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 09:23:22,559 INFO sqlalchemy.engine.Engine [generated in 0.00047s] (1,)
2026-02-20 09:23:22,566 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 09:23:22,566 INFO sqlalchemy.engine.Engine [generated in 0.00050s] (1,)
2026-02-20 09:23:22,574 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER)
2026-02-20 09:23:22,575 INFO sqlalchemy.engine.Engine [generated in 0.00098s] (3,)
2026-02-20 09:23:22,588 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 09:23:22,588 INFO sqlalchemy.engine.Engine [generated in 0.00073s] (7,)
2026-02-20 09:23:22,600 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-20 09:23:22,600 INFO sqlalchemy.engine.Engine [generated in 0.00054s] (3,)
INFO:     127.0.0.1:51267 - "POST /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 09:23:22,635 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 09:26:56,735 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:26:56,756 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:26:56,757 INFO sqlalchemy.engine.Engine [cached since 582s ago] (1,)
2026-02-20 09:26:56,797 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:26:56,801 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:26:56,802 INFO sqlalchemy.engine.Engine [cached since 582s ago] (1,)
2026-02-20 09:26:56,835 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:26:56,837 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:26:56,838 INFO sqlalchemy.engine.Engine [cached since 582s ago] (1,)
2026-02-20 09:26:56,850 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 09:26:56,851 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 09:26:56,851 INFO sqlalchemy.engine.Engine [cached since 582s ago] (1,)
2026-02-20 09:26:57,242 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 09:26:57,243 INFO sqlalchemy.engine.Engine [cached since 582.3s ago] (100, 0)
2026-02-20 09:26:57,478 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 09:26:57,479 INFO sqlalchemy.engine.Engine [cached since 582.6s ago] (100, 0)
INFO:     127.0.0.1:52172 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 09:26:57,551 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 09:26:57,551 INFO sqlalchemy.engine.Engine [cached since 582.6s ago] (100, 0)
2026-02-20 09:26:57,554 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 09:26:57,554 INFO sqlalchemy.engine.Engine [cached since 582.6s ago] (100, 0)
2026-02-20 09:26:57,559 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 09:26:57,671 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 09:26:57,671 INFO sqlalchemy.engine.Engine [cached since 582.7s ago] (1, 4, 7)
INFO:     127.0.0.1:52169 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:52167 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-20 09:26:57,697 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 09:26:57,699 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 09:26:57,875 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 09:26:57,876 INFO sqlalchemy.engine.Engine [cached since 582.9s ago] (1, 2, 3)
INFO:     127.0.0.1:52170 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 09:26:58,109 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49490 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:49492 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 10:21:38,376 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 10:21:38,379 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 10:21:38,381 INFO sqlalchemy.engine.Engine [cached since 3863s ago] (1,)
INFO:     127.0.0.1:49492 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:49494 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 10:21:38,394 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 10:21:38,395 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 10:21:38,395 INFO sqlalchemy.engine.Engine [cached since 3863s ago] (1,)
2026-02-20 10:21:38,506 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 10:21:38,506 INFO sqlalchemy.engine.Engine [generated in 0.00153s] (100, 0)
2026-02-20 10:21:38,512 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 10:21:38,513 INFO sqlalchemy.engine.Engine [generated in 0.00036s] (100, 0)
INFO:     127.0.0.1:49492 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 10:21:38,532 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 10:21:38,534 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 10:21:38,534 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 10:21:38,535 INFO sqlalchemy.engine.Engine [cached since 3863s ago] (1,)
2026-02-20 10:21:38,544 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 10:21:38,544 INFO sqlalchemy.engine.Engine [generated in 0.00063s] (1,)
2026-02-20 10:21:38,549 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 10:21:38,549 INFO sqlalchemy.engine.Engine [cached since 0.03716s ago] (100, 0)
2026-02-20 10:21:38,554 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 10:21:38,554 INFO sqlalchemy.engine.Engine [generated in 0.00026s] (5, 4, 6)
INFO:     127.0.0.1:49492 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 10:21:38,557 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49490 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 10:21:38,580 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 10:21:38,582 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 10:21:38,582 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 10:21:38,582 INFO sqlalchemy.engine.Engine [cached since 3863s ago] (1,)
2026-02-20 10:21:38,588 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 10:21:38,588 INFO sqlalchemy.engine.Engine [cached since 0.0832s ago] (100, 0)
2026-02-20 10:21:38,592 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 10:21:38,592 INFO sqlalchemy.engine.Engine [cached since 0.0486s ago] (1,)
2026-02-20 10:21:38,594 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 10:21:38,594 INFO sqlalchemy.engine.Engine [cached since 0.041s ago] (5, 4, 6)
INFO:     127.0.0.1:49490 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 10:21:38,598 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56911 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56912 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 10:55:32,235 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 10:55:32,239 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 10:55:32,240 INFO sqlalchemy.engine.Engine [cached since 5548s ago] (1,)
2026-02-20 10:55:32,460 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 10:55:32,460 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (100, 0)
2026-02-20 10:55:32,489 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 10:55:32,489 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (1,)
2026-02-20 10:55:32,496 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 10:55:32,496 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (5, 4, 6)
INFO:     127.0.0.1:56911 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 10:55:32,519 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 10:55:32,521 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 10:55:32,521 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 10:55:32,521 INFO sqlalchemy.engine.Engine [cached since 5549s ago] (1,)
2026-02-20 10:55:32,532 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 10:55:32,532 INFO sqlalchemy.engine.Engine [cached since 1686s ago] (100, 0)
2026-02-20 10:55:32,553 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 10:55:32,553 INFO sqlalchemy.engine.Engine [cached since 1686s ago] (1,)
2026-02-20 10:55:32,556 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 10:55:32,557 INFO sqlalchemy.engine.Engine [cached since 1686s ago] (5, 4, 6)
INFO:     127.0.0.1:56911 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 10:55:32,573 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56911 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56912 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 10:55:32,737 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 10:55:32,738 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 10:55:32,738 INFO sqlalchemy.engine.Engine [cached since 5549s ago] (1,)
2026-02-20 10:55:32,743 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 10:55:32,743 INFO sqlalchemy.engine.Engine [cached since 1686s ago] (100, 0)
INFO:     127.0.0.1:56914 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 10:55:32,746 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 10:55:32,749 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 10:55:32,749 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 10:55:32,749 INFO sqlalchemy.engine.Engine [cached since 5549s ago] (1,)
2026-02-20 10:55:32,765 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 10:55:32,766 INFO sqlalchemy.engine.Engine [cached since 1686s ago] (100, 0)
INFO:     127.0.0.1:56914 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 10:55:32,773 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:61014 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:61016 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:20:01,732 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:20:01,735 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:20:01,736 INFO sqlalchemy.engine.Engine [cached since 6526s ago] (1,)
2026-02-20 11:20:01,751 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:20:01,751 INFO sqlalchemy.engine.Engine [cached since 2663s ago] (100, 0)
2026-02-20 11:20:01,755 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:20:01,756 INFO sqlalchemy.engine.Engine [cached since 2663s ago] (1,)
2026-02-20 11:20:01,759 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:20:01,759 INFO sqlalchemy.engine.Engine [cached since 2663s ago] (5, 4, 6)
INFO:     127.0.0.1:61014 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:20:01,864 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:20:01,866 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:20:01,867 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:20:01,868 INFO sqlalchemy.engine.Engine [cached since 6526s ago] (1,)
2026-02-20 11:20:01,877 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:20:01,877 INFO sqlalchemy.engine.Engine [cached since 2663s ago] (100, 0)
2026-02-20 11:20:01,885 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:20:01,885 INFO sqlalchemy.engine.Engine [cached since 2663s ago] (1,)
2026-02-20 11:20:01,887 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:20:01,887 INFO sqlalchemy.engine.Engine [cached since 2663s ago] (5, 4, 6)
INFO:     127.0.0.1:61016 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:20:01,924 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:61016 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:61014 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:20:02,100 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:20:02,101 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:20:02,101 INFO sqlalchemy.engine.Engine [cached since 6526s ago] (1,)
2026-02-20 11:20:02,107 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:20:02,107 INFO sqlalchemy.engine.Engine [cached since 2663s ago] (100, 0)
INFO:     127.0.0.1:61018 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:20:02,114 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:20:02,121 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:20:02,121 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:20:02,122 INFO sqlalchemy.engine.Engine [cached since 6526s ago] (1,)
2026-02-20 11:20:02,124 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:20:02,124 INFO sqlalchemy.engine.Engine [cached since 2663s ago] (100, 0)
INFO:     127.0.0.1:61018 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:20:02,126 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:24:05,011 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:24:05,012 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:24:05,012 INFO sqlalchemy.engine.Engine [cached since 6769s ago] (1,)
2026-02-20 11:24:05,018 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:24:05,018 INFO sqlalchemy.engine.Engine [cached since 2906s ago] (100, 0)
2026-02-20 11:24:05,022 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:24:05,022 INFO sqlalchemy.engine.Engine [cached since 2906s ago] (1,)
2026-02-20 11:24:05,024 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:24:05,024 INFO sqlalchemy.engine.Engine [cached since 2906s ago] (5, 4, 6)
INFO:     127.0.0.1:62058 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:24:05,027 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:24:05,030 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:24:05,030 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:24:05,030 INFO sqlalchemy.engine.Engine [cached since 6769s ago] (1,)
2026-02-20 11:24:05,037 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:24:05,037 INFO sqlalchemy.engine.Engine [cached since 2906s ago] (100, 0)
2026-02-20 11:24:05,040 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:24:05,040 INFO sqlalchemy.engine.Engine [cached since 2906s ago] (1,)
2026-02-20 11:24:05,143 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:24:05,144 INFO sqlalchemy.engine.Engine [cached since 2906s ago] (5, 4, 6)
INFO:     127.0.0.1:62058 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:24:05,163 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:24:05,435 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:24:05,435 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:24:05,435 INFO sqlalchemy.engine.Engine [cached since 6770s ago] (1,)
2026-02-20 11:24:05,437 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:24:05,438 INFO sqlalchemy.engine.Engine [cached since 2906s ago] (100, 0)
INFO:     127.0.0.1:62058 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:24:05,444 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:24:05,446 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:24:05,446 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:24:05,446 INFO sqlalchemy.engine.Engine [cached since 6770s ago] (1,)
2026-02-20 11:24:05,449 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:24:05,449 INFO sqlalchemy.engine.Engine [cached since 2906s ago] (100, 0)
INFO:     127.0.0.1:62058 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:24:05,453 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:33:11,402 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:33:11,409 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:33:11,409 INFO sqlalchemy.engine.Engine [cached since 6904s ago] (1,)
2026-02-20 11:33:11,424 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:33:11,424 INFO sqlalchemy.engine.Engine [cached since 3041s ago] (100, 0)
2026-02-20 11:33:11,429 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:33:11,429 INFO sqlalchemy.engine.Engine [cached since 3041s ago] (1,)
2026-02-20 11:33:11,471 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:33:11,471 INFO sqlalchemy.engine.Engine [cached since 3041s ago] (5, 4, 6)
INFO:     127.0.0.1:63420 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:33:11,483 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:33:11,485 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:33:11,488 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:33:11,488 INFO sqlalchemy.engine.Engine [cached since 6904s ago] (1,)
2026-02-20 11:33:11,529 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:33:11,530 INFO sqlalchemy.engine.Engine [cached since 3041s ago] (100, 0)
2026-02-20 11:33:11,550 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:33:11,550 INFO sqlalchemy.engine.Engine [cached since 3041s ago] (1,)
2026-02-20 11:33:11,572 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:33:11,572 INFO sqlalchemy.engine.Engine [cached since 3041s ago] (5, 4, 6)
INFO:     127.0.0.1:63420 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:33:11,580 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:33:11,786 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:33:11,786 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:33:11,786 INFO sqlalchemy.engine.Engine [cached since 6905s ago] (1,)
2026-02-20 11:33:11,791 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:33:11,792 INFO sqlalchemy.engine.Engine [cached since 3042s ago] (100, 0)
INFO:     127.0.0.1:63420 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:33:11,797 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:33:11,800 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:33:11,800 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:33:11,800 INFO sqlalchemy.engine.Engine [cached since 6905s ago] (1,)
2026-02-20 11:33:11,802 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:33:11,802 INFO sqlalchemy.engine.Engine [cached since 3042s ago] (100, 0)
INFO:     127.0.0.1:63420 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:33:11,805 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:41:53,144 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:41:53,148 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:41:53,149 INFO sqlalchemy.engine.Engine [cached since 7123s ago] (1,)
2026-02-20 11:41:53,164 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:41:53,164 INFO sqlalchemy.engine.Engine [cached since 3260s ago] (100, 0)
2026-02-20 11:41:53,170 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:41:53,170 INFO sqlalchemy.engine.Engine [cached since 3260s ago] (1,)
2026-02-20 11:41:53,177 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:41:53,177 INFO sqlalchemy.engine.Engine [cached since 3260s ago] (5, 4, 6)
INFO:     127.0.0.1:64385 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:41:53,183 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:41:53,186 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:41:53,186 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:41:53,186 INFO sqlalchemy.engine.Engine [cached since 7123s ago] (1,)
2026-02-20 11:41:53,191 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:41:53,191 INFO sqlalchemy.engine.Engine [cached since 3260s ago] (100, 0)
2026-02-20 11:41:53,195 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:41:53,195 INFO sqlalchemy.engine.Engine [cached since 3260s ago] (1,)
2026-02-20 11:41:53,197 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:41:53,197 INFO sqlalchemy.engine.Engine [cached since 3260s ago] (5, 4, 6)
INFO:     127.0.0.1:64385 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:41:53,204 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:41:53,393 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:41:53,394 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:41:53,394 INFO sqlalchemy.engine.Engine [cached since 7123s ago] (1,)
2026-02-20 11:41:53,400 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:41:53,400 INFO sqlalchemy.engine.Engine [cached since 3260s ago] (100, 0)
INFO:     127.0.0.1:64385 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:41:53,407 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:41:53,420 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:41:53,421 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:41:53,422 INFO sqlalchemy.engine.Engine [cached since 7123s ago] (1,)
2026-02-20 11:41:53,432 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:41:53,432 INFO sqlalchemy.engine.Engine [cached since 3260s ago] (100, 0)
INFO:     127.0.0.1:64385 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:41:53,439 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50540 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:52:47,688 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:52:47,692 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:52:47,693 INFO sqlalchemy.engine.Engine [cached since 7718s ago] (1,)
INFO:     127.0.0.1:50542 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:52:47,704 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:52:47,704 INFO sqlalchemy.engine.Engine [cached since 3855s ago] (100, 0)
2026-02-20 11:52:47,710 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:52:47,710 INFO sqlalchemy.engine.Engine [cached since 3855s ago] (1,)
2026-02-20 11:52:47,713 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:52:47,713 INFO sqlalchemy.engine.Engine [cached since 3855s ago] (5, 4, 6)
INFO:     127.0.0.1:50540 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:52:47,721 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:52:47,723 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:52:47,723 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:52:47,723 INFO sqlalchemy.engine.Engine [cached since 7718s ago] (1,)
2026-02-20 11:52:47,727 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:52:47,727 INFO sqlalchemy.engine.Engine [cached since 3855s ago] (100, 0)
2026-02-20 11:52:47,731 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:52:47,731 INFO sqlalchemy.engine.Engine [cached since 3855s ago] (1,)
2026-02-20 11:52:47,733 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:52:47,733 INFO sqlalchemy.engine.Engine [cached since 3855s ago] (5, 4, 6)
INFO:     127.0.0.1:50542 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:52:47,736 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50542 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:50540 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:52:47,886 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:52:47,887 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:52:47,887 INFO sqlalchemy.engine.Engine [cached since 7718s ago] (1,)
2026-02-20 11:52:47,891 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:52:47,891 INFO sqlalchemy.engine.Engine [cached since 3855s ago] (100, 0)
INFO:     127.0.0.1:50544 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:52:47,896 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:52:47,899 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:52:47,900 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:52:47,900 INFO sqlalchemy.engine.Engine [cached since 7718s ago] (1,)
2026-02-20 11:52:47,905 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:52:47,905 INFO sqlalchemy.engine.Engine [cached since 3855s ago] (100, 0)
INFO:     127.0.0.1:50544 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:52:47,915 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:55:55,119 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:55:55,120 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:55:55,120 INFO sqlalchemy.engine.Engine [cached since 7755s ago] (1,)
2026-02-20 11:55:55,123 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:55:55,124 INFO sqlalchemy.engine.Engine [cached since 3892s ago] (100, 0)
2026-02-20 11:55:55,126 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:55:55,126 INFO sqlalchemy.engine.Engine [cached since 3892s ago] (1,)
2026-02-20 11:55:55,128 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:55:55,128 INFO sqlalchemy.engine.Engine [cached since 3892s ago] (5, 4, 6)
INFO:     127.0.0.1:50743 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:55:55,129 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:55:55,133 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:55:55,133 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:55:55,133 INFO sqlalchemy.engine.Engine [cached since 7755s ago] (1,)
2026-02-20 11:55:55,136 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:55:55,136 INFO sqlalchemy.engine.Engine [cached since 3892s ago] (100, 0)
2026-02-20 11:55:55,138 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:55:55,138 INFO sqlalchemy.engine.Engine [cached since 3892s ago] (1,)
2026-02-20 11:55:55,140 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:55:55,140 INFO sqlalchemy.engine.Engine [cached since 3892s ago] (5, 4, 6)
INFO:     127.0.0.1:50743 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:55:55,142 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:55:55,403 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:55:55,404 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:55:55,404 INFO sqlalchemy.engine.Engine [cached since 7756s ago] (1,)
2026-02-20 11:55:55,406 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:55:55,406 INFO sqlalchemy.engine.Engine [cached since 3892s ago] (100, 0)
INFO:     127.0.0.1:50743 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:55:55,407 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:55:55,409 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:55:55,409 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:55:55,409 INFO sqlalchemy.engine.Engine [cached since 7756s ago] (1,)
2026-02-20 11:55:55,410 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:55:55,410 INFO sqlalchemy.engine.Engine [cached since 3892s ago] (100, 0)
INFO:     127.0.0.1:50743 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:55:55,412 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:57:54,670 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:57:54,677 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:57:54,678 INFO sqlalchemy.engine.Engine [cached since 7824s ago] (1,)
2026-02-20 11:57:54,721 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:57:54,721 INFO sqlalchemy.engine.Engine [cached since 3961s ago] (100, 0)
2026-02-20 11:57:54,732 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:57:54,732 INFO sqlalchemy.engine.Engine [cached since 3961s ago] (1,)
2026-02-20 11:57:54,737 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:57:54,737 INFO sqlalchemy.engine.Engine [cached since 3961s ago] (5, 4, 6)
INFO:     127.0.0.1:51059 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:57:54,743 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:57:54,747 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:57:54,747 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:57:54,747 INFO sqlalchemy.engine.Engine [cached since 7824s ago] (1,)
2026-02-20 11:57:54,752 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:57:54,752 INFO sqlalchemy.engine.Engine [cached since 3961s ago] (100, 0)
2026-02-20 11:57:54,755 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 11:57:54,755 INFO sqlalchemy.engine.Engine [cached since 3961s ago] (1,)
2026-02-20 11:57:54,757 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 11:57:54,757 INFO sqlalchemy.engine.Engine [cached since 3961s ago] (5, 4, 6)
INFO:     127.0.0.1:51059 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 11:57:54,760 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:57:54,920 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:57:54,920 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:57:54,920 INFO sqlalchemy.engine.Engine [cached since 7824s ago] (1,)
2026-02-20 11:57:54,921 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:57:54,921 INFO sqlalchemy.engine.Engine [cached since 3961s ago] (100, 0)
INFO:     127.0.0.1:51059 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:57:54,923 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 11:57:54,925 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 11:57:54,925 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 11:57:54,925 INFO sqlalchemy.engine.Engine [cached since 7824s ago] (1,)
2026-02-20 11:57:54,927 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 11:57:54,927 INFO sqlalchemy.engine.Engine [cached since 3961s ago] (100, 0)
INFO:     127.0.0.1:51059 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 11:57:54,928 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 12:00:45,243 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 12:00:45,247 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 12:00:45,248 INFO sqlalchemy.engine.Engine [cached since 7995s ago] (1,)
2026-02-20 12:00:45,389 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 12:00:45,389 INFO sqlalchemy.engine.Engine [cached since 4132s ago] (100, 0)
2026-02-20 12:00:45,403 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 12:00:45,403 INFO sqlalchemy.engine.Engine [cached since 4132s ago] (1,)
2026-02-20 12:00:45,443 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 12:00:45,443 INFO sqlalchemy.engine.Engine [cached since 4132s ago] (5, 4, 6)
INFO:     127.0.0.1:52024 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 12:00:45,457 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 12:00:45,460 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 12:00:45,461 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 12:00:45,461 INFO sqlalchemy.engine.Engine [cached since 7995s ago] (1,)
2026-02-20 12:00:45,472 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 12:00:45,472 INFO sqlalchemy.engine.Engine [cached since 4132s ago] (100, 0)
2026-02-20 12:00:45,474 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 12:00:45,474 INFO sqlalchemy.engine.Engine [cached since 4132s ago] (1,)
2026-02-20 12:00:45,494 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 12:00:45,494 INFO sqlalchemy.engine.Engine [cached since 4132s ago] (5, 4, 6)
INFO:     127.0.0.1:52024 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 12:00:45,497 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 12:00:45,984 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 12:00:45,985 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 12:00:45,985 INFO sqlalchemy.engine.Engine [cached since 7995s ago] (1,)
2026-02-20 12:00:45,988 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 12:00:45,988 INFO sqlalchemy.engine.Engine [cached since 4132s ago] (100, 0)
INFO:     127.0.0.1:52024 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 12:00:45,991 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 12:00:45,993 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 12:00:45,993 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 12:00:45,993 INFO sqlalchemy.engine.Engine [cached since 7995s ago] (1,)
2026-02-20 12:00:45,995 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 12:00:45,996 INFO sqlalchemy.engine.Engine [cached since 4132s ago] (100, 0)
INFO:     127.0.0.1:52024 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 12:00:45,997 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49179 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:49181 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:03:27,550 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:03:27,555 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:03:27,555 INFO sqlalchemy.engine.Engine [cached since 9023s ago] (1,)
2026-02-20 14:03:27,680 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:03:27,680 INFO sqlalchemy.engine.Engine [cached since 5160s ago] (100, 0)
2026-02-20 14:03:27,695 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:03:27,699 INFO sqlalchemy.engine.Engine [cached since 5160s ago] (1,)
2026-02-20 14:03:27,704 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:03:27,705 INFO sqlalchemy.engine.Engine [cached since 5160s ago] (5, 4, 6)
INFO:     127.0.0.1:49179 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:03:27,711 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:03:27,717 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:03:27,717 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:03:27,717 INFO sqlalchemy.engine.Engine [cached since 9023s ago] (1,)
2026-02-20 14:03:27,721 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:03:27,721 INFO sqlalchemy.engine.Engine [cached since 5160s ago] (100, 0)
2026-02-20 14:03:27,724 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:03:27,724 INFO sqlalchemy.engine.Engine [cached since 5160s ago] (1,)
2026-02-20 14:03:27,726 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:03:27,726 INFO sqlalchemy.engine.Engine [cached since 5160s ago] (5, 4, 6)
INFO:     127.0.0.1:49179 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:03:27,729 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49179 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:49181 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:03:27,861 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:03:27,862 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:03:27,862 INFO sqlalchemy.engine.Engine [cached since 9023s ago] (1,)
2026-02-20 14:03:27,870 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:03:27,870 INFO sqlalchemy.engine.Engine [cached since 5160s ago] (100, 0)
INFO:     127.0.0.1:49183 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:03:27,873 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:03:27,881 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:03:27,881 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:03:27,882 INFO sqlalchemy.engine.Engine [cached since 9023s ago] (1,)
2026-02-20 14:03:27,902 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:03:27,903 INFO sqlalchemy.engine.Engine [cached since 5160s ago] (100, 0)
INFO:     127.0.0.1:49183 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:03:27,905 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:05:23,627 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:05:23,627 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:05:23,627 INFO sqlalchemy.engine.Engine [cached since 9074s ago] (1,)
2026-02-20 14:05:23,630 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:05:23,630 INFO sqlalchemy.engine.Engine [cached since 5210s ago] (100, 0)
2026-02-20 14:05:23,632 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:05:23,632 INFO sqlalchemy.engine.Engine [cached since 5210s ago] (1,)
2026-02-20 14:05:23,633 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:05:23,633 INFO sqlalchemy.engine.Engine [cached since 5210s ago] (5, 4, 6)
INFO:     127.0.0.1:49832 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:05:23,636 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:05:23,638 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:05:23,639 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:05:23,639 INFO sqlalchemy.engine.Engine [cached since 9074s ago] (1,)
2026-02-20 14:05:23,640 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:05:23,640 INFO sqlalchemy.engine.Engine [cached since 5210s ago] (100, 0)
2026-02-20 14:05:23,642 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:05:23,642 INFO sqlalchemy.engine.Engine [cached since 5210s ago] (1,)
2026-02-20 14:05:23,644 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:05:23,644 INFO sqlalchemy.engine.Engine [cached since 5210s ago] (5, 4, 6)
INFO:     127.0.0.1:49832 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:05:23,646 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:05:23,949 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:05:23,950 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:05:23,950 INFO sqlalchemy.engine.Engine [cached since 9074s ago] (1,)
2026-02-20 14:05:23,952 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:05:23,952 INFO sqlalchemy.engine.Engine [cached since 5211s ago] (100, 0)
INFO:     127.0.0.1:49832 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:05:23,955 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:05:23,957 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:05:23,958 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:05:23,958 INFO sqlalchemy.engine.Engine [cached since 9074s ago] (1,)
2026-02-20 14:05:23,959 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:05:23,959 INFO sqlalchemy.engine.Engine [cached since 5211s ago] (100, 0)
INFO:     127.0.0.1:49832 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:05:23,961 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:44:53,457 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:44:53,470 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:44:53,471 INFO sqlalchemy.engine.Engine [cached since 9312s ago] (1,)
2026-02-20 14:44:53,603 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:44:53,604 INFO sqlalchemy.engine.Engine [cached since 5449s ago] (100, 0)
2026-02-20 14:44:53,609 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:44:53,609 INFO sqlalchemy.engine.Engine [cached since 5449s ago] (1,)
2026-02-20 14:44:53,617 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:44:53,618 INFO sqlalchemy.engine.Engine [cached since 5449s ago] (5, 4, 6)
INFO:     127.0.0.1:52826 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:44:53,669 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:44:53,671 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:44:53,671 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:44:53,671 INFO sqlalchemy.engine.Engine [cached since 9312s ago] (1,)
2026-02-20 14:44:53,677 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:44:53,677 INFO sqlalchemy.engine.Engine [cached since 5449s ago] (100, 0)
2026-02-20 14:44:53,680 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:44:53,680 INFO sqlalchemy.engine.Engine [cached since 5449s ago] (1,)
2026-02-20 14:44:53,682 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:44:53,682 INFO sqlalchemy.engine.Engine [cached since 5449s ago] (5, 4, 6)
INFO:     127.0.0.1:52826 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:44:53,685 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:44:54,069 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:44:54,070 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:44:54,070 INFO sqlalchemy.engine.Engine [cached since 9313s ago] (1,)
2026-02-20 14:44:54,073 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:44:54,073 INFO sqlalchemy.engine.Engine [cached since 5450s ago] (100, 0)
INFO:     127.0.0.1:52826 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:44:54,075 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:44:54,077 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:44:54,077 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:44:54,077 INFO sqlalchemy.engine.Engine [cached since 9313s ago] (1,)
2026-02-20 14:44:54,083 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:44:54,084 INFO sqlalchemy.engine.Engine [cached since 5450s ago] (100, 0)
INFO:     127.0.0.1:52826 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:44:54,087 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:44:58,759 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:44:58,760 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:44:58,760 INFO sqlalchemy.engine.Engine [cached since 9317s ago] (1,)
2026-02-20 14:44:58,769 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:44:58,769 INFO sqlalchemy.engine.Engine [cached since 5454s ago] (100, 0)
2026-02-20 14:44:58,772 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:44:58,772 INFO sqlalchemy.engine.Engine [cached since 5454s ago] (1,)
2026-02-20 14:44:58,774 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:44:58,774 INFO sqlalchemy.engine.Engine [cached since 5454s ago] (5, 4, 6)
INFO:     127.0.0.1:52921 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:44:58,778 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:44:58,784 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:44:58,785 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:44:58,785 INFO sqlalchemy.engine.Engine [cached since 9317s ago] (1,)
2026-02-20 14:44:58,789 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:44:58,790 INFO sqlalchemy.engine.Engine [cached since 5454s ago] (100, 0)
2026-02-20 14:44:58,791 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:44:58,792 INFO sqlalchemy.engine.Engine [cached since 5454s ago] (1,)
2026-02-20 14:44:58,794 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:44:58,795 INFO sqlalchemy.engine.Engine [cached since 5454s ago] (5, 4, 6)
INFO:     127.0.0.1:52921 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:44:58,802 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:44:59,892 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:44:59,893 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:44:59,893 INFO sqlalchemy.engine.Engine [cached since 9319s ago] (1,)
2026-02-20 14:44:59,988 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:44:59,988 INFO sqlalchemy.engine.Engine [cached since 5455s ago] (100, 0)
INFO:     127.0.0.1:52921 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:44:59,989 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:44:59,991 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:44:59,992 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:44:59,992 INFO sqlalchemy.engine.Engine [cached since 9319s ago] (1,)
2026-02-20 14:45:00,007 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:45:00,007 INFO sqlalchemy.engine.Engine [cached since 5455s ago] (100, 0)
INFO:     127.0.0.1:52921 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:45:00,008 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:45:03,603 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:45:03,603 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:45:03,604 INFO sqlalchemy.engine.Engine [cached since 9322s ago] (1,)
2026-02-20 14:45:03,607 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:45:03,607 INFO sqlalchemy.engine.Engine [cached since 5459s ago] (100, 0)
2026-02-20 14:45:03,609 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:45:03,610 INFO sqlalchemy.engine.Engine [cached since 5459s ago] (1,)
2026-02-20 14:45:03,612 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:45:03,612 INFO sqlalchemy.engine.Engine [cached since 5459s ago] (5, 4, 6)
INFO:     127.0.0.1:53029 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:45:03,617 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:45:03,621 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:45:03,621 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:45:03,621 INFO sqlalchemy.engine.Engine [cached since 9322s ago] (1,)
2026-02-20 14:45:03,623 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:45:03,623 INFO sqlalchemy.engine.Engine [cached since 5459s ago] (100, 0)
2026-02-20 14:45:03,627 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:45:03,627 INFO sqlalchemy.engine.Engine [cached since 5459s ago] (1,)
2026-02-20 14:45:03,655 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:45:03,655 INFO sqlalchemy.engine.Engine [cached since 5459s ago] (5, 4, 6)
INFO:     127.0.0.1:53029 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:45:03,659 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:45:04,008 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:45:04,008 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:45:04,008 INFO sqlalchemy.engine.Engine [cached since 9323s ago] (1,)
2026-02-20 14:45:04,042 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:45:04,042 INFO sqlalchemy.engine.Engine [cached since 5459s ago] (100, 0)
INFO:     127.0.0.1:53029 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:45:04,048 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:45:04,051 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:45:04,052 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:45:04,052 INFO sqlalchemy.engine.Engine [cached since 9323s ago] (1,)
2026-02-20 14:45:04,054 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:45:04,054 INFO sqlalchemy.engine.Engine [cached since 5459s ago] (100, 0)
INFO:     127.0.0.1:53029 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:45:04,057 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:47:47,252 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:47:47,253 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:47:47,254 INFO sqlalchemy.engine.Engine [cached since 9486s ago] (1,)
2026-02-20 14:47:47,259 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:47:47,259 INFO sqlalchemy.engine.Engine [cached since 5623s ago] (100, 0)
2026-02-20 14:47:47,261 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:47:47,261 INFO sqlalchemy.engine.Engine [cached since 5623s ago] (1,)
2026-02-20 14:47:47,265 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:47:47,265 INFO sqlalchemy.engine.Engine [cached since 5623s ago] (5, 4, 6)
INFO:     127.0.0.1:54264 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:47:47,270 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:47:47,273 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:47:47,273 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:47:47,273 INFO sqlalchemy.engine.Engine [cached since 9486s ago] (1,)
2026-02-20 14:47:47,276 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:47:47,276 INFO sqlalchemy.engine.Engine [cached since 5623s ago] (100, 0)
2026-02-20 14:47:47,279 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 14:47:47,279 INFO sqlalchemy.engine.Engine [cached since 5623s ago] (1,)
2026-02-20 14:47:47,280 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 14:47:47,281 INFO sqlalchemy.engine.Engine [cached since 5623s ago] (5, 4, 6)
INFO:     127.0.0.1:54264 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 14:47:47,284 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:47:47,639 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:47:47,639 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:47:47,639 INFO sqlalchemy.engine.Engine [cached since 9486s ago] (1,)
2026-02-20 14:47:47,642 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:47:47,642 INFO sqlalchemy.engine.Engine [cached since 5623s ago] (100, 0)
INFO:     127.0.0.1:54264 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:47:47,644 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 14:47:47,646 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 14:47:47,646 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 14:47:47,646 INFO sqlalchemy.engine.Engine [cached since 9486s ago] (1,)
2026-02-20 14:47:47,648 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 14:47:47,648 INFO sqlalchemy.engine.Engine [cached since 5623s ago] (100, 0)
INFO:     127.0.0.1:54264 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 14:47:47,649 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55777 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55779 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:00:23,145 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:00:23,149 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:00:23,150 INFO sqlalchemy.engine.Engine [cached since 9848s ago] (1,)
2026-02-20 15:00:23,165 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:00:23,165 INFO sqlalchemy.engine.Engine [cached since 5984s ago] (100, 0)
2026-02-20 15:00:23,174 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 15:00:23,174 INFO sqlalchemy.engine.Engine [cached since 5984s ago] (1,)
2026-02-20 15:00:23,178 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:00:23,178 INFO sqlalchemy.engine.Engine [cached since 5984s ago] (5, 4, 6)
INFO:     127.0.0.1:55777 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:00:23,185 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:00:23,187 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:00:23,187 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:00:23,187 INFO sqlalchemy.engine.Engine [cached since 9848s ago] (1,)
2026-02-20 15:00:23,282 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:00:23,282 INFO sqlalchemy.engine.Engine [cached since 5985s ago] (100, 0)
2026-02-20 15:00:23,284 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 15:00:23,285 INFO sqlalchemy.engine.Engine [cached since 5985s ago] (1,)
2026-02-20 15:00:23,290 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:00:23,291 INFO sqlalchemy.engine.Engine [cached since 5985s ago] (5, 4, 6)
INFO:     127.0.0.1:55777 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:00:23,294 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55777 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 15:00:23,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:00:23,537 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:00:23,538 INFO sqlalchemy.engine.Engine [cached since 9848s ago] (1,)
2026-02-20 15:00:23,540 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:00:23,540 INFO sqlalchemy.engine.Engine [cached since 5985s ago] (100, 0)
INFO:     127.0.0.1:55779 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 15:00:23,542 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:00:23,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:00:23,545 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:00:23,545 INFO sqlalchemy.engine.Engine [cached since 9848s ago] (1,)
2026-02-20 15:00:23,548 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:00:23,549 INFO sqlalchemy.engine.Engine [cached since 5985s ago] (100, 0)
INFO:     127.0.0.1:55779 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 15:00:23,550 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:05:12,595 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:05:12,597 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:05:12,597 INFO sqlalchemy.engine.Engine [cached since 9885s ago] (1,)
2026-02-20 15:05:12,600 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:05:12,600 INFO sqlalchemy.engine.Engine [cached since 6022s ago] (100, 0)
2026-02-20 15:05:12,601 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 15:05:12,601 INFO sqlalchemy.engine.Engine [cached since 6022s ago] (1,)
2026-02-20 15:05:12,606 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:05:12,606 INFO sqlalchemy.engine.Engine [cached since 6022s ago] (5, 4, 6)
INFO:     127.0.0.1:55961 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:05:12,608 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:05:12,610 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:05:12,610 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:05:12,610 INFO sqlalchemy.engine.Engine [cached since 9885s ago] (1,)
2026-02-20 15:05:12,613 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:05:12,613 INFO sqlalchemy.engine.Engine [cached since 6022s ago] (100, 0)
2026-02-20 15:05:12,614 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 15:05:12,614 INFO sqlalchemy.engine.Engine [cached since 6022s ago] (1,)
2026-02-20 15:05:12,615 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:05:12,615 INFO sqlalchemy.engine.Engine [cached since 6022s ago] (5, 4, 6)
INFO:     127.0.0.1:55961 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:05:12,617 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:05:13,109 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:05:13,109 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:05:13,109 INFO sqlalchemy.engine.Engine [cached since 9885s ago] (1,)
2026-02-20 15:05:13,181 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:05:13,181 INFO sqlalchemy.engine.Engine [cached since 6022s ago] (100, 0)
INFO:     127.0.0.1:55961 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 15:05:13,185 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:05:13,187 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:05:13,187 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:05:13,187 INFO sqlalchemy.engine.Engine [cached since 9885s ago] (1,)
2026-02-20 15:05:13,190 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:05:13,190 INFO sqlalchemy.engine.Engine [cached since 6022s ago] (100, 0)
INFO:     127.0.0.1:55961 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 15:05:13,192 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:61237 - "OPTIONS /api/v1/domain/orders/reservations/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:61237 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:61237 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:61237 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:61237 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:61239 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:61239 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:61239 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:61239 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:62088 - "GET /api/v1/domain/orders/reservations/ HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:62088 - "OPTIONS /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 15:40:45,506 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:40:45,516 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:40:45,518 INFO sqlalchemy.engine.Engine [cached since 1.133e+04s ago] (1,)
2026-02-20 15:40:45,694 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:40:45,694 INFO sqlalchemy.engine.Engine [generated in 0.00204s] (100, 0)
INFO:     127.0.0.1:62088 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 15:40:45,990 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62098 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 15:41:45,000 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:41:45,006 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:41:45,007 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] (1,)
INFO:     127.0.0.1:62347 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:62348 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:41:45,028 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:41:45,028 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:41:45,029 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] (1,)
2026-02-20 15:41:45,052 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:41:45,053 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:41:45,053 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] (1,)
2026-02-20 15:41:45,120 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:41:45,120 INFO sqlalchemy.engine.Engine [generated in 0.00047s] (100, 0)
2026-02-20 15:41:45,132 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:41:45,132 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] (100, 0)
2026-02-20 15:41:45,140 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:41:45,140 INFO sqlalchemy.engine.Engine [cached since 7527s ago] (100, 0)
2026-02-20 15:41:45,165 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:41:45,165 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] (1, 4, 7)
2026-02-20 15:41:45,178 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 15:41:45,179 INFO sqlalchemy.engine.Engine [cached since 7527s ago] (1,)
2026-02-20 15:41:45,187 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 15:41:45,187 INFO sqlalchemy.engine.Engine [cached since 1.102e+04s ago] (1,)
2026-02-20 15:41:45,214 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 15:41:45,214 INFO sqlalchemy.engine.Engine [cached since 1.102e+04s ago] (1,)
2026-02-20 15:41:45,218 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:41:45,219 INFO sqlalchemy.engine.Engine [cached since 7527s ago] (5, 4, 6)
2026-02-20 15:41:45,222 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:41:45,222 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] (1, 2, 3)
2026-02-20 15:41:45,230 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 15:41:45,231 INFO sqlalchemy.engine.Engine [cached since 1.102e+04s ago] (1,)
INFO:     127.0.0.1:62347 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:41:45,249 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62350 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 15:41:45,263 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:41:45,265 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:41:45,266 INFO sqlalchemy.engine.Engine [cached since 1.102e+04s ago] (1, 3)
2026-02-20 15:41:45,276 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 15:41:45,276 INFO sqlalchemy.engine.Engine [generated in 0.00039s] (1,)
2026-02-20 15:41:45,288 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:41:45,288 INFO sqlalchemy.engine.Engine [cached since 1.102e+04s ago] (1, 7)
2026-02-20 15:41:45,295 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:41:45,296 INFO sqlalchemy.engine.Engine [cached since 1.102e+04s ago] (1, 3)
INFO:     127.0.0.1:62098 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 15:41:45,310 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62404 - "OPTIONS /api/v1/domain/orders/reservations/ HTTP/1.1" 200 OK
2026-02-20 15:41:57,567 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:41:57,568 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:41:57,568 INFO sqlalchemy.engine.Engine [cached since 1.14e+04s ago] (1,)
2026-02-20 15:41:57,599 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62404 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 422 Unprocessable Content
2026-02-20 15:42:03,469 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:42:03,470 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:42:03,470 INFO sqlalchemy.engine.Engine [cached since 1.141e+04s ago] (1,)
2026-02-20 15:42:03,479 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62406 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 422 Unprocessable Content
2026-02-20 15:42:17,036 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:42:17,037 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:42:17,037 INFO sqlalchemy.engine.Engine [cached since 1.142e+04s ago] (1,)
2026-02-20 15:42:17,041 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62497 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 422 Unprocessable Content
WARNING:  StatReload detected changes in 'app/schemas/sales.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [19462]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [22597]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-02-20 15:46:16,085 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-20 15:46:16,087 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 15:46:16,116 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-20 15:46:16,116 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 15:46:16,129 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-20 15:46:16,130 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-20 15:46:16,134 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:46:16,502 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:46:16,502 INFO sqlalchemy.engine.Engine [generated in 0.00074s] (1,)
2026-02-20 15:46:16,535 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63547 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:63614 - "OPTIONS /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 15:46:31,302 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:46:31,306 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-20 15:46:31,306 INFO sqlalchemy.engine.Engine [generated in 0.00064s] ('admin',)
INFO:     127.0.0.1:63614 - "POST /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 15:46:32,121 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63614 - "OPTIONS /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 15:46:32,178 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:46:32,179 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:46:32,179 INFO sqlalchemy.engine.Engine [cached since 15.68s ago] (1,)
INFO:     127.0.0.1:63616 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 15:46:32,191 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63616 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 15:46:32,635 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:46:32,636 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:46:32,636 INFO sqlalchemy.engine.Engine [cached since 16.13s ago] (1,)
2026-02-20 15:46:32,682 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 15:46:32,682 INFO sqlalchemy.engine.Engine [generated in 0.00216s] (2, 2026)
INFO:     127.0.0.1:63614 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 15:46:32,718 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:46:48,073 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:46:48,075 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:46:48,076 INFO sqlalchemy.engine.Engine [cached since 31.57s ago] (1,)
2026-02-20 15:46:48,107 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:46:48,108 INFO sqlalchemy.engine.Engine [generated in 0.00055s] (100, 0)
INFO:     127.0.0.1:63689 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 15:46:48,132 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:47:13,580 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:47:13,581 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:47:13,581 INFO sqlalchemy.engine.Engine [cached since 57.08s ago] (1,)
2026-02-20 15:47:13,605 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:47:13,607 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:47:13,607 INFO sqlalchemy.engine.Engine [cached since 57.11s ago] (1,)
2026-02-20 15:47:13,722 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:47:13,722 INFO sqlalchemy.engine.Engine [generated in 0.00052s] (100, 0)
2026-02-20 15:47:13,733 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:47:13,733 INFO sqlalchemy.engine.Engine [generated in 0.00056s] (100, 0)
2026-02-20 15:47:13,749 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 15:47:13,749 INFO sqlalchemy.engine.Engine [generated in 0.00101s] (1,)
2026-02-20 15:47:13,762 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:47:13,762 INFO sqlalchemy.engine.Engine [generated in 0.00079s] (1, 4, 7)
2026-02-20 15:47:13,764 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:47:13,765 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:47:13,765 INFO sqlalchemy.engine.Engine [cached since 57.26s ago] (1,)
2026-02-20 15:47:13,774 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 15:47:13,774 INFO sqlalchemy.engine.Engine [generated in 0.00048s] (1,)
2026-02-20 15:47:13,791 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:47:13,791 INFO sqlalchemy.engine.Engine [generated in 0.00051s] (1, 2, 3)
2026-02-20 15:47:13,805 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:47:13,805 INFO sqlalchemy.engine.Engine [generated in 0.00054s] (100, 0)
2026-02-20 15:47:13,813 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 15:47:13,813 INFO sqlalchemy.engine.Engine [generated in 0.00067s] (1,)
INFO:     127.0.0.1:63815 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 15:47:13,821 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:47:13,830 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 15:47:13,830 INFO sqlalchemy.engine.Engine [generated in 0.00063s] (1,)
2026-02-20 15:47:13,846 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:47:13,847 INFO sqlalchemy.engine.Engine [generated in 0.00080s] (1, 3)
2026-02-20 15:47:13,862 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:47:13,862 INFO sqlalchemy.engine.Engine [generated in 0.00075s] (5, 4, 6)
2026-02-20 15:47:13,884 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 15:47:13,885 INFO sqlalchemy.engine.Engine [generated in 0.00046s] (1,)
INFO:     127.0.0.1:63817 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:47:13,890 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:47:13,910 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:47:13,911 INFO sqlalchemy.engine.Engine [generated in 0.00070s] (1, 7)
2026-02-20 15:47:13,925 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:47:13,925 INFO sqlalchemy.engine.Engine [generated in 0.00050s] (1, 3)
INFO:     127.0.0.1:63813 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 15:47:13,936 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:48:39,134 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:48:39,142 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:48:39,143 INFO sqlalchemy.engine.Engine [cached since 142.6s ago] (1,)
2026-02-20 15:48:39,175 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64173 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 403 Forbidden
2026-02-20 15:54:42,010 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:54:42,019 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-20 15:54:42,020 INFO sqlalchemy.engine.Engine [cached since 490.7s ago] ('admin',)
INFO:     127.0.0.1:49680 - "POST /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 15:54:42,705 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:54:42,727 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:54:42,730 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:54:42,730 INFO sqlalchemy.engine.Engine [cached since 506.3s ago] (1,)
INFO:     127.0.0.1:49680 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 15:54:42,741 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:54:43,064 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:54:43,066 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:54:43,066 INFO sqlalchemy.engine.Engine [cached since 506.6s ago] (1,)
2026-02-20 15:54:43,081 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 15:54:43,082 INFO sqlalchemy.engine.Engine [cached since 490.4s ago] (2, 2026)
INFO:     127.0.0.1:49680 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 15:54:43,092 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49711 - "OPTIONS /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 15:54:49,309 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:54:49,311 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:54:49,312 INFO sqlalchemy.engine.Engine [cached since 512.8s ago] (1,)
2026-02-20 15:54:49,338 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:54:49,338 INFO sqlalchemy.engine.Engine [cached since 481.3s ago] (100, 0)
INFO:     127.0.0.1:49711 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 15:54:49,347 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49711 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:49713 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 15:54:50,578 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:54:50,578 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:54:50,578 INFO sqlalchemy.engine.Engine [cached since 514.1s ago] (1,)
INFO:     127.0.0.1:49723 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:54:50,601 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:54:50,601 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:54:50,602 INFO sqlalchemy.engine.Engine [cached since 514.1s ago] (1,)
2026-02-20 15:54:50,623 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:54:50,623 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:54:50,624 INFO sqlalchemy.engine.Engine [cached since 514.2s ago] (1,)
2026-02-20 15:54:50,635 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:54:50,635 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (100, 0)
2026-02-20 15:54:50,639 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:54:50,640 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (100, 0)
2026-02-20 15:54:50,642 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:54:50,643 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (100, 0)
2026-02-20 15:54:50,648 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 15:54:50,648 INFO sqlalchemy.engine.Engine [cached since 456.8s ago] (1,)
2026-02-20 15:54:50,650 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 15:54:50,651 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (1,)
2026-02-20 15:54:50,653 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:54:50,653 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (1, 4, 7)
2026-02-20 15:54:50,659 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:54:50,660 INFO sqlalchemy.engine.Engine [cached since 456.8s ago] (5, 4, 6)
2026-02-20 15:54:50,662 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 15:54:50,662 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (1,)
2026-02-20 15:54:50,664 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 15:54:50,664 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (1, 2, 3)
INFO:     127.0.0.1:49713 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 15:54:50,671 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 15:54:50,671 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (1,)
2026-02-20 15:54:50,672 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49725 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 15:54:50,676 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:54:50,682 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:54:50,682 INFO sqlalchemy.engine.Engine [cached since 456.9s ago] (1, 3)
2026-02-20 15:54:50,690 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 15:54:50,690 INFO sqlalchemy.engine.Engine [cached since 456.8s ago] (1,)
2026-02-20 15:54:50,693 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:54:50,693 INFO sqlalchemy.engine.Engine [cached since 456.8s ago] (1, 7)
2026-02-20 15:54:50,696 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 15:54:50,696 INFO sqlalchemy.engine.Engine [cached since 456.8s ago] (1, 3)
INFO:     127.0.0.1:49711 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 15:54:50,702 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49760 - "OPTIONS /api/v1/domain/orders/reservations/ HTTP/1.1" 200 OK
2026-02-20 15:54:59,421 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:54:59,422 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:54:59,422 INFO sqlalchemy.engine.Engine [cached since 522.9s ago] (1,)
2026-02-20 15:54:59,432 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49760 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:50804 - "OPTIONS /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 15:59:13,446 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:59:13,452 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-20 15:59:13,453 INFO sqlalchemy.engine.Engine [cached since 762.2s ago] ('admin',)
INFO:     127.0.0.1:50804 - "POST /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 15:59:13,962 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50804 - "OPTIONS /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 15:59:13,981 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:59:13,985 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:59:13,989 INFO sqlalchemy.engine.Engine [cached since 777.5s ago] (1,)
INFO:     127.0.0.1:50806 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 15:59:13,997 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50806 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 15:59:14,276 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:59:14,278 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:59:14,279 INFO sqlalchemy.engine.Engine [cached since 777.8s ago] (1,)
2026-02-20 15:59:14,299 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 15:59:14,300 INFO sqlalchemy.engine.Engine [cached since 761.6s ago] (2, 2026)
INFO:     127.0.0.1:50804 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 15:59:14,316 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 15:59:18,275 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 15:59:18,275 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 15:59:18,279 INFO sqlalchemy.engine.Engine [cached since 781.8s ago] (1,)
2026-02-20 15:59:18,304 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 15:59:18,305 INFO sqlalchemy.engine.Engine [cached since 750.2s ago] (100, 0)
INFO:     127.0.0.1:50804 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 15:59:18,318 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:00:03,102 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:00:03,102 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:00:03,103 INFO sqlalchemy.engine.Engine [cached since 826.6s ago] (1,)
2026-02-20 16:00:03,107 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:00:03,108 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:00:03,111 INFO sqlalchemy.engine.Engine [cached since 826.6s ago] (1,)
2026-02-20 16:00:03,117 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:00:03,117 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:00:03,118 INFO sqlalchemy.engine.Engine [cached since 826.6s ago] (1,)
2026-02-20 16:00:03,120 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:00:03,121 INFO sqlalchemy.engine.Engine [cached since 769.4s ago] (100, 0)
2026-02-20 16:00:03,124 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:00:03,124 INFO sqlalchemy.engine.Engine [cached since 769.3s ago] (100, 0)
2026-02-20 16:00:03,129 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:00:03,129 INFO sqlalchemy.engine.Engine [cached since 769.4s ago] (100, 0)
2026-02-20 16:00:03,134 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:00:03,135 INFO sqlalchemy.engine.Engine [cached since 769.4s ago] (1,)
2026-02-20 16:00:03,137 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:00:03,138 INFO sqlalchemy.engine.Engine [cached since 769.4s ago] (1,)
2026-02-20 16:00:03,140 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:00:03,140 INFO sqlalchemy.engine.Engine [cached since 769.4s ago] (1,)
2026-02-20 16:00:03,142 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:00:03,143 INFO sqlalchemy.engine.Engine [cached since 769.4s ago] (1, 4, 7)
2026-02-20 16:00:03,149 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:00:03,149 INFO sqlalchemy.engine.Engine [cached since 769.3s ago] (1,)
2026-02-20 16:00:03,153 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:00:03,153 INFO sqlalchemy.engine.Engine [cached since 769.3s ago] (1, 3)
2026-02-20 16:00:03,158 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:00:03,158 INFO sqlalchemy.engine.Engine [cached since 769.3s ago] (1,)
2026-02-20 16:00:03,164 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:00:03,165 INFO sqlalchemy.engine.Engine [cached since 769.4s ago] (1, 2, 3)
2026-02-20 16:00:03,167 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:00:03,167 INFO sqlalchemy.engine.Engine [cached since 769.3s ago] (5, 4, 6)
2026-02-20 16:00:03,170 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:00:03,171 INFO sqlalchemy.engine.Engine [cached since 769.3s ago] (1, 7)
2026-02-20 16:00:03,174 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:00:03,174 INFO sqlalchemy.engine.Engine [cached since 769.3s ago] (1, 3)
INFO:     127.0.0.1:51018 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:00:03,179 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51020 - "GET /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:51017 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:00:03,208 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:00:03,210 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:00:10,327 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:00:10,328 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:00:10,328 INFO sqlalchemy.engine.Engine [cached since 833.9s ago] (1,)
2026-02-20 16:00:10,330 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51052 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 403 Forbidden
2026-02-20 16:00:12,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:00:12,917 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-20 16:00:12,917 INFO sqlalchemy.engine.Engine [cached since 821.6s ago] ('admin',)
INFO:     127.0.0.1:51052 - "POST /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 16:00:13,173 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:00:13,179 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:00:13,179 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:00:13,180 INFO sqlalchemy.engine.Engine [cached since 836.7s ago] (1,)
INFO:     127.0.0.1:51052 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 16:00:13,181 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:00:13,260 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:00:13,260 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:00:13,260 INFO sqlalchemy.engine.Engine [cached since 836.8s ago] (1,)
2026-02-20 16:00:13,263 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 16:00:13,263 INFO sqlalchemy.engine.Engine [cached since 820.6s ago] (2, 2026)
INFO:     127.0.0.1:51052 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 16:00:13,267 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54123 - "OPTIONS /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 16:12:27,931 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:12:27,940 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:12:27,941 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1,)
2026-02-20 16:12:29,346 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:12:29,349 INFO sqlalchemy.engine.Engine [cached since 1541s ago] (100, 0)
INFO:     127.0.0.1:54123 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 16:12:29,888 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54125 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:54200 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:54202 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:54204 - "OPTIONS /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:12:46,186 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:12:46,191 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:12:46,192 INFO sqlalchemy.engine.Engine [cached since 1590s ago] (1,)
2026-02-20 16:12:46,213 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:12:46,213 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:12:46,214 INFO sqlalchemy.engine.Engine [cached since 1590s ago] (1,)
2026-02-20 16:12:46,220 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:12:46,224 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:12:46,225 INFO sqlalchemy.engine.Engine [cached since 1590s ago] (1,)
2026-02-20 16:12:46,523 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:12:46,525 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (100, 0)
2026-02-20 16:12:46,547 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:12:46,548 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (100, 0)
2026-02-20 16:12:46,565 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:12:46,566 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (100, 0)
2026-02-20 16:12:46,612 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:12:46,613 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1, 4, 7)
2026-02-20 16:12:46,636 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:12:46,637 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1,)
2026-02-20 16:12:46,658 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:12:46,658 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1, 2, 3)
2026-02-20 16:12:46,664 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:12:46,664 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1,)
2026-02-20 16:12:46,789 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:12:46,789 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1,)
2026-02-20 16:12:46,797 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:12:46,798 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (5, 4, 6)
2026-02-20 16:12:46,804 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:12:46,805 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:12:46,805 INFO sqlalchemy.engine.Engine [cached since 1590s ago] (1,)
INFO:     127.0.0.1:54125 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:12:46,819 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:12:46,830 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:12:46,831 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1,)
INFO:     127.0.0.1:54200 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:12:46,834 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:12:46,840 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:12:46,840 INFO sqlalchemy.engine.Engine [generated in 0.00035s] ()
2026-02-20 16:12:46,844 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:12:46,844 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1, 3)
INFO:     127.0.0.1:54202 - "GET /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:12:46,849 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:12:46,855 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:12:46,855 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1,)
2026-02-20 16:12:46,859 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:12:46,859 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1, 7)
2026-02-20 16:12:46,862 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:12:46,862 INFO sqlalchemy.engine.Engine [cached since 1533s ago] (1, 3)
INFO:     127.0.0.1:54206 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:12:46,868 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:13:23,998 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:13:24,018 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:13:24,019 INFO sqlalchemy.engine.Engine [cached since 1628s ago] (1,)
2026-02-20 16:13:24,026 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:13:24,028 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:13:24,028 INFO sqlalchemy.engine.Engine [cached since 1628s ago] (1,)
2026-02-20 16:13:24,032 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:13:24,039 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:13:24,039 INFO sqlalchemy.engine.Engine [cached since 1628s ago] (1,)
2026-02-20 16:13:24,056 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:13:24,062 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:13:24,063 INFO sqlalchemy.engine.Engine [cached since 1628s ago] (1,)
2026-02-20 16:13:24,335 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:13:24,336 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (100, 0)
2026-02-20 16:13:24,362 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:13:24,363 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (100, 0)
2026-02-20 16:13:24,371 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:13:24,371 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (100, 0)
2026-02-20 16:13:24,383 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:13:24,383 INFO sqlalchemy.engine.Engine [cached since 37.54s ago] ()
INFO:     127.0.0.1:54369 - "GET /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:13:24,399 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:13:24,413 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:13:24,414 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1, 4, 7)
2026-02-20 16:13:24,430 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:13:24,431 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1, 2, 3)
2026-02-20 16:13:24,435 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:13:24,435 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1,)
2026-02-20 16:13:24,442 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:13:24,443 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1,)
2026-02-20 16:13:24,455 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:13:24,456 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (5, 4, 6)
2026-02-20 16:13:24,496 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:13:24,496 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1,)
2026-02-20 16:13:24,579 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:13:24,579 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1,)
INFO:     127.0.0.1:54368 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:13:24,617 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54366 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:13:24,628 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:13:24,654 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:13:24,654 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1, 3)
2026-02-20 16:13:24,669 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:13:24,670 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1,)
2026-02-20 16:13:24,687 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:13:24,687 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1, 7)
2026-02-20 16:13:24,694 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:13:24,694 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (1, 3)
INFO:     127.0.0.1:54363 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:13:24,734 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:13:47,444 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:13:47,454 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:13:47,455 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (1,)
2026-02-20 16:13:47,461 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:13:47,461 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:13:47,461 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (1,)
2026-02-20 16:13:47,464 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:13:47,464 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:13:47,465 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (1,)
2026-02-20 16:13:47,467 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:13:47,467 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:13:47,468 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (1,)
2026-02-20 16:13:47,664 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:13:47,665 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (100, 0)
2026-02-20 16:13:47,681 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:13:47,682 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (100, 0)
2026-02-20 16:13:47,699 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:13:47,700 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (100, 0)
2026-02-20 16:13:47,703 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:13:47,703 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] ()
2026-02-20 16:13:47,726 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:13:47,726 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1,)
2026-02-20 16:13:47,736 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:13:47,736 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1,)
INFO:     127.0.0.1:54474 - "GET /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:13:47,781 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:13:47,873 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:13:47,873 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1,)
2026-02-20 16:13:47,878 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:13:47,879 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (5, 4, 6)
2026-02-20 16:13:47,886 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:13:47,887 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1, 4, 7)
2026-02-20 16:13:47,890 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:13:47,891 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1,)
2026-02-20 16:13:47,923 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:13:47,925 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1, 3)
INFO:     127.0.0.1:54473 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:13:47,946 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:13:47,966 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:13:47,966 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1, 2, 3)
2026-02-20 16:13:48,073 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:13:48,073 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1,)
INFO:     127.0.0.1:54471 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:13:48,090 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:13:48,125 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:13:48,125 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1, 7)
2026-02-20 16:13:48,139 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:13:48,139 INFO sqlalchemy.engine.Engine [cached since 1594s ago] (1, 3)
INFO:     127.0.0.1:54468 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:13:48,302 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54908 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
INFO:     127.0.0.1:54909 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:15:36,618 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:15:36,633 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:15:36,634 INFO sqlalchemy.engine.Engine [cached since 1760s ago] (1,)
2026-02-20 16:15:36,673 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:15:36,673 INFO sqlalchemy.engine.Engine [cached since 169.8s ago] ()
INFO:     127.0.0.1:54908 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:15:36,710 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:15:36,743 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:15:36,749 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:15:36,749 INFO sqlalchemy.engine.Engine [cached since 1760s ago] (1,)
2026-02-20 16:15:36,775 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:15:36,775 INFO sqlalchemy.engine.Engine [cached since 169.9s ago] ()
INFO:     127.0.0.1:54908 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:15:36,793 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:15:46,436 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:15:46,440 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:15:46,441 INFO sqlalchemy.engine.Engine [cached since 1770s ago] (1,)
2026-02-20 16:15:46,464 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:15:46,465 INFO sqlalchemy.engine.Engine [cached since 1738s ago] (100, 0)
INFO:     127.0.0.1:54911 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 16:15:46,555 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:16:01,302 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:16:01,303 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:16:01,304 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (1,)
2026-02-20 16:16:01,308 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:16:01,309 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:16:01,309 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (1,)
2026-02-20 16:16:01,318 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:16:01,320 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:16:01,320 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (1,)
2026-02-20 16:16:01,324 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:16:01,326 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:16:01,326 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (1,)
2026-02-20 16:16:01,369 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:16:01,370 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (100, 0)
2026-02-20 16:16:01,378 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:16:01,379 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (100, 0)
2026-02-20 16:16:01,381 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:16:01,381 INFO sqlalchemy.engine.Engine [cached since 194.5s ago] ()
2026-02-20 16:16:01,389 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:16:01,390 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (100, 0)
INFO:     127.0.0.1:55028 - "GET /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:16:01,405 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:16:01,405 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1,)
2026-02-20 16:16:01,421 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:16:01,421 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1, 4, 7)
2026-02-20 16:16:01,423 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:16:01,430 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:16:01,431 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1,)
2026-02-20 16:16:01,441 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:16:01,441 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (5, 4, 6)
2026-02-20 16:16:01,448 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:16:01,449 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1, 2, 3)
2026-02-20 16:16:01,460 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:16:01,460 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1,)
2026-02-20 16:16:01,602 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:16:01,603 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1,)
INFO:     127.0.0.1:55026 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:16:01,620 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:16:01,626 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:16:01,627 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1, 3)
INFO:     127.0.0.1:55025 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:16:01,646 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:16:01,656 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:16:01,661 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1,)
2026-02-20 16:16:01,669 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:16:01,669 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1, 7)
2026-02-20 16:16:01,680 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:16:01,680 INFO sqlalchemy.engine.Engine [cached since 1728s ago] (1, 3)
INFO:     127.0.0.1:55023 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:16:01,712 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:16:47,914 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:16:47,925 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:16:47,925 INFO sqlalchemy.engine.Engine [cached since 1831s ago] (1,)
2026-02-20 16:16:47,934 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:16:47,935 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:16:47,935 INFO sqlalchemy.engine.Engine [cached since 1831s ago] (1,)
2026-02-20 16:16:47,939 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:16:47,940 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:16:47,941 INFO sqlalchemy.engine.Engine [cached since 1831s ago] (1,)
2026-02-20 16:16:47,947 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:16:47,948 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:16:47,948 INFO sqlalchemy.engine.Engine [cached since 1831s ago] (1,)
2026-02-20 16:16:48,053 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:16:48,053 INFO sqlalchemy.engine.Engine [cached since 1774s ago] (100, 0)
2026-02-20 16:16:48,069 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:16:48,070 INFO sqlalchemy.engine.Engine [cached since 1774s ago] (100, 0)
2026-02-20 16:16:48,079 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:16:48,080 INFO sqlalchemy.engine.Engine [cached since 241.2s ago] ()
2026-02-20 16:16:48,126 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:16:48,127 INFO sqlalchemy.engine.Engine [cached since 1774s ago] (100, 0)
INFO:     127.0.0.1:55226 - "GET /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:16:48,182 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:16:48,280 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:16:48,281 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1, 4, 7)
2026-02-20 16:16:48,286 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:16:48,286 INFO sqlalchemy.engine.Engine [cached since 1774s ago] (1,)
2026-02-20 16:16:48,294 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:16:48,294 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1, 2, 3)
2026-02-20 16:16:48,304 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:16:48,304 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1,)
2026-02-20 16:16:48,316 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:16:48,318 INFO sqlalchemy.engine.Engine [cached since 1774s ago] (5, 4, 6)
2026-02-20 16:16:48,414 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:16:48,415 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1,)
INFO:     127.0.0.1:55223 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:16:48,427 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:16:48,558 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:16:48,559 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1,)
INFO:     127.0.0.1:55224 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:16:48,593 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:16:48,678 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:16:48,678 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1, 3)
2026-02-20 16:16:48,690 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:16:48,690 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1,)
2026-02-20 16:16:48,700 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:16:48,700 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1, 7)
2026-02-20 16:16:48,721 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:16:48,722 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (1, 3)
INFO:     127.0.0.1:55221 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:16:48,767 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:18:13,788 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:18:13,832 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:18:13,833 INFO sqlalchemy.engine.Engine [cached since 1917s ago] (1,)
2026-02-20 16:18:13,966 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:18:13,967 INFO sqlalchemy.engine.Engine [cached since 1860s ago] (100, 0)
2026-02-20 16:18:14,095 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:18:14,096 INFO sqlalchemy.engine.Engine [cached since 1860s ago] (1,)
2026-02-20 16:18:14,279 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:18:14,280 INFO sqlalchemy.engine.Engine [cached since 1860s ago] (5, 4, 6)
INFO:     127.0.0.1:55581 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:18:14,307 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:18:14,316 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:18:14,318 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:18:14,318 INFO sqlalchemy.engine.Engine [cached since 1918s ago] (1,)
2026-02-20 16:18:14,648 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:18:14,648 INFO sqlalchemy.engine.Engine [cached since 1861s ago] (100, 0)
2026-02-20 16:18:14,660 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:18:14,661 INFO sqlalchemy.engine.Engine [cached since 1861s ago] (1,)
2026-02-20 16:18:14,681 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:18:14,681 INFO sqlalchemy.engine.Engine [cached since 1861s ago] (5, 4, 6)
INFO:     127.0.0.1:55581 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:18:14,779 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55792 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 16:19:03,152 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:03,165 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:03,167 INFO sqlalchemy.engine.Engine [cached since 1967s ago] (1,)
INFO:     127.0.0.1:55796 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 16:19:03,235 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:03,243 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:03,244 INFO sqlalchemy.engine.Engine [cached since 1967s ago] (1,)
2026-02-20 16:19:03,551 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:19:03,551 INFO sqlalchemy.engine.Engine [generated in 0.00733s] (100, 0)
2026-02-20 16:19:03,599 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:19:03,600 INFO sqlalchemy.engine.Engine [cached since 1910s ago] (100, 0)
INFO:     127.0.0.1:55792 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 16:19:03,637 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:19:03,697 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:19:03,698 INFO sqlalchemy.engine.Engine [cached since 1910s ago] (1, 4, 7)
2026-02-20 16:19:03,704 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:03,706 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:03,707 INFO sqlalchemy.engine.Engine [cached since 1967s ago] (1,)
2026-02-20 16:19:03,736 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:19:03,737 INFO sqlalchemy.engine.Engine [cached since 1910s ago] (1, 2, 3)
2026-02-20 16:19:03,740 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:19:03,741 INFO sqlalchemy.engine.Engine [cached since 0.1966s ago] (100, 0)
INFO:     127.0.0.1:55792 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 16:19:03,754 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55794 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:19:03,763 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:19:03,769 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:03,770 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:03,770 INFO sqlalchemy.engine.Engine [cached since 1967s ago] (1,)
2026-02-20 16:19:03,781 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:19:03,781 INFO sqlalchemy.engine.Engine [cached since 1910s ago] (100, 0)
2026-02-20 16:19:03,787 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:19:03,787 INFO sqlalchemy.engine.Engine [cached since 1910s ago] (1, 4, 7)
2026-02-20 16:19:03,793 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:19:03,793 INFO sqlalchemy.engine.Engine [cached since 1910s ago] (1, 2, 3)
INFO:     127.0.0.1:55794 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:19:03,806 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:19:04,283 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:04,285 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:04,285 INFO sqlalchemy.engine.Engine [cached since 1968s ago] (1,)
2026-02-20 16:19:04,304 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:19:04,304 INFO sqlalchemy.engine.Engine [cached since 0.7602s ago] (100, 0)
INFO:     127.0.0.1:55794 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 16:19:04,316 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:19:04,333 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:04,334 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:04,334 INFO sqlalchemy.engine.Engine [cached since 1968s ago] (1,)
2026-02-20 16:19:04,350 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:19:04,350 INFO sqlalchemy.engine.Engine [cached since 0.8061s ago] (100, 0)
INFO:     127.0.0.1:55794 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 16:19:04,355 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:19:28,552 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:28,572 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:28,574 INFO sqlalchemy.engine.Engine [cached since 1992s ago] (1,)
2026-02-20 16:19:28,609 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:28,611 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:28,612 INFO sqlalchemy.engine.Engine [cached since 1992s ago] (1,)
2026-02-20 16:19:28,676 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:19:28,676 INFO sqlalchemy.engine.Engine [cached since 25.13s ago] (100, 0)
2026-02-20 16:19:28,685 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:19:28,686 INFO sqlalchemy.engine.Engine [cached since 401.8s ago] ()
INFO:     127.0.0.1:55905 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:19:28,724 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55798 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-20 16:19:28,747 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:19:50,110 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:50,188 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:50,189 INFO sqlalchemy.engine.Engine [cached since 2014s ago] (1,)
2026-02-20 16:19:50,372 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:19:50,376 INFO sqlalchemy.engine.Engine [cached since 423.5s ago] ()
INFO:     127.0.0.1:56002 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:19:50,416 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:19:50,421 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:19:50,421 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:19:50,422 INFO sqlalchemy.engine.Engine [cached since 2014s ago] (1,)
2026-02-20 16:19:50,439 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:19:50,440 INFO sqlalchemy.engine.Engine [cached since 423.6s ago] ()
INFO:     127.0.0.1:56002 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:19:50,450 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56093 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56095 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 16:20:11,686 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:11,695 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:11,696 INFO sqlalchemy.engine.Engine [cached since 2035s ago] (1,)
2026-02-20 16:20:11,802 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:20:11,802 INFO sqlalchemy.engine.Engine [generated in 0.00180s] (100, 0)
INFO:     127.0.0.1:56093 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 16:20:11,986 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:11,993 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:11,996 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:11,996 INFO sqlalchemy.engine.Engine [cached since 2036s ago] (1,)
2026-02-20 16:20:12,011 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:12,013 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:12,014 INFO sqlalchemy.engine.Engine [cached since 2036s ago] (1,)
2026-02-20 16:20:12,030 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:20:12,030 INFO sqlalchemy.engine.Engine [cached since 0.2297s ago] (100, 0)
2026-02-20 16:20:12,069 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:20:12,069 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (100, 0)
INFO:     127.0.0.1:56093 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-20 16:20:12,100 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:12,188 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:20:12,189 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (1,)
2026-02-20 16:20:12,215 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:20:12,215 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (1,)
2026-02-20 16:20:12,236 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:20:12,236 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (1,)
2026-02-20 16:20:12,273 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:12,273 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (1, 3)
2026-02-20 16:20:12,310 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:20:12,310 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (1,)
2026-02-20 16:20:12,365 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:12,366 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (1, 7)
2026-02-20 16:20:12,439 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:12,439 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1, 3)
INFO:     127.0.0.1:56095 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:20:12,466 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:12,471 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:12,472 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:12,472 INFO sqlalchemy.engine.Engine [cached since 2036s ago] (1,)
2026-02-20 16:20:12,485 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:20:12,485 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (100, 0)
2026-02-20 16:20:12,498 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:20:12,498 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1,)
2026-02-20 16:20:12,503 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:20:12,503 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1,)
2026-02-20 16:20:12,509 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:20:12,509 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1,)
2026-02-20 16:20:12,515 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:12,515 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1, 3)
2026-02-20 16:20:12,524 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:20:12,524 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1,)
2026-02-20 16:20:12,531 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:12,532 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1, 7)
2026-02-20 16:20:12,541 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:12,542 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1, 3)
INFO:     127.0.0.1:56095 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:20:12,554 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:12,875 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:12,876 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:12,876 INFO sqlalchemy.engine.Engine [cached since 2036s ago] (1,)
2026-02-20 16:20:12,880 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:20:12,880 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (100, 0)
2026-02-20 16:20:12,884 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:20:12,884 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1, 4, 7)
2026-02-20 16:20:12,889 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:20:12,889 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (1, 2, 3)
INFO:     127.0.0.1:56095 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:20:12,907 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:12,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:12,917 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:12,918 INFO sqlalchemy.engine.Engine [cached since 2036s ago] (1,)
INFO:     127.0.0.1:56093 - "OPTIONS /api/v1/visit-plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-20 16:20:12,958 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:12,959 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:12,960 INFO sqlalchemy.engine.Engine [cached since 2036s ago] (1,)
2026-02-20 16:20:12,968 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:20:12,969 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (100, 0)
2026-02-20 16:20:13,249 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-20 16:20:13,250 INFO sqlalchemy.engine.Engine [generated in 0.00075s] (5,)
2026-02-20 16:20:13,257 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:20:13,257 INFO sqlalchemy.engine.Engine [cached since 1980s ago] (1, 4, 7)
2026-02-20 16:20:13,281 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:20:13,282 INFO sqlalchemy.engine.Engine [cached since 1980s ago] (1, 2, 3)
INFO:     127.0.0.1:56095 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:20:13,439 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56101 - "GET /api/v1/visit-plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-20 16:20:13,537 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:13,556 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:13,557 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:13,558 INFO sqlalchemy.engine.Engine [cached since 2037s ago] (1,)
INFO:     127.0.0.1:56095 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-20 16:20:13,580 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:13,580 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:13,581 INFO sqlalchemy.engine.Engine [cached since 2037s ago] (1,)
2026-02-20 16:20:13,588 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-20 16:20:13,588 INFO sqlalchemy.engine.Engine [cached since 0.3393s ago] (5,)
2026-02-20 16:20:13,613 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-20 16:20:13,613 INFO sqlalchemy.engine.Engine [generated in 0.00053s] (1, 100, 0)
INFO:     127.0.0.1:56101 - "GET /api/v1/visit-plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-20 16:20:13,690 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56093 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-20 16:20:13,765 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:13,786 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:13,788 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:13,788 INFO sqlalchemy.engine.Engine [cached since 2037s ago] (1,)
INFO:     127.0.0.1:56101 - "OPTIONS /api/v1/sales/plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-20 16:20:13,806 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:13,807 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:13,807 INFO sqlalchemy.engine.Engine [cached since 2037s ago] (1,)
2026-02-20 16:20:13,812 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-20 16:20:13,812 INFO sqlalchemy.engine.Engine [cached since 0.1996s ago] (1, 100, 0)
2026-02-20 16:20:13,859 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-20 16:20:13,860 INFO sqlalchemy.engine.Engine [generated in 0.00068s] (5, 100, 0)
INFO:     127.0.0.1:56093 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-20 16:20:13,919 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56095 - "GET /api/v1/sales/plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-20 16:20:13,977 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:13,985 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:13,986 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:13,986 INFO sqlalchemy.engine.Engine [cached since 2038s ago] (1,)
2026-02-20 16:20:14,021 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-20 16:20:14,021 INFO sqlalchemy.engine.Engine [cached since 0.1622s ago] (5, 100, 0)
INFO:     127.0.0.1:56095 - "GET /api/v1/sales/plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-20 16:20:14,086 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:15,310 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:15,312 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:15,312 INFO sqlalchemy.engine.Engine [cached since 2039s ago] (1,)
2026-02-20 16:20:15,446 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:20:15,446 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (100, 0)
2026-02-20 16:20:15,739 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:20:15,739 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1,)
2026-02-20 16:20:15,751 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:20:15,751 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1,)
2026-02-20 16:20:15,762 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:20:15,763 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1,)
2026-02-20 16:20:15,772 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:15,772 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1, 3)
2026-02-20 16:20:15,787 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:20:15,787 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1,)
2026-02-20 16:20:15,879 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:15,879 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1, 7)
2026-02-20 16:20:15,887 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:15,888 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1, 3)
INFO:     127.0.0.1:56095 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:20:15,900 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:20:15,903 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:20:15,904 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:20:15,904 INFO sqlalchemy.engine.Engine [cached since 2039s ago] (1,)
2026-02-20 16:20:15,910 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:20:15,910 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (100, 0)
2026-02-20 16:20:15,917 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:20:15,918 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1,)
2026-02-20 16:20:15,922 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:20:15,922 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1,)
2026-02-20 16:20:15,927 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:20:15,927 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1,)
2026-02-20 16:20:15,937 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:15,938 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1, 3)
2026-02-20 16:20:15,945 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:20:15,947 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1,)
2026-02-20 16:20:15,959 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:15,959 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1, 7)
2026-02-20 16:20:16,021 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:20:16,021 INFO sqlalchemy.engine.Engine [cached since 1982s ago] (1, 3)
INFO:     127.0.0.1:56095 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:20:16,031 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:21:43,742 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:21:43,757 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:21:43,758 INFO sqlalchemy.engine.Engine [cached since 2127s ago] (1,)
2026-02-20 16:21:43,798 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:21:43,798 INFO sqlalchemy.engine.Engine [cached since 2096s ago] (100, 0)
INFO:     127.0.0.1:56491 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 16:21:43,831 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:22:06,138 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:22:06,148 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:22:06,150 INFO sqlalchemy.engine.Engine [cached since 2150s ago] (1,)
2026-02-20 16:22:06,160 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:22:06,161 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:22:06,162 INFO sqlalchemy.engine.Engine [cached since 2150s ago] (1,)
2026-02-20 16:22:06,165 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:22:06,166 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:22:06,166 INFO sqlalchemy.engine.Engine [cached since 2150s ago] (1,)
2026-02-20 16:22:06,180 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:22:06,181 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:22:06,181 INFO sqlalchemy.engine.Engine [cached since 2150s ago] (1,)
2026-02-20 16:22:06,541 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:22:06,541 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (100, 0)
2026-02-20 16:22:06,550 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:22:06,551 INFO sqlalchemy.engine.Engine [cached since 559.7s ago] ()
2026-02-20 16:22:06,657 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:22:06,657 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (100, 0)
2026-02-20 16:22:06,677 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:22:06,677 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (100, 0)
INFO:     127.0.0.1:56587 - "GET /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:22:06,711 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:22:06,727 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:22:06,727 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1, 4, 7)
2026-02-20 16:22:06,734 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:22:06,734 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1,)
2026-02-20 16:22:06,746 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:22:06,746 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1, 2, 3)
2026-02-20 16:22:06,751 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:22:06,754 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1,)
2026-02-20 16:22:06,768 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:22:06,768 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1,)
2026-02-20 16:22:06,777 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:22:06,777 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1,)
2026-02-20 16:22:06,793 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:22:06,793 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1, 3)
2026-02-20 16:22:06,799 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:22:06,800 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1,)
INFO:     127.0.0.1:56584 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:22:06,818 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:22:06,819 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (5, 4, 6)
2026-02-20 16:22:06,820 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:22:06,826 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:22:06,827 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1, 7)
2026-02-20 16:22:06,836 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:22:06,837 INFO sqlalchemy.engine.Engine [cached since 2093s ago] (1, 3)
INFO:     127.0.0.1:56582 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:22:06,860 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56585 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:22:06,880 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57226 - "OPTIONS /api/v1/domain/orders/reservations/ HTTP/1.1" 200 OK
2026-02-20 16:24:46,738 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:24:46,758 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:24:46,760 INFO sqlalchemy.engine.Engine [cached since 2310s ago] (1,)
2026-02-20 16:24:46,893 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57226 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:57228 - "OPTIONS /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 16:25:23,967 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:25:23,988 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-20 16:25:23,991 INFO sqlalchemy.engine.Engine [cached since 2333s ago] ('admin',)
INFO:     127.0.0.1:57228 - "POST /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 16:25:25,047 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57228 - "OPTIONS /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 16:25:25,115 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:25:25,116 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:25:25,116 INFO sqlalchemy.engine.Engine [cached since 2349s ago] (1,)
INFO:     127.0.0.1:57384 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 16:25:25,155 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57384 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 16:25:25,511 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:25:25,513 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:25:25,514 INFO sqlalchemy.engine.Engine [cached since 2349s ago] (1,)
2026-02-20 16:25:25,641 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 16:25:25,642 INFO sqlalchemy.engine.Engine [cached since 2333s ago] (2, 2026)
INFO:     127.0.0.1:57228 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 16:25:25,690 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57513 - "OPTIONS /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 16:25:53,381 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:25:53,400 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:25:53,408 INFO sqlalchemy.engine.Engine [cached since 2377s ago] (1,)
2026-02-20 16:25:53,689 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:25:53,690 INFO sqlalchemy.engine.Engine [cached since 2346s ago] (100, 0)
INFO:     127.0.0.1:57513 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 16:25:54,069 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57515 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:26:38,373 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:26:38,385 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:26:38,386 INFO sqlalchemy.engine.Engine [cached since 2422s ago] (1,)
INFO:     127.0.0.1:57700 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:57702 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:57704 - "OPTIONS /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:26:38,440 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:26:38,446 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:26:38,448 INFO sqlalchemy.engine.Engine [cached since 2422s ago] (1,)
2026-02-20 16:26:38,464 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:26:38,465 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:26:38,466 INFO sqlalchemy.engine.Engine [cached since 2422s ago] (1,)
2026-02-20 16:26:38,472 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:26:38,474 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:26:38,474 INFO sqlalchemy.engine.Engine [cached since 2422s ago] (1,)
2026-02-20 16:26:38,544 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:26:38,546 INFO sqlalchemy.engine.Engine [cached since 831.7s ago] ()
2026-02-20 16:26:38,658 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:26:38,660 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (100, 0)
2026-02-20 16:26:38,687 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:26:38,688 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (100, 0)
2026-02-20 16:26:38,777 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:26:38,777 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (100, 0)
INFO:     127.0.0.1:57702 - "GET /api/v1/users/med-reps HTTP/1.1" 200 OK
2026-02-20 16:26:38,812 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:26:38,906 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:26:38,907 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1, 4, 7)
2026-02-20 16:26:38,962 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-20 16:26:38,963 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1,)
2026-02-20 16:26:38,981 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:26:38,981 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1, 2, 3)
2026-02-20 16:26:38,989 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-20 16:26:38,989 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1,)
2026-02-20 16:26:39,024 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-20 16:26:39,024 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (5, 4, 6)
2026-02-20 16:26:39,048 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-20 16:26:39,048 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1,)
2026-02-20 16:26:39,103 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-20 16:26:39,103 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1,)
INFO:     127.0.0.1:57706 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-20 16:26:39,188 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:26:39,198 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:26:39,199 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1, 3)
2026-02-20 16:26:39,225 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-20 16:26:39,226 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1,)
INFO:     127.0.0.1:57700 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-20 16:26:39,241 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:26:39,252 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:26:39,252 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1, 7)
2026-02-20 16:26:39,266 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-20 16:26:39,266 INFO sqlalchemy.engine.Engine [cached since 2365s ago] (1, 3)
INFO:     127.0.0.1:57515 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-20 16:26:39,315 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:27:18,079 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:27:18,090 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:27:18,090 INFO sqlalchemy.engine.Engine [cached since 2462s ago] (1,)
2026-02-20 16:27:18,235 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57873 - "POST /api/v1/domain/orders/reservations/ HTTP/1.1" 403 Forbidden
2026-02-20 16:27:50,302 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:27:50,325 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-20 16:27:50,327 INFO sqlalchemy.engine.Engine [cached since 2479s ago] ('admin',)
INFO:     127.0.0.1:58016 - "POST /api/v1/login/access-token HTTP/1.1" 200 OK
2026-02-20 16:27:51,575 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:27:51,606 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:27:51,612 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:27:51,612 INFO sqlalchemy.engine.Engine [cached since 2495s ago] (1,)
INFO:     127.0.0.1:58016 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2026-02-20 16:27:51,652 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:27:51,847 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:27:51,848 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:27:51,848 INFO sqlalchemy.engine.Engine [cached since 2495s ago] (1,)
2026-02-20 16:27:51,913 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 16:27:51,914 INFO sqlalchemy.engine.Engine [cached since 2479s ago] (2, 2026)
INFO:     127.0.0.1:58016 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 16:27:51,962 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:28:20,968 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:28:20,981 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:28:20,982 INFO sqlalchemy.engine.Engine [cached since 2525s ago] (1,)
2026-02-20 16:28:21,066 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-20 16:28:21,066 INFO sqlalchemy.engine.Engine [cached since 2493s ago] (100, 0)
INFO:     127.0.0.1:58138 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-20 16:28:21,149 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58449 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
INFO:     127.0.0.1:58451 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:29:34,573 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:29:34,597 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:29:34,602 INFO sqlalchemy.engine.Engine [cached since 2598s ago] (1,)
2026-02-20 16:29:35,209 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:29:35,209 INFO sqlalchemy.engine.Engine [cached since 1008s ago] ()
INFO:     127.0.0.1:58449 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:29:35,459 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:29:35,482 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:29:35,484 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:29:35,484 INFO sqlalchemy.engine.Engine [cached since 2599s ago] (1,)
2026-02-20 16:29:35,610 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:29:35,611 INFO sqlalchemy.engine.Engine [cached since 1009s ago] ()
INFO:     127.0.0.1:58449 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:29:35,682 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:32:29,881 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:32:29,890 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:32:29,891 INFO sqlalchemy.engine.Engine [cached since 2773s ago] (1,)
2026-02-20 16:32:30,375 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:32:30,375 INFO sqlalchemy.engine.Engine [cached since 1183s ago] ()
INFO:     127.0.0.1:59191 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:32:30,408 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:32:30,412 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:32:30,413 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:32:30,413 INFO sqlalchemy.engine.Engine [cached since 2774s ago] (1,)
2026-02-20 16:32:30,482 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:32:30,482 INFO sqlalchemy.engine.Engine [cached since 1183s ago] ()
INFO:     127.0.0.1:59191 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:32:30,491 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:32:30,638 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:32:30,639 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:32:30,639 INFO sqlalchemy.engine.Engine [cached since 2774s ago] (1,)
2026-02-20 16:32:30,678 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 16:32:30,679 INFO sqlalchemy.engine.Engine [cached since 2758s ago] (2, 2026)
INFO:     127.0.0.1:59191 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 16:32:30,747 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:33:03,283 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:33:03,299 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:33:03,300 INFO sqlalchemy.engine.Engine [cached since 2796s ago] (1,)
2026-02-20 16:33:03,986 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 16:33:03,986 INFO sqlalchemy.engine.Engine [cached since 2781s ago] (2, 2026)
INFO:     127.0.0.1:59578 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 16:33:04,460 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:33:18,733 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:33:18,746 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:33:18,746 INFO sqlalchemy.engine.Engine [cached since 2812s ago] (1,)
2026-02-20 16:33:18,875 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:33:18,876 INFO sqlalchemy.engine.Engine [cached since 1222s ago] ()
INFO:     127.0.0.1:59679 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:33:18,958 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:33:18,969 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:33:18,971 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:33:18,972 INFO sqlalchemy.engine.Engine [cached since 2812s ago] (1,)
2026-02-20 16:33:19,065 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-20 16:33:19,065 INFO sqlalchemy.engine.Engine [cached since 1222s ago] ()
INFO:     127.0.0.1:59679 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-20 16:33:19,080 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 16:33:19,199 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 16:33:19,200 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 16:33:19,200 INFO sqlalchemy.engine.Engine [cached since 2812s ago] (1,)
2026-02-20 16:33:19,285 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 16:33:19,285 INFO sqlalchemy.engine.Engine [cached since 2796s ago] (2, 2026)
INFO:     127.0.0.1:59679 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 16:33:19,419 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 17:08:39,985 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 17:08:39,992 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 17:08:39,992 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (1,)
2026-02-20 17:08:40,056 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 17:08:40,056 INFO sqlalchemy.engine.Engine [cached since 2858s ago] (2, 2026)
INFO:     127.0.0.1:60539 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 17:08:40,087 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 17:26:18,016 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 17:26:18,026 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 17:26:18,026 INFO sqlalchemy.engine.Engine [cached since 2918s ago] (1,)
2026-02-20 17:26:18,104 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 17:26:18,104 INFO sqlalchemy.engine.Engine [cached since 2902s ago] (2, 2026)
INFO:     127.0.0.1:61112 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 17:26:18,192 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:61650 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 17:59:52,665 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 17:59:52,675 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 17:59:52,679 INFO sqlalchemy.engine.Engine [cached since 2962s ago] (1,)
2026-02-20 17:59:52,746 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 17:59:52,746 INFO sqlalchemy.engine.Engine [cached since 2946s ago] (2, 2026)
INFO:     127.0.0.1:61650 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 17:59:53,162 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 23:08:21,872 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 23:08:21,880 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 23:08:21,881 INFO sqlalchemy.engine.Engine [cached since 3090s ago] (1,)
2026-02-20 23:08:21,953 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 23:08:21,953 INFO sqlalchemy.engine.Engine [cached since 3074s ago] (2, 2026)
INFO:     127.0.0.1:63196 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 23:08:21,970 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-20 23:39:51,236 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-20 23:39:51,266 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-20 23:39:51,267 INFO sqlalchemy.engine.Engine [cached since 3128s ago] (1,)
2026-02-20 23:39:51,452 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-20 23:39:51,453 INFO sqlalchemy.engine.Engine [cached since 3112s ago] (2, 2026)
INFO:     127.0.0.1:63713 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-20 23:39:51,650 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 00:40:52,658 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 00:40:52,669 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 00:40:52,670 INFO sqlalchemy.engine.Engine [cached since 3161s ago] (1,)
2026-02-21 00:40:52,719 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 00:40:52,720 INFO sqlalchemy.engine.Engine [cached since 3145s ago] (2, 2026)
INFO:     127.0.0.1:64160 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 00:40:52,756 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 00:41:39,219 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 00:41:39,227 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 00:41:39,228 INFO sqlalchemy.engine.Engine [cached since 3193s ago] (1,)
2026-02-21 00:41:40,071 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 00:41:40,072 INFO sqlalchemy.engine.Engine [cached since 3178s ago] (2, 2026)
INFO:     127.0.0.1:64565 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 00:41:40,432 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 01:41:58,475 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 01:41:58,482 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 01:41:58,483 INFO sqlalchemy.engine.Engine [cached since 3226s ago] (1,)
2026-02-21 01:41:58,548 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 01:41:58,548 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (2, 2026)
INFO:     127.0.0.1:65038 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 01:41:58,577 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 03:30:09,493 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 03:30:09,500 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 03:30:09,502 INFO sqlalchemy.engine.Engine [cached since 3259s ago] (1,)
2026-02-21 03:30:09,577 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 03:30:09,577 INFO sqlalchemy.engine.Engine [cached since 3243s ago] (2, 2026)
INFO:     127.0.0.1:65486 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 03:30:09,613 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:24:40,720 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:24:40,730 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:24:40,732 INFO sqlalchemy.engine.Engine [cached since 3304s ago] (1,)
2026-02-21 06:24:40,788 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 06:24:40,788 INFO sqlalchemy.engine.Engine [cached since 3288s ago] (2, 2026)
INFO:     127.0.0.1:49666 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 06:24:40,805 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50057 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
INFO:     127.0.0.1:50058 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 06:26:00,996 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:26:01,000 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:26:01,001 INFO sqlalchemy.engine.Engine [cached since 3384s ago] (1,)
2026-02-21 06:26:01,012 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:26:01,014 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:26:01,015 INFO sqlalchemy.engine.Engine [cached since 3384s ago] (1,)
2026-02-21 06:26:01,165 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 06:26:01,166 INFO sqlalchemy.engine.Engine [cached since 3368s ago] (2, 2026)
2026-02-21 06:26:01,179 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 06:26:01,179 INFO sqlalchemy.engine.Engine [cached since 1794s ago] ()
INFO:     127.0.0.1:50057 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 06:26:01,231 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:26:01,234 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:26:01,235 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:26:01,235 INFO sqlalchemy.engine.Engine [cached since 3385s ago] (1,)
2026-02-21 06:26:01,272 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 06:26:01,273 INFO sqlalchemy.engine.Engine [cached since 1794s ago] ()
INFO:     127.0.0.1:50057 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 06:26:01,281 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50060 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 06:26:01,310 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50062 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,408 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,411 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,411 INFO sqlalchemy.engine.Engine [cached since 3418s ago] (1,)
INFO:     127.0.0.1:50194 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,448 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:27:26,448 INFO sqlalchemy.engine.Engine [cached since 1383s ago] (100, 0)
INFO:     127.0.0.1:50062 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,476 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:26,480 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,481 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,482 INFO sqlalchemy.engine.Engine [cached since 3418s ago] (1,)
INFO:     127.0.0.1:50194 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,487 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,487 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,487 INFO sqlalchemy.engine.Engine [cached since 3418s ago] (1,)
2026-02-21 06:27:26,491 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:27:26,491 INFO sqlalchemy.engine.Engine [cached since 1383s ago] (100, 0)
2026-02-21 06:27:26,522 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:27:26,522 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (100, 0)
2026-02-21 06:27:26,593 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 06:27:26,594 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1,)
INFO:     127.0.0.1:50062 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,607 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:26,622 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-21 06:27:26,622 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1,)
2026-02-21 06:27:26,639 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-21 06:27:26,639 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1,)
2026-02-21 06:27:26,646 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:26,647 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 3)
2026-02-21 06:27:26,672 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-21 06:27:26,673 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1,)
2026-02-21 06:27:26,694 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:26,694 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 7)
2026-02-21 06:27:26,706 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:26,706 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 3)
INFO:     127.0.0.1:50200 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,740 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:26,745 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,746 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,746 INFO sqlalchemy.engine.Engine [cached since 3418s ago] (1,)
INFO:     127.0.0.1:50062 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,752 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,752 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,753 INFO sqlalchemy.engine.Engine [cached since 3418s ago] (1,)
2026-02-21 06:27:26,760 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:27:26,760 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (100, 0)
2026-02-21 06:27:26,766 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:27:26,766 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (100, 0)
2026-02-21 06:27:26,768 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-21 06:27:26,768 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 4, 7)
2026-02-21 06:27:26,774 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-21 06:27:26,774 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 2, 3)
2026-02-21 06:27:26,788 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 06:27:26,788 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1,)
2026-02-21 06:27:26,805 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-21 06:27:26,806 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1,)
INFO:     127.0.0.1:50194 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,811 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:26,814 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-21 06:27:26,814 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1,)
INFO:     127.0.0.1:50194 - "OPTIONS /api/v1/visit-plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-21 06:27:26,819 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,819 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,819 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
2026-02-21 06:27:26,827 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 06:27:26,828 INFO sqlalchemy.engine.Engine [cached since 1382s ago] (5,)
2026-02-21 06:27:26,832 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:26,833 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 3)
INFO:     127.0.0.1:50062 - "GET /api/v1/visit-plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-21 06:27:26,838 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50062 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,845 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,846 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,846 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
2026-02-21 06:27:26,856 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 06:27:26,856 INFO sqlalchemy.engine.Engine [cached since 1381s ago] (1, 100, 0)
2026-02-21 06:27:26,858 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-21 06:27:26,858 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1,)
INFO:     127.0.0.1:50194 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,874 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:26,875 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:26,875 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 7)
INFO:     127.0.0.1:50194 - "OPTIONS /api/v1/sales/plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-21 06:27:26,880 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,881 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,881 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
2026-02-21 06:27:26,882 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:26,882 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 3)
2026-02-21 06:27:26,897 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 06:27:26,897 INFO sqlalchemy.engine.Engine [cached since 1381s ago] (5, 100, 0)
INFO:     127.0.0.1:50200 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,906 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:26,911 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,911 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,911 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
2026-02-21 06:27:26,913 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:27:26,913 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (100, 0)
2026-02-21 06:27:26,929 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-21 06:27:26,929 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 4, 7)
2026-02-21 06:27:26,941 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-21 06:27:26,941 INFO sqlalchemy.engine.Engine [cached since 3361s ago] (1, 2, 3)
INFO:     127.0.0.1:50200 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 06:27:26,964 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:26,970 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:26,970 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:26,970 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
INFO:     127.0.0.1:50062 - "GET /api/v1/sales/plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-21 06:27:26,974 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:26,976 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 06:27:26,976 INFO sqlalchemy.engine.Engine [cached since 1382s ago] (5,)
INFO:     127.0.0.1:50200 - "GET /api/v1/visit-plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-21 06:27:27,064 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:27,191 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:27,191 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:27,191 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
2026-02-21 06:27:27,194 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:27:27,194 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (100, 0)
2026-02-21 06:27:27,209 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 06:27:27,209 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1,)
2026-02-21 06:27:27,211 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-21 06:27:27,211 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1,)
2026-02-21 06:27:27,212 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-21 06:27:27,212 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1,)
2026-02-21 06:27:27,213 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:27,213 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1, 3)
2026-02-21 06:27:27,215 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-21 06:27:27,215 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1,)
2026-02-21 06:27:27,216 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:27,216 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1, 7)
2026-02-21 06:27:27,218 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:27,218 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1, 3)
INFO:     127.0.0.1:50200 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 06:27:27,224 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:27,226 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:27,226 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:27,227 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
2026-02-21 06:27:27,229 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:27:27,229 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (100, 0)
2026-02-21 06:27:27,240 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 06:27:27,240 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1,)
2026-02-21 06:27:27,246 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id AS doctorspecialty_id, doctorspecialty.name AS doctorspecialty_name 
FROM doctorspecialty 
WHERE doctorspecialty.id IN ($1::INTEGER)
2026-02-21 06:27:27,246 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1,)
2026-02-21 06:27:27,253 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:27,253 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:27,253 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
2026-02-21 06:27:27,256 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 06:27:27,257 INFO sqlalchemy.engine.Engine [cached since 1382s ago] (1, 100, 0)
2026-02-21 06:27:27,266 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id AS doctorcategory_id, doctorcategory.name AS doctorcategory_name 
FROM doctorcategory 
WHERE doctorcategory.id IN ($1::INTEGER)
2026-02-21 06:27:27,266 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1,)
2026-02-21 06:27:27,275 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id AS medicalorganization_id, medicalorganization.name AS medicalorganization_name, medicalorganization.address AS medicalorganization_address, medicalorganization.region_id AS medicalorganization_region_id, medicalorganization.org_type AS medicalorganization_org_type, medicalorganization.brand AS medicalorganization_brand, medicalorganization.director_name AS medicalorganization_director_name 
FROM medicalorganization 
WHERE medicalorganization.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:27,275 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1, 3)
INFO:     127.0.0.1:50062 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 06:27:27,277 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:27,298 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-21 06:27:27,298 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1,)
2026-02-21 06:27:27,325 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:27,325 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1, 7)
2026-02-21 06:27:27,341 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER, $2::INTEGER)
2026-02-21 06:27:27,342 INFO sqlalchemy.engine.Engine [cached since 3362s ago] (1, 3)
INFO:     127.0.0.1:50200 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 06:27:27,368 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 06:27:27,486 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:27:27,486 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:27:27,487 INFO sqlalchemy.engine.Engine [cached since 3419s ago] (1,)
2026-02-21 06:27:27,501 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 06:27:27,502 INFO sqlalchemy.engine.Engine [cached since 1382s ago] (5, 100, 0)
INFO:     127.0.0.1:50200 - "GET /api/v1/sales/plans/?med_rep_id=5 HTTP/1.1" 200 OK
2026-02-21 06:27:27,520 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50794 - "OPTIONS /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-21 06:29:51,233 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 06:29:51,238 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 06:29:51,243 INFO sqlalchemy.engine.Engine [cached since 3563s ago] (1,)
2026-02-21 06:29:51,387 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 06:29:51,388 INFO sqlalchemy.engine.Engine [cached since 3531s ago] (100, 0)
INFO:     127.0.0.1:50794 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-21 06:29:51,447 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:61040 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 07:11:33,465 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 07:11:33,470 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 07:11:33,472 INFO sqlalchemy.engine.Engine [cached since 6065s ago] (1,)
2026-02-21 07:11:33,656 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 07:11:33,657 INFO sqlalchemy.engine.Engine [cached since 6049s ago] (2, 2026)
INFO:     127.0.0.1:61040 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 07:11:33,722 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 07:43:50,577 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 07:43:50,582 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 07:43:50,582 INFO sqlalchemy.engine.Engine [cached since 6207s ago] (1,)
2026-02-21 07:43:50,687 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 07:43:50,688 INFO sqlalchemy.engine.Engine [cached since 6191s ago] (2, 2026)
INFO:     127.0.0.1:62762 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 07:43:50,998 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:65455 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 07:56:50,310 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 07:56:50,312 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 07:56:50,312 INFO sqlalchemy.engine.Engine [cached since 6849s ago] (1,)
2026-02-21 07:56:50,328 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 07:56:50,328 INFO sqlalchemy.engine.Engine [cached since 6833s ago] (2, 2026)
INFO:     127.0.0.1:65455 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 07:56:50,337 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 07:58:24,396 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 07:58:24,398 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 07:58:24,398 INFO sqlalchemy.engine.Engine [cached since 6934s ago] (1,)
2026-02-21 07:58:24,408 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 07:58:24,409 INFO sqlalchemy.engine.Engine [cached since 6918s ago] (2, 2026)
INFO:     127.0.0.1:49444 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 07:58:24,417 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 07:58:42,912 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 07:58:42,913 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 07:58:42,913 INFO sqlalchemy.engine.Engine [cached since 6953s ago] (1,)
2026-02-21 07:58:42,919 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 07:58:42,919 INFO sqlalchemy.engine.Engine [cached since 6937s ago] (2, 2026)
INFO:     127.0.0.1:49536 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 07:58:42,924 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 08:08:44,783 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 08:08:44,783 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 08:08:44,783 INFO sqlalchemy.engine.Engine [cached since 6980s ago] (1,)
2026-02-21 08:08:44,799 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 08:08:44,799 INFO sqlalchemy.engine.Engine [cached since 6964s ago] (2, 2026)
INFO:     127.0.0.1:49671 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 08:08:44,844 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 10:01:46,712 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 10:01:46,720 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 10:01:46,720 INFO sqlalchemy.engine.Engine [cached since 7041s ago] (1,)
2026-02-21 10:01:46,746 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 10:01:46,746 INFO sqlalchemy.engine.Engine [cached since 7025s ago] (2, 2026)
INFO:     127.0.0.1:50045 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 10:01:46,762 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55793 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 20:09:06,043 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 20:09:06,046 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 20:09:06,046 INFO sqlalchemy.engine.Engine [cached since 8311s ago] (1,)
2026-02-21 20:09:06,058 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 20:09:06,058 INFO sqlalchemy.engine.Engine [cached since 8295s ago] (2, 2026)
INFO:     127.0.0.1:55793 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 20:09:06,064 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56651 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56652 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 22:53:20,882 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:53:20,887 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:53:20,887 INFO sqlalchemy.engine.Engine [cached since 8477s ago] (1,)
2026-02-21 22:53:20,924 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:53:20,925 INFO sqlalchemy.engine.Engine [cached since 6442s ago] (100, 0)
INFO:     127.0.0.1:56651 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 22:53:20,987 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:53:20,991 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:53:20,991 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:53:20,995 INFO sqlalchemy.engine.Engine [cached since 8477s ago] (1,)
2026-02-21 22:53:21,008 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:53:21,008 INFO sqlalchemy.engine.Engine [cached since 6442s ago] (100, 0)
INFO:     127.0.0.1:56651 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 22:53:21,019 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56651 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
INFO:     127.0.0.1:56652 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 22:53:22,350 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:53:22,350 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:53:22,350 INFO sqlalchemy.engine.Engine [cached since 8479s ago] (1,)
2026-02-21 22:53:22,354 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 22:53:22,354 INFO sqlalchemy.engine.Engine [cached since 6888s ago] ()
INFO:     127.0.0.1:56654 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 22:53:22,362 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:53:22,368 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:53:22,369 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:53:22,369 INFO sqlalchemy.engine.Engine [cached since 8479s ago] (1,)
2026-02-21 22:53:22,373 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 22:53:22,374 INFO sqlalchemy.engine.Engine [cached since 6888s ago] ()
INFO:     127.0.0.1:56654 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 22:53:22,380 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56654 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56652 - "OPTIONS /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:53:23,930 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:53:23,930 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:53:23,930 INFO sqlalchemy.engine.Engine [cached since 8480s ago] (1,)
2026-02-21 22:53:23,949 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:53:23,949 INFO sqlalchemy.engine.Engine [cached since 8423s ago] (100, 0)
2026-02-21 22:53:23,985 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-21 22:53:23,985 INFO sqlalchemy.engine.Engine [cached since 8423s ago] (1,)
2026-02-21 22:53:24,001 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-21 22:53:24,001 INFO sqlalchemy.engine.Engine [cached since 8423s ago] (5, 4, 6)
INFO:     127.0.0.1:56651 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:53:24,031 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:53:24,034 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:53:24,035 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:53:24,035 INFO sqlalchemy.engine.Engine [cached since 8480s ago] (1,)
2026-02-21 22:53:24,037 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:53:24,037 INFO sqlalchemy.engine.Engine [cached since 8423s ago] (100, 0)
2026-02-21 22:53:24,041 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-21 22:53:24,041 INFO sqlalchemy.engine.Engine [cached since 8423s ago] (1,)
2026-02-21 22:53:24,049 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-21 22:53:24,049 INFO sqlalchemy.engine.Engine [cached since 8423s ago] (5, 4, 6)
INFO:     127.0.0.1:56651 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:53:24,060 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:53:30,278 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:53:30,278 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:53:30,278 INFO sqlalchemy.engine.Engine [cached since 8487s ago] (1,)
2026-02-21 22:53:30,280 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:53:30,280 INFO sqlalchemy.engine.Engine [cached since 8429s ago] (100, 0)
2026-02-21 22:53:30,285 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-21 22:53:30,285 INFO sqlalchemy.engine.Engine [cached since 8429s ago] (1,)
2026-02-21 22:53:30,293 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-21 22:53:30,293 INFO sqlalchemy.engine.Engine [cached since 8429s ago] (5, 4, 6)
INFO:     127.0.0.1:56703 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:53:30,312 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:53:30,314 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:53:30,315 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:53:30,315 INFO sqlalchemy.engine.Engine [cached since 8487s ago] (1,)
2026-02-21 22:53:30,316 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:53:30,317 INFO sqlalchemy.engine.Engine [cached since 8429s ago] (100, 0)
2026-02-21 22:53:30,344 INFO sqlalchemy.engine.Engine SELECT category.id AS category_id, category.name AS category_name 
FROM category 
WHERE category.id IN ($1::INTEGER)
2026-02-21 22:53:30,344 INFO sqlalchemy.engine.Engine [cached since 8429s ago] (1,)
2026-02-21 22:53:30,349 INFO sqlalchemy.engine.Engine SELECT product_1.id AS product_1_id, manufacturer.id AS manufacturer_id, manufacturer.name AS manufacturer_name, manufacturer.created_at AS manufacturer_created_at, manufacturer.updated_at AS manufacturer_updated_at 
FROM product AS product_1 JOIN product_manufacturer AS product_manufacturer_1 ON product_1.id = product_manufacturer_1.product_id JOIN manufacturer ON manufacturer.id = product_manufacturer_1.manufacturer_id 
WHERE product_1.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER)
2026-02-21 22:53:30,349 INFO sqlalchemy.engine.Engine [cached since 8429s ago] (5, 4, 6)
INFO:     127.0.0.1:56703 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:53:30,363 INFO sqlalchemy.engine.Engine ROLLBACK
WARNING:  StatReload detected changes in 'reset_db_safe.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [22597]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [25735]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'reset_db_safe.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [25735]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [25826]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-02-21 22:58:27,687 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-21 22:58:27,688 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 22:58:27,694 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-21 22:58:27,694 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 22:58:27,697 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-21 22:58:27,697 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 22:58:27,701 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:27,819 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:27,819 INFO sqlalchemy.engine.Engine [generated in 0.00028s] (1,)
2026-02-21 22:58:27,832 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:27,832 INFO sqlalchemy.engine.Engine [generated in 0.00022s] (100, 0)
INFO:     127.0.0.1:57960 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:58:27,839 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:27,849 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:27,849 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:27,849 INFO sqlalchemy.engine.Engine [cached since 0.02983s ago] (1,)
2026-02-21 22:58:27,852 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:27,852 INFO sqlalchemy.engine.Engine [cached since 0.02039s ago] (100, 0)
INFO:     127.0.0.1:57960 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:58:27,854 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57960 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:57973 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:29,295 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:29,296 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:29,296 INFO sqlalchemy.engine.Engine [cached since 1.477s ago] (1,)
2026-02-21 22:58:29,300 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:29,300 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (100, 0)
INFO:     127.0.0.1:57960 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:29,304 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:29,307 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:29,308 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:29,308 INFO sqlalchemy.engine.Engine [cached since 1.489s ago] (1,)
2026-02-21 22:58:29,310 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:29,310 INFO sqlalchemy.engine.Engine [cached since 0.01051s ago] (100, 0)
INFO:     127.0.0.1:57960 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:29,317 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:30,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:30,164 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:30,165 INFO sqlalchemy.engine.Engine [cached since 2.345s ago] (1,)
INFO:     127.0.0.1:57973 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:57975 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,171 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:30,171 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:30,171 INFO sqlalchemy.engine.Engine [cached since 2.352s ago] (1,)
2026-02-21 22:58:30,173 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:30,173 INFO sqlalchemy.engine.Engine [cached since 0.8736s ago] (100, 0)
INFO:     127.0.0.1:57960 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,175 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:30,182 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:30,183 INFO sqlalchemy.engine.Engine [generated in 0.00049s] (100, 0)
2026-02-21 22:58:30,185 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:30,186 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:30,186 INFO sqlalchemy.engine.Engine [cached since 2.367s ago] (1,)
2026-02-21 22:58:30,188 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:30,188 INFO sqlalchemy.engine.Engine [cached since 0.8888s ago] (100, 0)
INFO:     127.0.0.1:57960 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,191 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57973 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,195 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:30,200 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:30,201 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:30,201 INFO sqlalchemy.engine.Engine [cached since 2.382s ago] (1,)
2026-02-21 22:58:30,205 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:30,205 INFO sqlalchemy.engine.Engine [cached since 0.02276s ago] (100, 0)
INFO:     127.0.0.1:57973 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,210 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:30,237 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:30,237 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:30,237 INFO sqlalchemy.engine.Engine [cached since 2.418s ago] (1,)
2026-02-21 22:58:30,239 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:30,239 INFO sqlalchemy.engine.Engine [cached since 0.9391s ago] (100, 0)
INFO:     127.0.0.1:57973 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,240 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:30,242 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:30,243 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:30,243 INFO sqlalchemy.engine.Engine [cached since 2.423s ago] (1,)
2026-02-21 22:58:30,246 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:30,246 INFO sqlalchemy.engine.Engine [cached since 0.9461s ago] (100, 0)
INFO:     127.0.0.1:57973 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,249 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57973 - "OPTIONS /api/v1/manufacturers/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:57960 - "OPTIONS /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,850 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:30,851 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:30,851 INFO sqlalchemy.engine.Engine [cached since 3.031s ago] (1,)
2026-02-21 22:58:30,853 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:30,853 INFO sqlalchemy.engine.Engine [generated in 0.00016s] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,857 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:30,859 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:30,859 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:30,859 INFO sqlalchemy.engine.Engine [cached since 3.04s ago] (1,)
2026-02-21 22:58:30,860 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:30,860 INFO sqlalchemy.engine.Engine [cached since 0.007592s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-21 22:58:30,866 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:31,918 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:31,918 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:31,919 INFO sqlalchemy.engine.Engine [cached since 4.099s ago] (1,)
2026-02-21 22:58:31,921 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:31,921 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 22:58:31,923 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:31,925 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:31,925 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:31,926 INFO sqlalchemy.engine.Engine [cached since 4.106s ago] (1,)
2026-02-21 22:58:31,928 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:31,928 INFO sqlalchemy.engine.Engine [cached since 0.007268s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 22:58:31,931 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:32,875 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:32,876 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:32,876 INFO sqlalchemy.engine.Engine [cached since 5.057s ago] (1,)
2026-02-21 22:58:32,886 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 22:58:32,886 INFO sqlalchemy.engine.Engine [generated in 0.00035s] (2, 2026)
INFO:     127.0.0.1:57975 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 22:58:32,899 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:33,835 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:33,835 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:33,835 INFO sqlalchemy.engine.Engine [cached since 6.016s ago] (1,)
2026-02-21 22:58:33,836 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:33,836 INFO sqlalchemy.engine.Engine [cached since 1.916s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 22:58:33,837 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:33,839 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:33,840 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:33,840 INFO sqlalchemy.engine.Engine [cached since 6.02s ago] (1,)
2026-02-21 22:58:33,841 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:33,841 INFO sqlalchemy.engine.Engine [cached since 1.921s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 22:58:33,843 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:34,442 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:34,442 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:34,442 INFO sqlalchemy.engine.Engine [cached since 6.623s ago] (1,)
2026-02-21 22:58:34,444 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:34,444 INFO sqlalchemy.engine.Engine [cached since 6.612s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:58:34,445 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:34,446 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:34,446 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:34,446 INFO sqlalchemy.engine.Engine [cached since 6.627s ago] (1,)
2026-02-21 22:58:34,449 INFO sqlalchemy.engine.Engine SELECT product.id, product.name, product.price, product.production_price, product.category_id, product.is_active, product.marketing_expense, product.salary_expense, product.created_at, product.updated_at 
FROM product 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:34,449 INFO sqlalchemy.engine.Engine [cached since 6.617s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/products/ HTTP/1.1" 200 OK
2026-02-21 22:58:34,450 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:35,833 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:35,834 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:35,834 INFO sqlalchemy.engine.Engine [cached since 8.014s ago] (1,)
2026-02-21 22:58:35,836 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 22:58:35,836 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ()
INFO:     127.0.0.1:57975 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 22:58:35,838 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:35,841 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:35,841 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:35,842 INFO sqlalchemy.engine.Engine [cached since 8.022s ago] (1,)
2026-02-21 22:58:35,843 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 22:58:35,843 INFO sqlalchemy.engine.Engine [cached since 0.007347s ago] ()
INFO:     127.0.0.1:57975 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 22:58:35,845 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:36,411 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:36,412 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:36,412 INFO sqlalchemy.engine.Engine [cached since 8.592s ago] (1,)
2026-02-21 22:58:36,413 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:36,414 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:36,414 INFO sqlalchemy.engine.Engine [cached since 8.595s ago] (1,)
2026-02-21 22:58:36,416 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:36,416 INFO sqlalchemy.engine.Engine [cached since 7.116s ago] (100, 0)
2026-02-21 22:58:36,417 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:36,418 INFO sqlalchemy.engine.Engine [cached since 6.235s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:36,419 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57977 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 22:58:36,420 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:36,421 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:36,421 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:36,421 INFO sqlalchemy.engine.Engine [cached since 8.602s ago] (1,)
2026-02-21 22:58:36,422 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:36,423 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:36,423 INFO sqlalchemy.engine.Engine [cached since 8.603s ago] (1,)
2026-02-21 22:58:36,424 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:36,424 INFO sqlalchemy.engine.Engine [cached since 7.124s ago] (100, 0)
2026-02-21 22:58:36,425 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:36,425 INFO sqlalchemy.engine.Engine [cached since 6.243s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:36,426 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57977 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 22:58:36,428 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:36,439 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:36,439 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:36,439 INFO sqlalchemy.engine.Engine [cached since 8.62s ago] (1,)
2026-02-21 22:58:36,441 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:36,441 INFO sqlalchemy.engine.Engine [cached since 7.141s ago] (100, 0)
INFO:     127.0.0.1:57977 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:36,442 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:36,443 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:36,444 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:36,444 INFO sqlalchemy.engine.Engine [cached since 8.624s ago] (1,)
2026-02-21 22:58:36,445 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:36,445 INFO sqlalchemy.engine.Engine [cached since 7.145s ago] (100, 0)
INFO:     127.0.0.1:57977 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 22:58:36,446 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:37,090 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:37,090 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:37,090 INFO sqlalchemy.engine.Engine [cached since 9.271s ago] (1,)
2026-02-21 22:58:37,092 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:37,092 INFO sqlalchemy.engine.Engine [cached since 6.239s ago] (100, 0)
INFO:     127.0.0.1:57977 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-21 22:58:37,093 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:37,095 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:37,095 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:37,095 INFO sqlalchemy.engine.Engine [cached since 9.276s ago] (1,)
2026-02-21 22:58:37,098 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:37,098 INFO sqlalchemy.engine.Engine [cached since 6.246s ago] (100, 0)
INFO:     127.0.0.1:57977 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-21 22:58:37,100 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57977 - "OPTIONS /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-21 22:58:37,671 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:37,671 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:37,672 INFO sqlalchemy.engine.Engine [cached since 9.852s ago] (1,)
2026-02-21 22:58:37,675 INFO sqlalchemy.engine.Engine SELECT reservation.id, reservation.created_by_id, reservation.customer_name, reservation.med_org_id, reservation.warehouse_id, reservation.date, reservation.validity_date, reservation.status, reservation.total_amount, reservation.description 
FROM reservation ORDER BY reservation.date DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:37,676 INFO sqlalchemy.engine.Engine [generated in 0.00017s] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/sales/reservations/ HTTP/1.1" 200 OK
2026-02-21 22:58:37,683 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:39,333 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:39,333 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:39,333 INFO sqlalchemy.engine.Engine [cached since 11.51s ago] (1,)
2026-02-21 22:58:39,335 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:39,335 INFO sqlalchemy.engine.Engine [cached since 8.482s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-21 22:58:39,336 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 22:58:39,338 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 22:58:39,338 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 22:58:39,338 INFO sqlalchemy.engine.Engine [cached since 11.52s ago] (1,)
2026-02-21 22:58:39,340 INFO sqlalchemy.engine.Engine SELECT manufacturer.id, manufacturer.name, manufacturer.created_at, manufacturer.updated_at 
FROM manufacturer 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 22:58:39,340 INFO sqlalchemy.engine.Engine [cached since 8.487s ago] (100, 0)
INFO:     127.0.0.1:57975 - "GET /api/v1/manufacturers/ HTTP/1.1" 200 OK
2026-02-21 22:58:39,341 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57975 - "OPTIONS /api/v1/domain/payments/invoices/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:57977 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57977 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57977 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57977 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58622 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 23:01:07,805 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:01:07,812 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:01:07,812 INFO sqlalchemy.engine.Engine [cached since 160s ago] (1,)
2026-02-21 23:01:07,869 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 23:01:07,869 INFO sqlalchemy.engine.Engine [cached since 155s ago] (2, 2026)
INFO:     127.0.0.1:58622 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 23:01:07,912 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:01:15,930 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:01:15,930 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:01:15,931 INFO sqlalchemy.engine.Engine [cached since 168.1s ago] (1,)
2026-02-21 23:01:15,937 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-21 23:01:15,937 INFO sqlalchemy.engine.Engine [cached since 163s ago] (2, 2026)
INFO:     127.0.0.1:58624 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-21 23:01:16,108 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:01:24,227 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:01:24,227 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:01:24,228 INFO sqlalchemy.engine.Engine [cached since 176.4s ago] (1,)
2026-02-21 23:01:24,236 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:01:24,236 INFO sqlalchemy.engine.Engine [cached since 172.3s ago] (100, 0)
INFO:     127.0.0.1:58713 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:01:24,248 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:01:24,252 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:01:24,253 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:01:24,253 INFO sqlalchemy.engine.Engine [cached since 176.4s ago] (1,)
2026-02-21 23:01:24,294 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:01:24,295 INFO sqlalchemy.engine.Engine [cached since 172.4s ago] (100, 0)
INFO:     127.0.0.1:58713 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:01:24,307 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58863 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:02:01,902 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:02:01,903 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:02:01,903 INFO sqlalchemy.engine.Engine [cached since 214.1s ago] (1,)
2026-02-21 23:02:01,924 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:02:01,925 INFO sqlalchemy.engine.Engine [generated in 0.00072s] ('adminabdulaziz',)
2026-02-21 23:02:02,561 INFO sqlalchemy.engine.Engine INSERT INTO "user" (full_name, username, hashed_password, is_active, role, manager_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::INTEGER) RETURNING "user".id
2026-02-21 23:02:02,561 INFO sqlalchemy.engine.Engine [generated in 0.00050s] ('Abdulaziz', 'adminabdulaziz', '$2b$12$8lO2uSp4klp/SgAeminzweujFhnFK6krSehDxiHqPi76IDwlsV/Xi', True, <UserRole.PRODUCT_MANAGER: 'product_manager'>, None)
2026-02-21 23:02:02,577 INFO sqlalchemy.engine.Engine COMMIT
2026-02-21 23:02:02,581 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:02:02,584 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:02:02,584 INFO sqlalchemy.engine.Engine [generated in 0.00055s] (11,)
INFO:     127.0.0.1:58863 - "POST /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:02:02,587 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:02:26,279 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:02:26,287 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:02:26,289 INFO sqlalchemy.engine.Engine [cached since 238.5s ago] (1,)
2026-02-21 23:02:26,308 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:02:26,308 INFO sqlalchemy.engine.Engine [cached since 230.5s ago] ()
INFO:     127.0.0.1:58865 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:02:26,319 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:02:26,323 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:02:26,324 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:02:26,324 INFO sqlalchemy.engine.Engine [cached since 238.5s ago] (1,)
2026-02-21 23:02:26,381 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:02:26,381 INFO sqlalchemy.engine.Engine [cached since 230.5s ago] ()
INFO:     127.0.0.1:58865 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:02:26,390 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:03:04,696 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:03:04,698 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:03:04,698 INFO sqlalchemy.engine.Engine [cached since 276.9s ago] (1,)
2026-02-21 23:03:04,707 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:03:04,708 INFO sqlalchemy.engine.Engine [cached since 272.8s ago] (100, 0)
INFO:     127.0.0.1:58967 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:03:04,716 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:03:04,725 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:03:04,726 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:03:04,727 INFO sqlalchemy.engine.Engine [cached since 276.9s ago] (1,)
2026-02-21 23:03:04,733 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:03:04,735 INFO sqlalchemy.engine.Engine [cached since 272.8s ago] (100, 0)
INFO:     127.0.0.1:58967 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:03:04,747 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:03:17,668 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:03:17,669 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:03:17,669 INFO sqlalchemy.engine.Engine [cached since 289.8s ago] (1,)
2026-02-21 23:03:17,673 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:03:17,673 INFO sqlalchemy.engine.Engine [cached since 288.4s ago] (100, 0)
INFO:     127.0.0.1:59178 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:03:17,679 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:03:17,692 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:03:17,693 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:03:17,693 INFO sqlalchemy.engine.Engine [cached since 289.9s ago] (1,)
2026-02-21 23:03:17,699 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:03:17,699 INFO sqlalchemy.engine.Engine [cached since 288.4s ago] (100, 0)
INFO:     127.0.0.1:59180 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:03:17,720 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59310 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:03:49,268 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:03:49,269 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:03:49,269 INFO sqlalchemy.engine.Engine [cached since 321.4s ago] (1,)
2026-02-21 23:03:49,286 INFO sqlalchemy.engine.Engine INSERT INTO region (name) VALUES ($1::VARCHAR) RETURNING region.id
2026-02-21 23:03:49,287 INFO sqlalchemy.engine.Engine [generated in 0.00083s] ('Tashkent City',)
2026-02-21 23:03:49,300 INFO sqlalchemy.engine.Engine COMMIT
2026-02-21 23:03:49,305 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:03:49,312 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-21 23:03:49,312 INFO sqlalchemy.engine.Engine [generated in 0.00054s] (8,)
INFO:     127.0.0.1:59310 - "POST /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:03:49,330 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:03:49,426 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:03:49,427 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:03:49,427 INFO sqlalchemy.engine.Engine [cached since 321.6s ago] (1,)
2026-02-21 23:03:49,435 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:03:49,435 INFO sqlalchemy.engine.Engine [cached since 320.1s ago] (100, 0)
INFO:     127.0.0.1:59310 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:03:49,441 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:04:21,284 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:04:21,287 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:04:21,287 INFO sqlalchemy.engine.Engine [cached since 353.5s ago] (1,)
2026-02-21 23:04:21,291 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:04:21,292 INFO sqlalchemy.engine.Engine [cached since 349.4s ago] (100, 0)
INFO:     127.0.0.1:59312 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:04:21,297 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:04:21,306 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:04:21,307 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:04:21,307 INFO sqlalchemy.engine.Engine [cached since 353.5s ago] (1,)
2026-02-21 23:04:21,318 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:04:21,318 INFO sqlalchemy.engine.Engine [cached since 349.4s ago] (100, 0)
INFO:     127.0.0.1:59312 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:04:21,398 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59660 - "OPTIONS /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:05:13,969 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:05:13,969 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:05:13,969 INFO sqlalchemy.engine.Engine [cached since 406.1s ago] (1,)
2026-02-21 23:05:13,981 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:05:13,981 INFO sqlalchemy.engine.Engine [cached since 406.1s ago] (11,)
2026-02-21 23:05:13,989 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:05:13,989 INFO sqlalchemy.engine.Engine [generated in 0.00049s] (11,)
INFO:     127.0.0.1:59660 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:05:14,004 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:05:14,008 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:05:14,009 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:05:14,009 INFO sqlalchemy.engine.Engine [cached since 406.2s ago] (1,)
2026-02-21 23:05:14,017 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:05:14,017 INFO sqlalchemy.engine.Engine [cached since 406.2s ago] (11,)
2026-02-21 23:05:14,019 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:05:14,020 INFO sqlalchemy.engine.Engine [cached since 0.03062s ago] (11,)
INFO:     127.0.0.1:59660 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:05:14,024 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:06:09,139 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:06:09,140 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:06:09,140 INFO sqlalchemy.engine.Engine [cached since 461.3s ago] (1,)
2026-02-21 23:06:09,144 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:06:09,144 INFO sqlalchemy.engine.Engine [cached since 247.2s ago] ('adminabdulazizffmtest',)
2026-02-21 23:06:09,822 INFO sqlalchemy.engine.Engine INSERT INTO "user" (full_name, username, hashed_password, is_active, role, manager_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::INTEGER) RETURNING "user".id
2026-02-21 23:06:09,822 INFO sqlalchemy.engine.Engine [cached since 247.3s ago] ('FFM Test', 'adminabdulazizffmtest', '$2b$12$Ass2eRzOmg5vXd2yCrj6m.al5247d6tvM6yTmhgxTzpTLLJHZil4u', True, <UserRole.FIELD_FORCE_MANAGER: 'field_force_manager'>, 11)
2026-02-21 23:06:09,828 INFO sqlalchemy.engine.Engine COMMIT
2026-02-21 23:06:09,830 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:06:09,831 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:06:09,831 INFO sqlalchemy.engine.Engine [cached since 247.2s ago] (12,)
INFO:     127.0.0.1:59662 - "POST /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:06:09,835 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:06:09,922 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:06:09,922 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:06:09,922 INFO sqlalchemy.engine.Engine [cached since 462.1s ago] (1,)
2026-02-21 23:06:09,939 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:06:09,939 INFO sqlalchemy.engine.Engine [cached since 462.1s ago] (11,)
2026-02-21 23:06:09,941 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:06:09,941 INFO sqlalchemy.engine.Engine [cached since 55.95s ago] (11,)
INFO:     127.0.0.1:59662 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:06:09,948 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:10:27,302 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:10:27,371 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:10:27,372 INFO sqlalchemy.engine.Engine [cached since 719.5s ago] (1,)
INFO:     127.0.0.1:60967 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:60969 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:10:27,392 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:10:27,393 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:10:27,393 INFO sqlalchemy.engine.Engine [cached since 719.6s ago] (1,)
2026-02-21 23:10:27,439 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:10:27,440 INFO sqlalchemy.engine.Engine [cached since 718.1s ago] (100, 0)
2026-02-21 23:10:27,613 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:10:27,614 INFO sqlalchemy.engine.Engine [cached since 717.4s ago] (100, 0)
INFO:     127.0.0.1:60965 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:10:27,628 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:60967 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:10:27,725 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:10:27,730 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:10:27,732 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:10:27,732 INFO sqlalchemy.engine.Engine [cached since 719.9s ago] (1,)
2026-02-21 23:10:27,782 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:10:27,785 INFO sqlalchemy.engine.Engine [cached since 717.6s ago] (100, 0)
INFO:     127.0.0.1:60967 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:10:27,827 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:10:27,868 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:10:27,869 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:10:27,869 INFO sqlalchemy.engine.Engine [cached since 720s ago] (1,)
2026-02-21 23:10:27,882 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:10:27,882 INFO sqlalchemy.engine.Engine [cached since 718.6s ago] (100, 0)
INFO:     127.0.0.1:60965 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:10:27,890 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:10:28,104 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:10:28,105 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:10:28,105 INFO sqlalchemy.engine.Engine [cached since 720.3s ago] (1,)
2026-02-21 23:10:28,171 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:10:28,172 INFO sqlalchemy.engine.Engine [cached since 718.9s ago] (100, 0)
INFO:     127.0.0.1:60965 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:10:28,174 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:10:28,180 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:10:28,181 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:10:28,182 INFO sqlalchemy.engine.Engine [cached since 720.3s ago] (1,)
2026-02-21 23:10:28,194 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:10:28,194 INFO sqlalchemy.engine.Engine [cached since 718.9s ago] (100, 0)
INFO:     127.0.0.1:60965 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:10:28,198 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:11:52,547 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:11:52,562 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:11:52,563 INFO sqlalchemy.engine.Engine [cached since 804.7s ago] (1,)
INFO:     127.0.0.1:61330 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:11:52,589 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:11:52,590 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:11:52,590 INFO sqlalchemy.engine.Engine [cached since 804.7s ago] (1,)
2026-02-21 23:11:52,611 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:11:52,612 INFO sqlalchemy.engine.Engine [cached since 803.3s ago] (100, 0)
INFO:     127.0.0.1:61328 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:11:52,624 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:11:52,627 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:11:52,628 INFO sqlalchemy.engine.Engine [cached since 796.8s ago] ()
INFO:     127.0.0.1:61330 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:11:52,661 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:61332 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:61393 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:12:05,833 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:12:05,833 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:05,833 INFO sqlalchemy.engine.Engine [cached since 818s ago] (1,)
2026-02-21 23:12:05,836 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:12:05,837 INFO sqlalchemy.engine.Engine [cached since 813.9s ago] (100, 0)
INFO:     127.0.0.1:61332 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:12:05,840 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:12:05,842 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:12:05,842 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:05,842 INFO sqlalchemy.engine.Engine [cached since 818s ago] (1,)
2026-02-21 23:12:05,848 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:12:05,848 INFO sqlalchemy.engine.Engine [cached since 813.9s ago] (100, 0)
INFO:     127.0.0.1:61332 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:12:05,851 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:12:08,573 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:12:08,574 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:08,575 INFO sqlalchemy.engine.Engine [cached since 820.7s ago] (1,)
2026-02-21 23:12:08,602 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:08,602 INFO sqlalchemy.engine.Engine [cached since 820.8s ago] (11,)
2026-02-21 23:12:08,608 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:12:08,609 INFO sqlalchemy.engine.Engine [cached since 414.6s ago] (11,)
INFO:     127.0.0.1:61332 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:12:08,627 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:12:08,642 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:12:08,642 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:08,642 INFO sqlalchemy.engine.Engine [cached since 820.8s ago] (1,)
2026-02-21 23:12:08,753 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:08,753 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] (11,)
2026-02-21 23:12:08,755 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:12:08,755 INFO sqlalchemy.engine.Engine [cached since 414.8s ago] (11,)
INFO:     127.0.0.1:61332 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:12:08,764 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:12:40,831 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:12:40,835 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:40,836 INFO sqlalchemy.engine.Engine [cached since 852.8s ago] (1,)
2026-02-21 23:12:40,847 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:40,847 INFO sqlalchemy.engine.Engine [cached since 852.9s ago] (11,)
2026-02-21 23:12:40,849 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:12:40,850 INFO sqlalchemy.engine.Engine [cached since 446.7s ago] (11,)
INFO:     127.0.0.1:61395 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:12:40,857 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:12:40,859 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:12:40,859 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:40,859 INFO sqlalchemy.engine.Engine [cached since 852.9s ago] (1,)
2026-02-21 23:12:40,863 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:12:40,864 INFO sqlalchemy.engine.Engine [cached since 852.9s ago] (11,)
2026-02-21 23:12:40,865 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:12:40,865 INFO sqlalchemy.engine.Engine [cached since 446.7s ago] (11,)
INFO:     127.0.0.1:61395 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:12:40,868 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62203 - "OPTIONS /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:15:17,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:15:17,921 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:17,922 INFO sqlalchemy.engine.Engine [cached since 1010s ago] (1,)
2026-02-21 23:15:17,950 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:17,951 INFO sqlalchemy.engine.Engine [cached since 1010s ago] (11,)
2026-02-21 23:15:17,963 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:15:17,963 INFO sqlalchemy.engine.Engine [cached since 603.8s ago] (11,)
INFO:     127.0.0.1:62203 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:15:17,979 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62209 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:15:26,371 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:15:26,376 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:26,376 INFO sqlalchemy.engine.Engine [cached since 1018s ago] (1,)
2026-02-21 23:15:26,389 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:15:26,389 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (100, 0)
INFO:     127.0.0.1:62209 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:15:26,393 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62245 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:15:49,335 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:15:49,338 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:49,338 INFO sqlalchemy.engine.Engine [cached since 1041s ago] (1,)
2026-02-21 23:15:49,355 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:15:49,355 INFO sqlalchemy.engine.Engine [cached since 827.3s ago] ('regonal',)
2026-02-21 23:15:49,622 INFO sqlalchemy.engine.Engine INSERT INTO "user" (full_name, username, hashed_password, is_active, role, manager_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::INTEGER) RETURNING "user".id
2026-02-21 23:15:49,622 INFO sqlalchemy.engine.Engine [cached since 826.9s ago] ('Abdulaziz', 'regonal', '$2b$12$2LKVu9Lfr2Cm9t9VghK8eeQ/ddRvXyvS/ox5DfgLuvwOPyz5fKMQ2', True, <UserRole.REGIONAL_MANAGER: 'regional_manager'>, 12)
2026-02-21 23:15:49,629 INFO sqlalchemy.engine.Engine COMMIT
2026-02-21 23:15:49,633 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:15:49,634 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:49,634 INFO sqlalchemy.engine.Engine [cached since 826.9s ago] (13,)
INFO:     127.0.0.1:62245 - "POST /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:15:49,640 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:15:49,645 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:15:49,646 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:49,646 INFO sqlalchemy.engine.Engine [cached since 1042s ago] (1,)
2026-02-21 23:15:49,654 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:49,654 INFO sqlalchemy.engine.Engine [cached since 1042s ago] (11,)
2026-02-21 23:15:49,655 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:15:49,656 INFO sqlalchemy.engine.Engine [cached since 635.5s ago] (11,)
INFO:     127.0.0.1:62245 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:15:49,667 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:15:54,490 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:15:54,491 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:54,491 INFO sqlalchemy.engine.Engine [cached since 1046s ago] (1,)
2026-02-21 23:15:54,499 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:54,499 INFO sqlalchemy.engine.Engine [cached since 1047s ago] (11,)
2026-02-21 23:15:54,500 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:15:54,501 INFO sqlalchemy.engine.Engine [cached since 640.3s ago] (11,)
INFO:     127.0.0.1:62245 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:15:54,503 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:15:54,507 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:15:54,507 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:54,507 INFO sqlalchemy.engine.Engine [cached since 1047s ago] (1,)
2026-02-21 23:15:54,511 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:15:54,511 INFO sqlalchemy.engine.Engine [cached since 1047s ago] (11,)
2026-02-21 23:15:54,526 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:15:54,526 INFO sqlalchemy.engine.Engine [cached since 640.4s ago] (11,)
INFO:     127.0.0.1:62245 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:15:54,533 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:16:09,191 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:09,201 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:09,202 INFO sqlalchemy.engine.Engine [cached since 1061s ago] (1,)
2026-02-21 23:16:09,213 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:09,213 INFO sqlalchemy.engine.Engine [cached since 1061s ago] (11,)
2026-02-21 23:16:09,214 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:16:09,214 INFO sqlalchemy.engine.Engine [cached since 655.1s ago] (11,)
INFO:     127.0.0.1:62355 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:16:09,237 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:16:09,248 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:09,248 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:09,248 INFO sqlalchemy.engine.Engine [cached since 1061s ago] (1,)
2026-02-21 23:16:09,251 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:09,251 INFO sqlalchemy.engine.Engine [cached since 1061s ago] (11,)
2026-02-21 23:16:09,252 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:16:09,252 INFO sqlalchemy.engine.Engine [cached since 655.1s ago] (11,)
INFO:     127.0.0.1:62355 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:16:09,300 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:16:10,128 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:10,128 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:10,128 INFO sqlalchemy.engine.Engine [cached since 1062s ago] (1,)
2026-02-21 23:16:10,131 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:10,132 INFO sqlalchemy.engine.Engine [cached since 1062s ago] (11,)
2026-02-21 23:16:10,133 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:16:10,133 INFO sqlalchemy.engine.Engine [cached since 656s ago] (11,)
INFO:     127.0.0.1:62355 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:16:10,140 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:16:10,145 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:10,145 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:10,145 INFO sqlalchemy.engine.Engine [cached since 1062s ago] (1,)
2026-02-21 23:16:10,149 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:10,150 INFO sqlalchemy.engine.Engine [cached since 1062s ago] (11,)
2026-02-21 23:16:10,152 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:16:10,152 INFO sqlalchemy.engine.Engine [cached since 656s ago] (11,)
INFO:     127.0.0.1:62355 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:16:10,154 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:16:11,055 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:11,056 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:11,056 INFO sqlalchemy.engine.Engine [cached since 1063s ago] (1,)
2026-02-21 23:16:11,059 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:11,059 INFO sqlalchemy.engine.Engine [cached since 1063s ago] (11,)
2026-02-21 23:16:11,061 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:16:11,061 INFO sqlalchemy.engine.Engine [cached since 656.9s ago] (11,)
INFO:     127.0.0.1:62355 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:16:11,064 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:16:11,067 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:11,067 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:11,067 INFO sqlalchemy.engine.Engine [cached since 1063s ago] (1,)
2026-02-21 23:16:11,071 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:11,071 INFO sqlalchemy.engine.Engine [cached since 1063s ago] (11,)
2026-02-21 23:16:11,073 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER
2026-02-21 23:16:11,075 INFO sqlalchemy.engine.Engine [cached since 656.9s ago] (11,)
INFO:     127.0.0.1:62355 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:16:11,095 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:16:13,903 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:13,904 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:13,904 INFO sqlalchemy.engine.Engine [cached since 1066s ago] (1,)
2026-02-21 23:16:13,921 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:16:13,921 INFO sqlalchemy.engine.Engine [cached since 1064s ago] (100, 0)
INFO:     127.0.0.1:62355 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:16:13,931 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:16:20,617 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:20,618 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:20,618 INFO sqlalchemy.engine.Engine [cached since 1073s ago] (1,)
2026-02-21 23:16:20,621 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:16:20,621 INFO sqlalchemy.engine.Engine [cached since 858.5s ago] ('regonal',)
2026-02-21 23:16:20,634 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62501 - "POST /api/v1/users/ HTTP/1.1" 400 Bad Request
2026-02-21 23:16:21,850 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:21,851 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:21,851 INFO sqlalchemy.engine.Engine [cached since 1074s ago] (1,)
2026-02-21 23:16:21,854 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:16:21,854 INFO sqlalchemy.engine.Engine [cached since 859.8s ago] ('regonal',)
2026-02-21 23:16:21,864 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62501 - "POST /api/v1/users/ HTTP/1.1" 400 Bad Request
2026-02-21 23:16:22,486 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:22,487 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:22,487 INFO sqlalchemy.engine.Engine [cached since 1074s ago] (1,)
2026-02-21 23:16:22,488 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:16:22,488 INFO sqlalchemy.engine.Engine [cached since 860.4s ago] ('regonal',)
2026-02-21 23:16:22,510 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62501 - "POST /api/v1/users/ HTTP/1.1" 400 Bad Request
2026-02-21 23:16:22,736 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:22,736 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:22,736 INFO sqlalchemy.engine.Engine [cached since 1075s ago] (1,)
2026-02-21 23:16:22,737 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:16:22,737 INFO sqlalchemy.engine.Engine [cached since 860.6s ago] ('regonal',)
2026-02-21 23:16:22,741 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62501 - "POST /api/v1/users/ HTTP/1.1" 400 Bad Request
2026-02-21 23:16:22,920 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:22,921 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:22,921 INFO sqlalchemy.engine.Engine [cached since 1075s ago] (1,)
2026-02-21 23:16:22,922 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:16:22,922 INFO sqlalchemy.engine.Engine [cached since 860.8s ago] ('regonal',)
2026-02-21 23:16:22,925 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62501 - "POST /api/v1/users/ HTTP/1.1" 400 Bad Request
2026-02-21 23:16:23,070 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:23,071 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:23,071 INFO sqlalchemy.engine.Engine [cached since 1075s ago] (1,)
2026-02-21 23:16:23,072 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:16:23,072 INFO sqlalchemy.engine.Engine [cached since 861s ago] ('regonal',)
2026-02-21 23:16:23,073 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62501 - "POST /api/v1/users/ HTTP/1.1" 400 Bad Request
2026-02-21 23:16:23,723 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:23,724 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:23,724 INFO sqlalchemy.engine.Engine [cached since 1076s ago] (1,)
2026-02-21 23:16:23,728 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:16:23,728 INFO sqlalchemy.engine.Engine [cached since 861.6s ago] ('regonal',)
2026-02-21 23:16:23,729 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62501 - "POST /api/v1/users/ HTTP/1.1" 400 Bad Request
2026-02-21 23:16:53,018 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:16:53,028 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:16:53,029 INFO sqlalchemy.engine.Engine [cached since 1105s ago] (1,)
2026-02-21 23:16:53,043 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:16:53,043 INFO sqlalchemy.engine.Engine [cached since 1104s ago] (100, 0)
INFO:     127.0.0.1:62634 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:16:53,053 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:17:00,125 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:17:00,126 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:17:00,126 INFO sqlalchemy.engine.Engine [cached since 1112s ago] (1,)
2026-02-21 23:17:00,180 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:17:00,180 INFO sqlalchemy.engine.Engine [cached since 898.1s ago] ('regonal',)
2026-02-21 23:17:00,220 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:62670 - "POST /api/v1/users/ HTTP/1.1" 400 Bad Request
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/user_hierarchy.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [25826]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [27308]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-02-21 23:24:32,686 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-21 23:24:32,686 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:24:32,691 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-21 23:24:32,691 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:24:32,692 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-21 23:24:32,692 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:24:32,694 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:24:32,790 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:32,790 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (1,)
2026-02-21 23:24:32,795 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:32,795 INFO sqlalchemy.engine.Engine [cached since 0.005394s ago] (11,)
2026-02-21 23:24:32,797 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER AND "user".role = $2::VARCHAR
2026-02-21 23:24:32,797 INFO sqlalchemy.engine.Engine [generated in 0.00015s] (11, <UserRole.FIELD_FORCE_MANAGER: 'field_force_manager'>)
2026-02-21 23:24:32,800 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:24:32,800 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (<UserRole.REGIONAL_MANAGER: 'regional_manager'>, 12)
2026-02-21 23:24:32,802 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:24:32,802 INFO sqlalchemy.engine.Engine [cached since 0.002256s ago] (<UserRole.MED_REP: 'med_rep'>, 13)
INFO:     127.0.0.1:64550 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:24:32,807 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:24:32,827 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:24:32,828 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:32,828 INFO sqlalchemy.engine.Engine [cached since 0.03823s ago] (1,)
2026-02-21 23:24:32,831 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:32,831 INFO sqlalchemy.engine.Engine [cached since 0.04128s ago] (11,)
2026-02-21 23:24:32,835 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER AND "user".role = $2::VARCHAR
2026-02-21 23:24:32,835 INFO sqlalchemy.engine.Engine [cached since 0.03821s ago] (11, <UserRole.FIELD_FORCE_MANAGER: 'field_force_manager'>)
2026-02-21 23:24:32,837 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:24:32,837 INFO sqlalchemy.engine.Engine [cached since 0.03681s ago] (<UserRole.REGIONAL_MANAGER: 'regional_manager'>, 12)
2026-02-21 23:24:32,838 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:24:32,839 INFO sqlalchemy.engine.Engine [cached since 0.03837s ago] (<UserRole.MED_REP: 'med_rep'>, 13)
INFO:     127.0.0.1:64550 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:24:32,840 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:24:40,036 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:24:40,038 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:40,038 INFO sqlalchemy.engine.Engine [cached since 7.248s ago] (1,)
2026-02-21 23:24:40,046 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:24:40,046 INFO sqlalchemy.engine.Engine [generated in 0.00065s] (100, 0)
INFO:     127.0.0.1:64587 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:24:40,082 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:24:55,465 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:24:55,466 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:55,466 INFO sqlalchemy.engine.Engine [cached since 22.68s ago] (1,)
2026-02-21 23:24:55,468 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".username = $1::VARCHAR
2026-02-21 23:24:55,469 INFO sqlalchemy.engine.Engine [generated in 0.00026s] ('medrep',)
2026-02-21 23:24:55,758 INFO sqlalchemy.engine.Engine INSERT INTO "user" (full_name, username, hashed_password, is_active, role, manager_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::INTEGER) RETURNING "user".id
2026-02-21 23:24:55,758 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('Abdulaziz', 'medrep', '$2b$12$yHWpyUzp12BzMr7n4C3ZhuDM9ub055B2VW/IU7gWnOu6KVWfcI54G', True, <UserRole.MED_REP: 'med_rep'>, 13)
2026-02-21 23:24:55,780 INFO sqlalchemy.engine.Engine COMMIT
2026-02-21 23:24:55,783 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:24:55,784 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:55,785 INFO sqlalchemy.engine.Engine [generated in 0.00013s] (14,)
INFO:     127.0.0.1:64649 - "POST /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:24:55,786 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:24:55,792 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:24:55,792 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:55,792 INFO sqlalchemy.engine.Engine [cached since 23s ago] (1,)
2026-02-21 23:24:55,794 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:24:55,794 INFO sqlalchemy.engine.Engine [cached since 23s ago] (11,)
2026-02-21 23:24:55,798 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER AND "user".role = $2::VARCHAR
2026-02-21 23:24:55,799 INFO sqlalchemy.engine.Engine [cached since 23s ago] (11, <UserRole.FIELD_FORCE_MANAGER: 'field_force_manager'>)
2026-02-21 23:24:55,801 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:24:55,802 INFO sqlalchemy.engine.Engine [cached since 23s ago] (<UserRole.REGIONAL_MANAGER: 'regional_manager'>, 12)
2026-02-21 23:24:55,805 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:24:55,805 INFO sqlalchemy.engine.Engine [cached since 23s ago] (<UserRole.MED_REP: 'med_rep'>, 13)
INFO:     127.0.0.1:64649 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:24:55,808 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64703 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
INFO:     127.0.0.1:64705 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:25:07,125 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:07,126 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:07,128 INFO sqlalchemy.engine.Engine [cached since 34.34s ago] (1,)
2026-02-21 23:25:07,144 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:25:07,144 INFO sqlalchemy.engine.Engine [generated in 0.00038s] ()
INFO:     127.0.0.1:64703 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:25:07,147 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:07,167 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:07,168 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:07,168 INFO sqlalchemy.engine.Engine [cached since 34.38s ago] (1,)
2026-02-21 23:25:07,172 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:25:07,173 INFO sqlalchemy.engine.Engine [cached since 0.02864s ago] ()
INFO:     127.0.0.1:64703 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:25:07,175 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:08,590 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,591 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,591 INFO sqlalchemy.engine.Engine [cached since 35.8s ago] (1,)
2026-02-21 23:25:08,594 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:08,594 INFO sqlalchemy.engine.Engine [generated in 0.00029s] (100, 0)
INFO:     127.0.0.1:64703 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,596 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:08,603 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,604 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,604 INFO sqlalchemy.engine.Engine [cached since 35.81s ago] (1,)
INFO:     127.0.0.1:64705 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,612 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,612 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,612 INFO sqlalchemy.engine.Engine [cached since 35.82s ago] (1,)
2026-02-21 23:25:08,613 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:08,614 INFO sqlalchemy.engine.Engine [cached since 0.01989s ago] (100, 0)
2026-02-21 23:25:08,633 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:08,634 INFO sqlalchemy.engine.Engine [generated in 0.00028s] (100, 0)
INFO:     127.0.0.1:64703 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,635 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64707 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,641 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:08,651 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,651 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,651 INFO sqlalchemy.engine.Engine [cached since 35.86s ago] (1,)
INFO:     127.0.0.1:64703 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,657 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:08,658 INFO sqlalchemy.engine.Engine [cached since 0.02428s ago] (100, 0)
2026-02-21 23:25:08,662 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,663 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,663 INFO sqlalchemy.engine.Engine [cached since 35.87s ago] (1,)
2026-02-21 23:25:08,667 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:08,667 INFO sqlalchemy.engine.Engine [generated in 0.00026s] (100, 0)
INFO:     127.0.0.1:64707 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,676 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64705 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,692 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:08,697 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,697 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,697 INFO sqlalchemy.engine.Engine [cached since 35.91s ago] (1,)
INFO:     127.0.0.1:64707 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:08,703 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:08,703 INFO sqlalchemy.engine.Engine [cached since 0.03574s ago] (100, 0)
2026-02-21 23:25:08,708 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,709 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,709 INFO sqlalchemy.engine.Engine [cached since 35.92s ago] (1,)
2026-02-21 23:25:08,716 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:25:08,717 INFO sqlalchemy.engine.Engine [generated in 0.00066s] (14,)
INFO:     127.0.0.1:64705 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,723 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64703 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:08,746 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:08,750 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,750 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,751 INFO sqlalchemy.engine.Engine [cached since 35.96s ago] (1,)
INFO:     127.0.0.1:64705 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,757 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:25:08,757 INFO sqlalchemy.engine.Engine [cached since 0.04099s ago] (14,)
2026-02-21 23:25:08,762 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,762 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,763 INFO sqlalchemy.engine.Engine [cached since 35.97s ago] (1,)
2026-02-21 23:25:08,771 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:08,772 INFO sqlalchemy.engine.Engine [generated in 0.00076s] (1, 100, 0)
INFO:     127.0.0.1:64703 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:08,776 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64707 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,835 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:08,849 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,849 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,849 INFO sqlalchemy.engine.Engine [cached since 36.06s ago] (1,)
INFO:     127.0.0.1:64703 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:08,855 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:08,855 INFO sqlalchemy.engine.Engine [cached since 0.08428s ago] (1, 100, 0)
2026-02-21 23:25:08,859 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,860 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,860 INFO sqlalchemy.engine.Engine [cached since 36.07s ago] (1,)
2026-02-21 23:25:08,873 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:08,873 INFO sqlalchemy.engine.Engine [generated in 0.00042s] (14, 100, 0)
INFO:     127.0.0.1:64707 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:25:08,877 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64705 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:08,887 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:08,896 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:08,896 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:08,896 INFO sqlalchemy.engine.Engine [cached since 36.11s ago] (1,)
2026-02-21 23:25:08,898 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:08,899 INFO sqlalchemy.engine.Engine [cached since 0.02576s ago] (14, 100, 0)
INFO:     127.0.0.1:64705 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:08,904 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:09,331 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:09,332 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:09,332 INFO sqlalchemy.engine.Engine [cached since 36.54s ago] (1,)
2026-02-21 23:25:09,333 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:09,334 INFO sqlalchemy.engine.Engine [cached since 0.7003s ago] (100, 0)
INFO:     127.0.0.1:64705 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:09,335 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:09,337 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:09,338 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:09,338 INFO sqlalchemy.engine.Engine [cached since 36.55s ago] (1,)
2026-02-21 23:25:09,340 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:09,340 INFO sqlalchemy.engine.Engine [cached since 0.7068s ago] (100, 0)
INFO:     127.0.0.1:64705 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:09,342 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:36,167 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:36,167 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:36,168 INFO sqlalchemy.engine.Engine [cached since 63.38s ago] (1,)
2026-02-21 23:25:36,209 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:25:36,210 INFO sqlalchemy.engine.Engine [cached since 29.06s ago] ()
INFO:     127.0.0.1:64827 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:25:36,248 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:37,728 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,729 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,729 INFO sqlalchemy.engine.Engine [cached since 64.94s ago] (1,)
2026-02-21 23:25:37,731 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:37,731 INFO sqlalchemy.engine.Engine [cached since 29.14s ago] (100, 0)
INFO:     127.0.0.1:64827 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:25:37,735 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:37,737 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,738 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,738 INFO sqlalchemy.engine.Engine [cached since 64.95s ago] (1,)
2026-02-21 23:25:37,771 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:37,771 INFO sqlalchemy.engine.Engine [cached since 29.18s ago] (100, 0)
INFO:     127.0.0.1:64827 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:25:37,773 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:37,786 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,787 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,787 INFO sqlalchemy.engine.Engine [cached since 65s ago] (1,)
2026-02-21 23:25:37,793 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:37,793 INFO sqlalchemy.engine.Engine [cached since 29.16s ago] (100, 0)
INFO:     127.0.0.1:64839 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:37,797 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:37,803 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,803 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,803 INFO sqlalchemy.engine.Engine [cached since 65.01s ago] (1,)
2026-02-21 23:25:37,805 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,805 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,806 INFO sqlalchemy.engine.Engine [cached since 65.01s ago] (1,)
2026-02-21 23:25:37,808 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:37,808 INFO sqlalchemy.engine.Engine [cached since 29.17s ago] (100, 0)
2026-02-21 23:25:37,810 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:37,810 INFO sqlalchemy.engine.Engine [cached since 29.14s ago] (100, 0)
INFO:     127.0.0.1:64839 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:37,811 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64827 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:37,815 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:37,824 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,825 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,825 INFO sqlalchemy.engine.Engine [cached since 65.03s ago] (1,)
2026-02-21 23:25:37,828 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,828 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,829 INFO sqlalchemy.engine.Engine [cached since 65.04s ago] (1,)
2026-02-21 23:25:37,831 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:37,831 INFO sqlalchemy.engine.Engine [cached since 29.16s ago] (100, 0)
2026-02-21 23:25:37,832 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:25:37,832 INFO sqlalchemy.engine.Engine [cached since 29.11s ago] (14,)
INFO:     127.0.0.1:64839 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:37,834 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64827 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:37,842 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:37,847 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,847 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,847 INFO sqlalchemy.engine.Engine [cached since 65.06s ago] (1,)
2026-02-21 23:25:37,849 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,849 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,849 INFO sqlalchemy.engine.Engine [cached since 65.06s ago] (1,)
2026-02-21 23:25:37,852 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:37,852 INFO sqlalchemy.engine.Engine [cached since 29.08s ago] (1, 100, 0)
2026-02-21 23:25:37,854 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:25:37,854 INFO sqlalchemy.engine.Engine [cached since 29.14s ago] (14,)
INFO:     127.0.0.1:64839 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:25:37,863 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64827 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:37,875 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:37,876 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,877 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,878 INFO sqlalchemy.engine.Engine [cached since 65.09s ago] (1,)
2026-02-21 23:25:37,885 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:37,885 INFO sqlalchemy.engine.Engine [cached since 29.01s ago] (14, 100, 0)
INFO:     127.0.0.1:64839 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:37,894 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:37,898 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:37,899 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:37,899 INFO sqlalchemy.engine.Engine [cached since 65.11s ago] (1,)
2026-02-21 23:25:37,905 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:37,905 INFO sqlalchemy.engine.Engine [cached since 29.13s ago] (1, 100, 0)
INFO:     127.0.0.1:64827 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:25:37,911 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:38,338 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:38,338 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:38,338 INFO sqlalchemy.engine.Engine [cached since 65.55s ago] (1,)
2026-02-21 23:25:38,341 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:38,341 INFO sqlalchemy.engine.Engine [cached since 29.71s ago] (100, 0)
INFO:     127.0.0.1:64827 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:38,342 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:38,344 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:38,344 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:38,344 INFO sqlalchemy.engine.Engine [cached since 65.55s ago] (1,)
2026-02-21 23:25:38,345 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:38,345 INFO sqlalchemy.engine.Engine [cached since 29.71s ago] (100, 0)
INFO:     127.0.0.1:64827 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:38,346 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:38,365 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:38,366 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:38,366 INFO sqlalchemy.engine.Engine [cached since 65.57s ago] (1,)
2026-02-21 23:25:38,377 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:38,377 INFO sqlalchemy.engine.Engine [cached since 29.5s ago] (14, 100, 0)
INFO:     127.0.0.1:64827 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:38,379 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:39,452 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:39,453 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:39,453 INFO sqlalchemy.engine.Engine [cached since 66.66s ago] (1,)
2026-02-21 23:25:39,455 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:25:39,455 INFO sqlalchemy.engine.Engine [cached since 32.31s ago] ()
INFO:     127.0.0.1:64827 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:25:39,463 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64899 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,379 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,379 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,379 INFO sqlalchemy.engine.Engine [cached since 76.59s ago] (1,)
2026-02-21 23:25:49,382 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:49,382 INFO sqlalchemy.engine.Engine [cached since 40.79s ago] (100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,385 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,387 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,387 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,387 INFO sqlalchemy.engine.Engine [cached since 76.6s ago] (1,)
2026-02-21 23:25:49,389 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:49,389 INFO sqlalchemy.engine.Engine [cached since 40.79s ago] (100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,392 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,402 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,402 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,402 INFO sqlalchemy.engine.Engine [cached since 76.61s ago] (1,)
2026-02-21 23:25:49,407 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:49,407 INFO sqlalchemy.engine.Engine [cached since 40.77s ago] (100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,409 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,411 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,411 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,411 INFO sqlalchemy.engine.Engine [cached since 76.62s ago] (1,)
2026-02-21 23:25:49,414 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:49,414 INFO sqlalchemy.engine.Engine [cached since 40.78s ago] (100, 0)
2026-02-21 23:25:49,417 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,417 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,417 INFO sqlalchemy.engine.Engine [cached since 76.63s ago] (1,)
INFO:     127.0.0.1:64899 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,421 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,423 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:49,423 INFO sqlalchemy.engine.Engine [cached since 40.76s ago] (100, 0)
INFO:     127.0.0.1:64901 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,425 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,431 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,431 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,431 INFO sqlalchemy.engine.Engine [cached since 76.64s ago] (1,)
2026-02-21 23:25:49,433 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:49,434 INFO sqlalchemy.engine.Engine [cached since 40.77s ago] (100, 0)
2026-02-21 23:25:49,436 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,436 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,436 INFO sqlalchemy.engine.Engine [cached since 76.64s ago] (1,)
INFO:     127.0.0.1:64901 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,437 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,440 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:25:49,440 INFO sqlalchemy.engine.Engine [cached since 40.72s ago] (14,)
INFO:     127.0.0.1:64899 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:49,445 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,447 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,448 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,448 INFO sqlalchemy.engine.Engine [cached since 76.66s ago] (1,)
2026-02-21 23:25:49,450 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:25:49,451 INFO sqlalchemy.engine.Engine [cached since 40.73s ago] (14,)
2026-02-21 23:25:49,452 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,453 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,453 INFO sqlalchemy.engine.Engine [cached since 76.66s ago] (1,)
2026-02-21 23:25:49,455 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:49,455 INFO sqlalchemy.engine.Engine [cached since 40.68s ago] (1, 100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:49,456 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64901 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,458 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,462 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,463 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,463 INFO sqlalchemy.engine.Engine [cached since 76.67s ago] (1,)
2026-02-21 23:25:49,465 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:49,465 INFO sqlalchemy.engine.Engine [cached since 40.69s ago] (1, 100, 0)
2026-02-21 23:25:49,467 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,467 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,467 INFO sqlalchemy.engine.Engine [cached since 76.68s ago] (1,)
INFO:     127.0.0.1:64901 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,469 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,472 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:49,472 INFO sqlalchemy.engine.Engine [cached since 40.6s ago] (14, 100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:49,474 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,476 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,476 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,476 INFO sqlalchemy.engine.Engine [cached since 76.68s ago] (1,)
2026-02-21 23:25:49,478 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:25:49,478 INFO sqlalchemy.engine.Engine [cached since 40.6s ago] (14, 100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:25:49,481 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,894 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,894 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,894 INFO sqlalchemy.engine.Engine [cached since 77.1s ago] (1,)
2026-02-21 23:25:49,896 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:49,896 INFO sqlalchemy.engine.Engine [cached since 41.26s ago] (100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,897 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:49,899 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:49,899 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:49,899 INFO sqlalchemy.engine.Engine [cached since 77.11s ago] (1,)
2026-02-21 23:25:49,901 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:49,901 INFO sqlalchemy.engine.Engine [cached since 41.27s ago] (100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:25:49,902 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64899 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:25:51,175 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:51,176 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:51,176 INFO sqlalchemy.engine.Engine [cached since 78.38s ago] (1,)
2026-02-21 23:25:51,178 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:51,179 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:51,179 INFO sqlalchemy.engine.Engine [cached since 78.39s ago] (1,)
INFO:     127.0.0.1:64911 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:25:51,183 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:51,184 INFO sqlalchemy.engine.Engine [cached since 42.52s ago] (100, 0)
2026-02-21 23:25:51,190 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:51,190 INFO sqlalchemy.engine.Engine [cached since 71.14s ago] (100, 0)
INFO:     127.0.0.1:64901 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:51,192 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:51,194 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:51,195 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:51,195 INFO sqlalchemy.engine.Engine [cached since 78.4s ago] (1,)
INFO:     127.0.0.1:64899 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:25:51,199 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:51,235 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:51,237 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:51,239 INFO sqlalchemy.engine.Engine [cached since 78.45s ago] (1,)
2026-02-21 23:25:51,241 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:51,241 INFO sqlalchemy.engine.Engine [cached since 42.57s ago] (100, 0)
INFO:     127.0.0.1:64901 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:25:51,264 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:51,265 INFO sqlalchemy.engine.Engine [cached since 71.22s ago] (100, 0)
2026-02-21 23:25:51,265 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64899 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:25:51,289 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:51,291 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:51,291 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:51,291 INFO sqlalchemy.engine.Engine [cached since 78.5s ago] (1,)
2026-02-21 23:25:51,293 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:51,293 INFO sqlalchemy.engine.Engine [cached since 71.25s ago] (100, 0)
INFO:     127.0.0.1:64899 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:25:51,302 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:51,305 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:51,305 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:51,305 INFO sqlalchemy.engine.Engine [cached since 78.51s ago] (1,)
2026-02-21 23:25:51,306 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:51,307 INFO sqlalchemy.engine.Engine [cached since 71.26s ago] (100, 0)
INFO:     127.0.0.1:64901 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:25:51,308 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:25:53,554 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:53,557 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:53,557 INFO sqlalchemy.engine.Engine [cached since 80.77s ago] (1,)
2026-02-21 23:25:53,561 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:25:53,562 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:25:53,562 INFO sqlalchemy.engine.Engine [cached since 80.77s ago] (1,)
2026-02-21 23:25:53,566 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:25:53,566 INFO sqlalchemy.engine.Engine [cached since 73.52s ago] (100, 0)
2026-02-21 23:25:53,594 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:25:53,594 INFO sqlalchemy.engine.Engine [cached since 46.45s ago] ()
INFO:     127.0.0.1:64901 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:25:53,606 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64899 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:25:53,652 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:04,152 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:04,152 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:04,153 INFO sqlalchemy.engine.Engine [cached since 91.36s ago] (1,)
2026-02-21 23:26:04,154 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:26:04,155 INFO sqlalchemy.engine.Engine [cached since 57.01s ago] ()
INFO:     127.0.0.1:64913 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:26:04,169 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:04,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:04,176 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:04,177 INFO sqlalchemy.engine.Engine [cached since 91.38s ago] (1,)
2026-02-21 23:26:04,185 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:26:04,185 INFO sqlalchemy.engine.Engine [cached since 57.04s ago] ()
INFO:     127.0.0.1:64913 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:26:04,190 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:05,503 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,504 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,504 INFO sqlalchemy.engine.Engine [cached since 92.71s ago] (1,)
2026-02-21 23:26:05,505 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:26:05,506 INFO sqlalchemy.engine.Engine [cached since 56.91s ago] (100, 0)
INFO:     127.0.0.1:64913 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:26:05,507 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:05,510 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,511 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,511 INFO sqlalchemy.engine.Engine [cached since 92.72s ago] (1,)
2026-02-21 23:26:05,514 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,514 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,514 INFO sqlalchemy.engine.Engine [cached since 92.72s ago] (1,)
2026-02-21 23:26:05,521 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:26:05,521 INFO sqlalchemy.engine.Engine [cached since 56.93s ago] (100, 0)
2026-02-21 23:26:05,525 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:26:05,526 INFO sqlalchemy.engine.Engine [cached since 56.89s ago] (100, 0)
INFO:     127.0.0.1:64913 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:26:05,528 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64972 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:26:05,533 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:05,549 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,549 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,549 INFO sqlalchemy.engine.Engine [cached since 92.76s ago] (1,)
2026-02-21 23:26:05,552 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,553 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,553 INFO sqlalchemy.engine.Engine [cached since 92.76s ago] (1,)
2026-02-21 23:26:05,555 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:26:05,555 INFO sqlalchemy.engine.Engine [cached since 56.92s ago] (100, 0)
2026-02-21 23:26:05,559 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:26:05,559 INFO sqlalchemy.engine.Engine [cached since 56.89s ago] (100, 0)
INFO:     127.0.0.1:64972 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:26:05,564 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64913 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:26:05,570 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:05,574 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,574 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,574 INFO sqlalchemy.engine.Engine [cached since 92.78s ago] (1,)
2026-02-21 23:26:05,577 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,577 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,577 INFO sqlalchemy.engine.Engine [cached since 92.78s ago] (1,)
2026-02-21 23:26:05,583 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:26:05,584 INFO sqlalchemy.engine.Engine [cached since 56.91s ago] (100, 0)
2026-02-21 23:26:05,587 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:26:05,588 INFO sqlalchemy.engine.Engine [cached since 56.87s ago] (14,)
INFO:     127.0.0.1:64913 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:26:05,591 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64972 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:26:05,595 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:05,601 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,602 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,602 INFO sqlalchemy.engine.Engine [cached since 92.81s ago] (1,)
2026-02-21 23:26:05,604 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,607 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,608 INFO sqlalchemy.engine.Engine [cached since 92.82s ago] (1,)
2026-02-21 23:26:05,610 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:26:05,611 INFO sqlalchemy.engine.Engine [cached since 56.89s ago] (14,)
2026-02-21 23:26:05,612 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:26:05,613 INFO sqlalchemy.engine.Engine [cached since 56.84s ago] (1, 100, 0)
INFO:     127.0.0.1:64972 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:26:05,615 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64913 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:26:05,622 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:05,631 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,632 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,632 INFO sqlalchemy.engine.Engine [cached since 92.84s ago] (1,)
2026-02-21 23:26:05,634 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,635 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,637 INFO sqlalchemy.engine.Engine [cached since 92.84s ago] (1,)
2026-02-21 23:26:05,643 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:26:05,644 INFO sqlalchemy.engine.Engine [cached since 56.87s ago] (1, 100, 0)
2026-02-21 23:26:05,646 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:26:05,646 INFO sqlalchemy.engine.Engine [cached since 56.77s ago] (14, 100, 0)
INFO:     127.0.0.1:64913 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:26:05,650 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:64972 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:26:05,664 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:05,667 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:05,667 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:05,667 INFO sqlalchemy.engine.Engine [cached since 92.87s ago] (1,)
2026-02-21 23:26:05,678 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:26:05,679 INFO sqlalchemy.engine.Engine [cached since 56.8s ago] (14, 100, 0)
INFO:     127.0.0.1:64972 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:26:05,682 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:06,098 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:06,099 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:06,099 INFO sqlalchemy.engine.Engine [cached since 93.31s ago] (1,)
2026-02-21 23:26:06,100 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:26:06,101 INFO sqlalchemy.engine.Engine [cached since 57.47s ago] (100, 0)
INFO:     127.0.0.1:64972 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:26:06,102 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:26:06,104 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:26:06,104 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:26:06,104 INFO sqlalchemy.engine.Engine [cached since 93.31s ago] (1,)
2026-02-21 23:26:06,106 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:26:06,106 INFO sqlalchemy.engine.Engine [cached since 57.47s ago] (100, 0)
INFO:     127.0.0.1:64972 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:26:06,109 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,037 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,041 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,041 INFO sqlalchemy.engine.Engine [cached since 448s ago] (1,)
2026-02-21 23:32:01,051 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:01,051 INFO sqlalchemy.engine.Engine [cached since 412.2s ago] (100, 0)
INFO:     127.0.0.1:50077 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,056 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,058 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,058 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,058 INFO sqlalchemy.engine.Engine [cached since 448s ago] (1,)
2026-02-21 23:32:01,061 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,061 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,061 INFO sqlalchemy.engine.Engine [cached since 448s ago] (1,)
2026-02-21 23:32:01,063 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:01,063 INFO sqlalchemy.engine.Engine [cached since 412.2s ago] (100, 0)
INFO:     127.0.0.1:50077 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,065 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,070 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:01,070 INFO sqlalchemy.engine.Engine [cached since 412.2s ago] (100, 0)
INFO:     127.0.0.1:50079 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,072 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,074 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,074 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,074 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,078 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,079 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,079 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,081 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:01,081 INFO sqlalchemy.engine.Engine [cached since 412.2s ago] (100, 0)
2026-02-21 23:32:01,082 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:01,083 INFO sqlalchemy.engine.Engine [cached since 412.2s ago] (100, 0)
INFO:     127.0.0.1:50077 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,084 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50079 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,085 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,092 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,092 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,092 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,093 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,094 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,094 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,097 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:32:01,097 INFO sqlalchemy.engine.Engine [cached since 412.2s ago] (14,)
2026-02-21 23:32:01,098 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:01,098 INFO sqlalchemy.engine.Engine [cached since 412.2s ago] (100, 0)
INFO:     127.0.0.1:50079 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:32:01,099 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50077 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,102 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,105 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,105 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,105 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,108 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,108 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,108 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,111 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:32:01,111 INFO sqlalchemy.engine.Engine [cached since 412.1s ago] (1, 100, 0)
2026-02-21 23:32:01,112 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:32:01,112 INFO sqlalchemy.engine.Engine [cached since 412.2s ago] (14,)
INFO:     127.0.0.1:50079 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:32:01,115 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50077 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,118 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,123 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,124 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,124 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,125 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,126 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,126 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,127 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:32:01,128 INFO sqlalchemy.engine.Engine [cached since 412.1s ago] (1, 100, 0)
2026-02-21 23:32:01,130 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:32:01,130 INFO sqlalchemy.engine.Engine [cached since 412s ago] (14, 100, 0)
INFO:     127.0.0.1:50077 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,131 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50079 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:32:01,136 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,140 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,141 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,141 INFO sqlalchemy.engine.Engine [cached since 448.1s ago] (1,)
2026-02-21 23:32:01,146 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:32:01,146 INFO sqlalchemy.engine.Engine [cached since 412s ago] (14, 100, 0)
INFO:     127.0.0.1:50079 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:32:01,149 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,566 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,566 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,566 INFO sqlalchemy.engine.Engine [cached since 448.6s ago] (1,)
2026-02-21 23:32:01,568 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:01,568 INFO sqlalchemy.engine.Engine [cached since 412.7s ago] (100, 0)
INFO:     127.0.0.1:50079 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,569 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:01,571 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:01,571 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:01,571 INFO sqlalchemy.engine.Engine [cached since 448.6s ago] (1,)
2026-02-21 23:32:01,573 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:01,573 INFO sqlalchemy.engine.Engine [cached since 412.7s ago] (100, 0)
INFO:     127.0.0.1:50079 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:32:01,574 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:24,368 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:24,369 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:24,369 INFO sqlalchemy.engine.Engine [cached since 471.4s ago] (1,)
2026-02-21 23:32:24,371 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:24,372 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:24,372 INFO sqlalchemy.engine.Engine [cached since 471.4s ago] (1,)
2026-02-21 23:32:24,375 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:24,375 INFO sqlalchemy.engine.Engine [cached since 464.1s ago] (100, 0)
2026-02-21 23:32:24,377 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:24,377 INFO sqlalchemy.engine.Engine [cached since 435.5s ago] (100, 0)
INFO:     127.0.0.1:50175 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:32:24,382 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50176 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:32:24,401 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:24,403 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:24,404 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:24,404 INFO sqlalchemy.engine.Engine [cached since 471.4s ago] (1,)
2026-02-21 23:32:24,409 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:24,409 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:24,409 INFO sqlalchemy.engine.Engine [cached since 471.4s ago] (1,)
2026-02-21 23:32:24,416 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:24,416 INFO sqlalchemy.engine.Engine [cached since 435.5s ago] (100, 0)
2026-02-21 23:32:24,417 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:24,417 INFO sqlalchemy.engine.Engine [cached since 464.1s ago] (100, 0)
INFO:     127.0.0.1:50175 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:32:24,420 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50176 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:32:24,424 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:24,486 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:24,486 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:24,487 INFO sqlalchemy.engine.Engine [cached since 471.5s ago] (1,)
2026-02-21 23:32:24,489 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:24,489 INFO sqlalchemy.engine.Engine [cached since 464.2s ago] (100, 0)
INFO:     127.0.0.1:50176 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:32:24,500 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:24,504 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:24,505 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:24,506 INFO sqlalchemy.engine.Engine [cached since 471.5s ago] (1,)
2026-02-21 23:32:24,515 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:24,516 INFO sqlalchemy.engine.Engine [cached since 464.2s ago] (100, 0)
INFO:     127.0.0.1:50176 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:32:24,518 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:32:25,960 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:25,965 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:25,966 INFO sqlalchemy.engine.Engine [cached since 472.9s ago] (1,)
2026-02-21 23:32:25,970 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:32:25,971 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:32:25,972 INFO sqlalchemy.engine.Engine [cached since 473s ago] (1,)
2026-02-21 23:32:26,001 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:32:26,001 INFO sqlalchemy.engine.Engine [cached since 465.7s ago] (100, 0)
2026-02-21 23:32:26,006 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:32:26,007 INFO sqlalchemy.engine.Engine [cached since 438.6s ago] ()
INFO:     127.0.0.1:50176 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:32:26,012 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50175 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:32:26,015 INFO sqlalchemy.engine.Engine ROLLBACK
WARNING:  StatReload detected changes in 'app/models/crm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [27308]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'app/schemas/crm.py'. Reloading...
INFO:     Started server process [27396]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [27400]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:51644 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:38:15,238 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-21 23:38:15,238 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:38:15,243 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-21 23:38:15,243 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:38:15,245 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-21 23:38:15,245 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:38:15,246 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:38:15,379 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:38:15,379 INFO sqlalchemy.engine.Engine [generated in 0.00029s] (1,)
2026-02-21 23:38:15,391 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:38:15,391 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (100, 0)
INFO:     127.0.0.1:51644 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:38:15,395 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51644 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:51646 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:38:15,508 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:38:15,509 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:38:15,509 INFO sqlalchemy.engine.Engine [cached since 0.1305s ago] (1,)
2026-02-21 23:38:15,513 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:38:15,514 INFO sqlalchemy.engine.Engine [generated in 0.00035s] (100, 0)
INFO:     127.0.0.1:51644 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:38:15,519 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:38:15,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:38:15,537 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:38:15,537 INFO sqlalchemy.engine.Engine [cached since 0.1585s ago] (1,)
2026-02-21 23:38:15,541 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:38:15,541 INFO sqlalchemy.engine.Engine [cached since 0.02825s ago] (100, 0)
INFO:     127.0.0.1:51644 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:38:15,566 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:41:49,865 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:41:49,870 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:41:49,870 INFO sqlalchemy.engine.Engine [cached since 214.5s ago] (1,)
2026-02-21 23:41:49,873 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:41:49,874 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:41:49,874 INFO sqlalchemy.engine.Engine [cached since 214.5s ago] (1,)
2026-02-21 23:41:49,888 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:41:49,888 INFO sqlalchemy.engine.Engine [cached since 214.4s ago] (100, 0)
2026-02-21 23:41:49,894 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:41:49,894 INFO sqlalchemy.engine.Engine [cached since 214.5s ago] (100, 0)
INFO:     127.0.0.1:52548 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:41:49,900 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52550 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:41:49,912 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:41:49,914 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:41:49,914 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:41:49,914 INFO sqlalchemy.engine.Engine [cached since 214.5s ago] (1,)
2026-02-21 23:41:49,918 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:41:49,918 INFO sqlalchemy.engine.Engine [cached since 214.5s ago] (100, 0)
INFO:     127.0.0.1:52550 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:41:49,922 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:41:49,938 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:41:49,939 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:41:49,939 INFO sqlalchemy.engine.Engine [cached since 214.6s ago] (1,)
2026-02-21 23:41:49,943 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:41:49,943 INFO sqlalchemy.engine.Engine [cached since 214.4s ago] (100, 0)
INFO:     127.0.0.1:52548 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:41:49,947 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:41:50,008 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:41:50,008 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:41:50,009 INFO sqlalchemy.engine.Engine [cached since 214.6s ago] (1,)
2026-02-21 23:41:50,010 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:41:50,011 INFO sqlalchemy.engine.Engine [cached since 214.5s ago] (100, 0)
INFO:     127.0.0.1:52548 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:41:50,013 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:41:50,015 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:41:50,015 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:41:50,015 INFO sqlalchemy.engine.Engine [cached since 214.6s ago] (1,)
2026-02-21 23:41:50,016 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:41:50,016 INFO sqlalchemy.engine.Engine [cached since 214.5s ago] (100, 0)
INFO:     127.0.0.1:52548 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:41:50,018 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:41:53,394 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:41:53,395 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:41:53,396 INFO sqlalchemy.engine.Engine [cached since 218s ago] (1,)
INFO:     127.0.0.1:52550 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:41:53,420 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:41:53,420 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:41:53,420 INFO sqlalchemy.engine.Engine [cached since 218s ago] (1,)
2026-02-21 23:41:53,439 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:41:53,440 INFO sqlalchemy.engine.Engine [cached since 217.9s ago] (100, 0)
2026-02-21 23:41:53,446 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:41:53,447 INFO sqlalchemy.engine.Engine [generated in 0.00058s] ()
INFO:     127.0.0.1:52548 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:41:53,449 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52550 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:41:53,564 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52571 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:42:27,932 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:27,933 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:27,933 INFO sqlalchemy.engine.Engine [cached since 252.5s ago] (1,)
2026-02-21 23:42:27,962 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id IN ($1::INTEGER)
2026-02-21 23:42:27,963 INFO sqlalchemy.engine.Engine [generated in 0.00154s] (14,)
2026-02-21 23:42:27,989 INFO sqlalchemy.engine.Engine INSERT INTO medicalorganization (name, address, region_id, org_type, brand, director_name, contact_phone) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR) RETURNING medicalorganization.id
2026-02-21 23:42:27,989 INFO sqlalchemy.engine.Engine [generated in 0.00029s] ('Any', '', 8, <MedicalOrganizationType.PHARMACY: 'pharmacy'>, 'HEE', None, '+9988888888')
2026-02-21 23:42:28,001 INFO sqlalchemy.engine.Engine INSERT INTO medrep_organization (user_id, organization_id) VALUES ($1::INTEGER, $2::INTEGER)
2026-02-21 23:42:28,001 INFO sqlalchemy.engine.Engine [generated in 0.00091s] (14, 4)
2026-02-21 23:42:28,005 INFO sqlalchemy.engine.Engine COMMIT
2026-02-21 23:42:28,007 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:28,009 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-21 23:42:28,009 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (4,)
2026-02-21 23:42:28,016 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-21 23:42:28,017 INFO sqlalchemy.engine.Engine [generated in 0.00057s] (4,)
2026-02-21 23:42:28,024 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 23:42:28,024 INFO sqlalchemy.engine.Engine [generated in 0.00035s] (8,)
2026-02-21 23:42:28,036 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-21 23:42:28,036 INFO sqlalchemy.engine.Engine [generated in 0.00036s] (4,)
INFO:     127.0.0.1:52571 - "POST /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:42:28,045 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:28,052 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:28,053 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:28,053 INFO sqlalchemy.engine.Engine [cached since 252.7s ago] (1,)
2026-02-21 23:42:28,055 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:28,055 INFO sqlalchemy.engine.Engine [cached since 252.7s ago] (100, 0)
2026-02-21 23:42:28,058 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 23:42:28,058 INFO sqlalchemy.engine.Engine [cached since 0.03387s ago] (8,)
2026-02-21 23:42:28,059 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-21 23:42:28,059 INFO sqlalchemy.engine.Engine [cached since 0.02364s ago] (4,)
INFO:     127.0.0.1:52571 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:42:28,063 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:28,318 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:28,318 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:28,319 INFO sqlalchemy.engine.Engine [cached since 252.9s ago] (1,)
2026-02-21 23:42:28,320 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:28,320 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:28,320 INFO sqlalchemy.engine.Engine [cached since 252.9s ago] (1,)
2026-02-21 23:42:28,326 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:28,326 INFO sqlalchemy.engine.Engine [cached since 252.8s ago] (100, 0)
2026-02-21 23:42:28,337 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:42:28,338 INFO sqlalchemy.engine.Engine [cached since 34.89s ago] ()
INFO:     127.0.0.1:52571 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:42:28,341 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:28,342 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:28,343 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:28,343 INFO sqlalchemy.engine.Engine [cached since 253s ago] (1,)
INFO:     127.0.0.1:52717 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:42:28,353 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:28,353 INFO sqlalchemy.engine.Engine [cached since 252.8s ago] (100, 0)
2026-02-21 23:42:28,354 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:28,355 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:28,356 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:28,356 INFO sqlalchemy.engine.Engine [cached since 253s ago] (1,)
INFO:     127.0.0.1:52571 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:42:28,360 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:28,362 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:28,362 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:28,363 INFO sqlalchemy.engine.Engine [cached since 253s ago] (1,)
2026-02-21 23:42:28,366 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:42:28,366 INFO sqlalchemy.engine.Engine [cached since 34.92s ago] ()
2026-02-21 23:42:28,367 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:28,367 INFO sqlalchemy.engine.Engine [cached since 252.8s ago] (100, 0)
INFO:     127.0.0.1:52717 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:42:28,369 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52571 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:42:28,372 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:28,374 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:28,374 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:28,374 INFO sqlalchemy.engine.Engine [cached since 253s ago] (1,)
2026-02-21 23:42:28,375 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:28,375 INFO sqlalchemy.engine.Engine [cached since 252.9s ago] (100, 0)
INFO:     127.0.0.1:52571 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:42:28,377 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52571 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:52717 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:42:32,073 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:32,073 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:32,073 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] (1,)
2026-02-21 23:42:32,076 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:32,076 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (100, 0)
INFO:     127.0.0.1:52571 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:42:32,085 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:32,087 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:32,088 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:32,088 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] (1,)
2026-02-21 23:42:32,213 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:32,213 INFO sqlalchemy.engine.Engine [cached since 0.1366s ago] (100, 0)
INFO:     127.0.0.1:52571 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:42:32,218 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52571 - "OPTIONS /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
INFO:     127.0.0.1:52717 - "OPTIONS /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:42:34,560 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:34,561 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:34,561 INFO sqlalchemy.engine.Engine [cached since 259.2s ago] (1,)
2026-02-21 23:42:34,564 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:34,564 INFO sqlalchemy.engine.Engine [cached since 259.2s ago] (11,)
2026-02-21 23:42:34,566 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER AND "user".role = $2::VARCHAR
2026-02-21 23:42:34,566 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (11, <UserRole.FIELD_FORCE_MANAGER: 'field_force_manager'>)
2026-02-21 23:42:34,571 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:42:34,571 INFO sqlalchemy.engine.Engine [generated in 0.00039s] (<UserRole.REGIONAL_MANAGER: 'regional_manager'>, 12)
2026-02-21 23:42:34,574 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:42:34,574 INFO sqlalchemy.engine.Engine [cached since 0.003205s ago] (<UserRole.MED_REP: 'med_rep'>, 13)
INFO:     127.0.0.1:52739 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:42:34,578 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:34,585 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:34,585 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:34,586 INFO sqlalchemy.engine.Engine [cached since 259.2s ago] (1,)
2026-02-21 23:42:34,611 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:34,612 INFO sqlalchemy.engine.Engine [cached since 259.2s ago] (11,)
2026-02-21 23:42:34,615 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id = $1::INTEGER AND "user".role = $2::VARCHAR
2026-02-21 23:42:34,615 INFO sqlalchemy.engine.Engine [cached since 0.04915s ago] (11, <UserRole.FIELD_FORCE_MANAGER: 'field_force_manager'>)
2026-02-21 23:42:34,618 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:42:34,619 INFO sqlalchemy.engine.Engine [cached since 0.04789s ago] (<UserRole.REGIONAL_MANAGER: 'regional_manager'>, 12)
2026-02-21 23:42:34,622 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".manager_id IN ($2::INTEGER) AND "user".role = $1::VARCHAR
2026-02-21 23:42:34,622 INFO sqlalchemy.engine.Engine [cached since 0.05103s ago] (<UserRole.MED_REP: 'med_rep'>, 13)
INFO:     127.0.0.1:52739 - "GET /api/v1/users/11/hierarchy HTTP/1.1" 200 OK
2026-02-21 23:42:34,625 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:40,734 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:40,735 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:40,736 INFO sqlalchemy.engine.Engine [cached since 265.7s ago] (1,)
2026-02-21 23:42:40,738 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:42:40,738 INFO sqlalchemy.engine.Engine [cached since 47.66s ago] ()
INFO:     127.0.0.1:52778 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:42:40,745 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:40,748 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:40,749 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:40,749 INFO sqlalchemy.engine.Engine [cached since 265.7s ago] (1,)
2026-02-21 23:42:40,750 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-21 23:42:40,751 INFO sqlalchemy.engine.Engine [cached since 47.67s ago] ()
INFO:     127.0.0.1:52778 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-21 23:42:40,753 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:41,883 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:41,884 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:41,884 INFO sqlalchemy.engine.Engine [cached since 266.9s ago] (1,)
2026-02-21 23:42:41,885 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:41,885 INFO sqlalchemy.engine.Engine [cached since 10.18s ago] (100, 0)
INFO:     127.0.0.1:52778 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:42:41,887 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:41,890 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:41,890 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:41,890 INFO sqlalchemy.engine.Engine [cached since 266.9s ago] (1,)
INFO:     127.0.0.1:52784 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:42:41,895 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:41,895 INFO sqlalchemy.engine.Engine [cached since 10.19s ago] (100, 0)
2026-02-21 23:42:41,897 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:41,897 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:41,897 INFO sqlalchemy.engine.Engine [cached since 266.9s ago] (1,)
INFO:     127.0.0.1:52778 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-21 23:42:41,898 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:41,920 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:41,920 INFO sqlalchemy.engine.Engine [generated in 0.00051s] (100, 0)
INFO:     127.0.0.1:52784 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:42:41,927 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:41,933 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:41,933 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:41,933 INFO sqlalchemy.engine.Engine [cached since 266.9s ago] (1,)
2026-02-21 23:42:41,935 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:41,935 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:41,935 INFO sqlalchemy.engine.Engine [cached since 266.9s ago] (1,)
2026-02-21 23:42:41,938 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:41,938 INFO sqlalchemy.engine.Engine [cached since 0.01777s ago] (100, 0)
2026-02-21 23:42:41,940 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:41,940 INFO sqlalchemy.engine.Engine [cached since 266.9s ago] (100, 0)
2026-02-21 23:42:41,943 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 23:42:41,944 INFO sqlalchemy.engine.Engine [cached since 14.29s ago] (8,)
INFO:     127.0.0.1:52784 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:42:41,946 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:41,950 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-21 23:42:41,950 INFO sqlalchemy.engine.Engine [cached since 14.28s ago] (4,)
INFO:     127.0.0.1:52778 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:42:41,952 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:41,961 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:41,962 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:41,962 INFO sqlalchemy.engine.Engine [cached since 266.9s ago] (1,)
INFO:     127.0.0.1:52784 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:42:41,966 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:41,966 INFO sqlalchemy.engine.Engine [cached since 266.9s ago] (100, 0)
2026-02-21 23:42:41,972 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:41,972 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:41,973 INFO sqlalchemy.engine.Engine [cached since 267s ago] (1,)
2026-02-21 23:42:41,974 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 23:42:41,975 INFO sqlalchemy.engine.Engine [cached since 14.32s ago] (8,)
2026-02-21 23:42:41,983 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:42:41,983 INFO sqlalchemy.engine.Engine [generated in 0.00033s] (14,)
2026-02-21 23:42:41,985 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-21 23:42:41,985 INFO sqlalchemy.engine.Engine [cached since 14.32s ago] (4,)
INFO:     127.0.0.1:52778 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:42:41,989 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52786 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:42:41,998 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:42,004 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:42,004 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:42,005 INFO sqlalchemy.engine.Engine [cached since 267s ago] (1,)
INFO:     127.0.0.1:52778 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:42:42,015 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:42,015 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:42,016 INFO sqlalchemy.engine.Engine [cached since 267s ago] (1,)
2026-02-21 23:42:42,017 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-21 23:42:42,018 INFO sqlalchemy.engine.Engine [cached since 0.03446s ago] (14,)
2026-02-21 23:42:42,023 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:42:42,024 INFO sqlalchemy.engine.Engine [generated in 0.00044s] (1, 100, 0)
INFO:     127.0.0.1:52786 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:42:42,030 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52784 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:42:42,034 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:42,039 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:42,041 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:42,042 INFO sqlalchemy.engine.Engine [cached since 267s ago] (1,)
INFO:     127.0.0.1:52786 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:42:42,051 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:42,051 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:42,051 INFO sqlalchemy.engine.Engine [cached since 267s ago] (1,)
2026-02-21 23:42:42,055 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:42:42,055 INFO sqlalchemy.engine.Engine [cached since 0.03229s ago] (1, 100, 0)
2026-02-21 23:42:42,068 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:42:42,068 INFO sqlalchemy.engine.Engine [generated in 0.00033s] (14, 100, 0)
INFO:     127.0.0.1:52784 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-21 23:42:42,072 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52778 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:42:42,078 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:42,081 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:42,082 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:42,082 INFO sqlalchemy.engine.Engine [cached since 267.1s ago] (1,)
2026-02-21 23:42:42,088 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:42:42,088 INFO sqlalchemy.engine.Engine [cached since 0.02024s ago] (14, 100, 0)
INFO:     127.0.0.1:52778 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-21 23:42:42,096 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:42,492 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:42,492 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:42,492 INFO sqlalchemy.engine.Engine [cached since 267.5s ago] (1,)
2026-02-21 23:42:42,494 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:42,494 INFO sqlalchemy.engine.Engine [cached since 0.5743s ago] (100, 0)
INFO:     127.0.0.1:52778 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:42:42,495 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:42:42,497 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:42:42,497 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:42:42,497 INFO sqlalchemy.engine.Engine [cached since 267.5s ago] (1,)
2026-02-21 23:42:42,499 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:42:42,499 INFO sqlalchemy.engine.Engine [cached since 0.5795s ago] (100, 0)
INFO:     127.0.0.1:52778 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-21 23:42:42,501 INFO sqlalchemy.engine.Engine ROLLBACK
WARNING:  StatReload detected changes in 'app/schemas/crm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [27400]
WARNING:  StatReload detected changes in 'app/crud/crud_crm.py'. Reloading...
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [27891]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [27894]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/crm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [27894]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [27897]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/crm.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [27897]
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'app/crud/crud_crm.py'. Reloading...
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [27900]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [27901]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:55536 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55539 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55541 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55542 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:53:29,984 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-21 23:53:29,984 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:53:30,074 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-21 23:53:30,074 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:53:30,091 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-21 23:53:30,119 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-21 23:53:30,131 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:53:30,515 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:53:30,515 INFO sqlalchemy.engine.Engine [generated in 0.00098s] (1,)
2026-02-21 23:53:30,516 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:53:30,516 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:53:30,517 INFO sqlalchemy.engine.Engine [cached since 0.002269s ago] (1,)
2026-02-21 23:53:30,537 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:53:30,537 INFO sqlalchemy.engine.Engine [generated in 0.00050s] (100, 0)
2026-02-21 23:53:30,555 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:53:30,555 INFO sqlalchemy.engine.Engine [generated in 0.00044s] (100, 0)
2026-02-21 23:53:30,572 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 23:53:30,572 INFO sqlalchemy.engine.Engine [generated in 0.00077s] (8,)
INFO:     127.0.0.1:55536 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:53:30,581 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:53:30,600 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-21 23:53:30,600 INFO sqlalchemy.engine.Engine [generated in 0.00037s] (4,)
INFO:     127.0.0.1:55544 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:53:30,613 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:53:30,617 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:53:30,618 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:53:30,618 INFO sqlalchemy.engine.Engine [cached since 0.1037s ago] (1,)
2026-02-21 23:53:30,633 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:53:30,637 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:53:30,638 INFO sqlalchemy.engine.Engine [cached since 0.1232s ago] (1,)
2026-02-21 23:53:30,668 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:53:30,674 INFO sqlalchemy.engine.Engine [cached since 0.1193s ago] (100, 0)
2026-02-21 23:53:30,686 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 23:53:30,686 INFO sqlalchemy.engine.Engine [cached since 0.1149s ago] (8,)
2026-02-21 23:53:30,692 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:53:30,694 INFO sqlalchemy.engine.Engine [cached since 0.1569s ago] (100, 0)
2026-02-21 23:53:30,702 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-21 23:53:30,702 INFO sqlalchemy.engine.Engine [cached since 0.1018s ago] (4,)
INFO:     127.0.0.1:55536 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:53:30,708 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:53:30,719 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:53:30,721 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:53:30,721 INFO sqlalchemy.engine.Engine [cached since 0.2067s ago] (1,)
INFO:     127.0.0.1:55544 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-21 23:53:30,724 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:53:30,738 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:53:30,738 INFO sqlalchemy.engine.Engine [cached since 0.2013s ago] (100, 0)
INFO:     127.0.0.1:55536 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:53:30,742 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:53:30,747 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:53:30,748 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:53:30,748 INFO sqlalchemy.engine.Engine [cached since 0.2333s ago] (1,)
2026-02-21 23:53:30,750 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-21 23:53:30,751 INFO sqlalchemy.engine.Engine [cached since 0.2139s ago] (100, 0)
INFO:     127.0.0.1:55536 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-21 23:53:30,756 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55616 - "OPTIONS /api/v1/crm/med-orgs/4/stock HTTP/1.1" 200 OK
INFO:     127.0.0.1:55617 - "OPTIONS /api/v1/crm/doctors/?med_org_id=4 HTTP/1.1" 200 OK
2026-02-21 23:53:45,135 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:53:45,136 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:53:45,136 INFO sqlalchemy.engine.Engine [cached since 14.62s ago] (1,)
2026-02-21 23:53:45,141 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:53:45,142 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:53:45,142 INFO sqlalchemy.engine.Engine [cached since 14.63s ago] (1,)
2026-02-21 23:53:45,257 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.med_org_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:53:45,259 INFO sqlalchemy.engine.Engine [generated in 0.00194s] (4, 100, 0)
2026-02-21 23:53:45,272 INFO sqlalchemy.engine.Engine SELECT warehouse.id, warehouse.name, warehouse.warehouse_type, warehouse.med_org_id, warehouse.created_at, warehouse.updated_at 
FROM warehouse 
WHERE warehouse.med_org_id = $1::INTEGER
2026-02-21 23:53:45,273 INFO sqlalchemy.engine.Engine [generated in 0.00108s] (4,)
INFO:     127.0.0.1:55619 - "GET /api/v1/crm/doctors/?med_org_id=4 HTTP/1.1" 200 OK
2026-02-21 23:53:45,281 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55616 - "GET /api/v1/crm/med-orgs/4/stock HTTP/1.1" 200 OK
2026-02-21 23:53:45,289 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56019 - "OPTIONS /api/v1/crm/med-orgs/4 HTTP/1.1" 200 OK
2026-02-21 23:55:20,065 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:55:20,073 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:55:20,074 INFO sqlalchemy.engine.Engine [cached since 109.6s ago] (1,)
2026-02-21 23:55:20,129 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-21 23:55:20,129 INFO sqlalchemy.engine.Engine [generated in 0.00201s] (4,)
2026-02-21 23:55:20,153 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 23:55:20,153 INFO sqlalchemy.engine.Engine [cached since 109.6s ago] (8,)
2026-02-21 23:55:20,185 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-21 23:55:20,203 INFO sqlalchemy.engine.Engine [cached since 109.6s ago] (4,)
2026-02-21 23:55:20,358 INFO sqlalchemy.engine.Engine UPDATE medicalorganization SET director_name=$1::VARCHAR, contact_phone=$2::VARCHAR WHERE medicalorganization.id = $3::INTEGER
2026-02-21 23:55:20,359 INFO sqlalchemy.engine.Engine [generated in 0.00102s] ('', '+998991234567', 4)
2026-02-21 23:55:20,369 INFO sqlalchemy.engine.Engine COMMIT
2026-02-21 23:55:20,381 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:55:20,385 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-21 23:55:20,386 INFO sqlalchemy.engine.Engine [generated in 0.00054s] (4,)
2026-02-21 23:55:20,398 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id = $1::INTEGER
2026-02-21 23:55:20,398 INFO sqlalchemy.engine.Engine [generated in 0.00036s] (8,)
2026-02-21 23:55:20,420 INFO sqlalchemy.engine.Engine SELECT "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM "user", medrep_organization 
WHERE $1::INTEGER = medrep_organization.organization_id AND "user".id = medrep_organization.user_id
2026-02-21 23:55:20,421 INFO sqlalchemy.engine.Engine [generated in 0.00069s] (4,)
2026-02-21 23:55:20,435 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
WHERE medicalorganization.id = $1::INTEGER
2026-02-21 23:55:20,437 INFO sqlalchemy.engine.Engine [cached since 0.3093s ago] (4,)
2026-02-21 23:55:20,441 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-21 23:55:20,441 INFO sqlalchemy.engine.Engine [cached since 109.9s ago] (8,)
2026-02-21 23:55:20,444 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-21 23:55:20,445 INFO sqlalchemy.engine.Engine [cached since 109.8s ago] (4,)
INFO:     127.0.0.1:56019 - "PUT /api/v1/crm/med-orgs/4 HTTP/1.1" 200 OK
2026-02-21 23:55:20,455 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-21 23:58:30,353 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:58:30,364 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:58:30,365 INFO sqlalchemy.engine.Engine [cached since 299.9s ago] (1,)
2026-02-21 23:58:30,373 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-21 23:58:30,374 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-21 23:58:30,375 INFO sqlalchemy.engine.Engine [cached since 299.9s ago] (1,)
2026-02-21 23:58:30,401 INFO sqlalchemy.engine.Engine SELECT warehouse.id, warehouse.name, warehouse.warehouse_type, warehouse.med_org_id, warehouse.created_at, warehouse.updated_at 
FROM warehouse 
WHERE warehouse.med_org_id = $1::INTEGER
2026-02-21 23:58:30,401 INFO sqlalchemy.engine.Engine [cached since 285.1s ago] (4,)
2026-02-21 23:58:30,433 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.med_org_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-21 23:58:30,433 INFO sqlalchemy.engine.Engine [cached since 285.2s ago] (4, 100, 0)
INFO:     127.0.0.1:56815 - "GET /api/v1/crm/med-orgs/4/stock HTTP/1.1" 200 OK
2026-02-21 23:58:30,619 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56816 - "GET /api/v1/crm/doctors/?med_org_id=4 HTTP/1.1" 200 OK
2026-02-21 23:58:30,645 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57329 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
INFO:     127.0.0.1:57331 - "OPTIONS /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-22 00:00:31,697 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:31,700 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:31,700 INFO sqlalchemy.engine.Engine [cached since 421.2s ago] (1,)
2026-02-22 00:00:31,725 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-22 00:00:31,725 INFO sqlalchemy.engine.Engine [generated in 0.00042s] ()
INFO:     127.0.0.1:57329 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-22 00:00:31,733 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:31,735 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:31,735 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:31,735 INFO sqlalchemy.engine.Engine [cached since 421.2s ago] (1,)
2026-02-22 00:00:31,738 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user"
2026-02-22 00:00:31,738 INFO sqlalchemy.engine.Engine [cached since 0.01387s ago] ()
INFO:     127.0.0.1:57329 - "GET /api/v1/users/med-reps?role=med_rep HTTP/1.1" 200 OK
2026-02-22 00:00:31,741 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57329 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:57331 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,544 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,544 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,544 INFO sqlalchemy.engine.Engine [cached since 422s ago] (1,)
2026-02-22 00:00:32,550 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:00:32,550 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (100, 0)
INFO:     127.0.0.1:57333 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,554 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,558 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,558 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,558 INFO sqlalchemy.engine.Engine [cached since 422s ago] (1,)
INFO:     127.0.0.1:57331 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,565 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,565 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,565 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (1,)
2026-02-22 00:00:32,566 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:00:32,566 INFO sqlalchemy.engine.Engine [cached since 0.01656s ago] (100, 0)
INFO:     127.0.0.1:57333 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,569 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,582 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:00:32,582 INFO sqlalchemy.engine.Engine [generated in 0.00022s] (100, 0)
INFO:     127.0.0.1:57329 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,605 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,608 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,609 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,609 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (1,)
2026-02-22 00:00:32,611 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:00:32,611 INFO sqlalchemy.engine.Engine [cached since 0.0294s ago] (100, 0)
2026-02-22 00:00:32,613 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,613 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,613 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (1,)
INFO:     127.0.0.1:57329 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,615 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,631 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:00:32,631 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (100, 0)
2026-02-22 00:00:32,636 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 00:00:32,636 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (8,)
2026-02-22 00:00:32,639 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 00:00:32,639 INFO sqlalchemy.engine.Engine [cached since 422s ago] (4,)
INFO:     127.0.0.1:57333 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,644 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,647 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,647 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,647 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (1,)
INFO:     127.0.0.1:57329 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:00:32,650 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:00:32,650 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (100, 0)
2026-02-22 00:00:32,655 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,655 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,655 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (1,)
2026-02-22 00:00:32,656 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 00:00:32,656 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (8,)
2026-02-22 00:00:32,673 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 00:00:32,673 INFO sqlalchemy.engine.Engine [generated in 0.00031s] (14,)
2026-02-22 00:00:32,676 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 00:00:32,676 INFO sqlalchemy.engine.Engine [cached since 422.1s ago] (4,)
INFO:     127.0.0.1:57333 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,679 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57331 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:00:32,698 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,701 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,701 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,702 INFO sqlalchemy.engine.Engine [cached since 422.2s ago] (1,)
2026-02-22 00:00:32,703 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 00:00:32,704 INFO sqlalchemy.engine.Engine [cached since 0.03082s ago] (14,)
INFO:     127.0.0.1:57333 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,710 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,711 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,711 INFO sqlalchemy.engine.Engine [cached since 422.2s ago] (1,)
INFO:     127.0.0.1:57331 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:00:32,712 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,721 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:00:32,721 INFO sqlalchemy.engine.Engine [generated in 0.00023s] (1, 100, 0)
INFO:     127.0.0.1:57329 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,732 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,735 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,735 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,735 INFO sqlalchemy.engine.Engine [cached since 422.2s ago] (1,)
INFO:     127.0.0.1:57331 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:00:32,738 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:00:32,738 INFO sqlalchemy.engine.Engine [cached since 0.01684s ago] (1, 100, 0)
2026-02-22 00:00:32,741 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,741 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,741 INFO sqlalchemy.engine.Engine [cached since 422.2s ago] (1,)
2026-02-22 00:00:32,748 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:00:32,748 INFO sqlalchemy.engine.Engine [generated in 0.00018s] (14, 100, 0)
INFO:     127.0.0.1:57329 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,749 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:57333 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:00:32,754 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,756 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,757 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,757 INFO sqlalchemy.engine.Engine [cached since 422.2s ago] (1,)
2026-02-22 00:00:32,759 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:00:32,759 INFO sqlalchemy.engine.Engine [cached since 0.011s ago] (14, 100, 0)
INFO:     127.0.0.1:57333 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:00:32,763 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:32,994 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:32,994 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:32,994 INFO sqlalchemy.engine.Engine [cached since 422.5s ago] (1,)
2026-02-22 00:00:32,997 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:00:32,997 INFO sqlalchemy.engine.Engine [cached since 0.4146s ago] (100, 0)
INFO:     127.0.0.1:57333 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:00:32,998 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:00:33,000 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:00:33,000 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:00:33,000 INFO sqlalchemy.engine.Engine [cached since 422.5s ago] (1,)
2026-02-22 00:00:33,002 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:00:33,002 INFO sqlalchemy.engine.Engine [cached since 0.4203s ago] (100, 0)
INFO:     127.0.0.1:57333 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:00:33,005 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:03:20,137 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:03:20,148 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:03:20,149 INFO sqlalchemy.engine.Engine [cached since 589.4s ago] (1,)
2026-02-22 00:03:20,159 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:03:20,161 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:03:20,162 INFO sqlalchemy.engine.Engine [cached since 589.4s ago] (1,)
2026-02-22 00:03:20,265 INFO sqlalchemy.engine.Engine SELECT warehouse.id, warehouse.name, warehouse.warehouse_type, warehouse.med_org_id, warehouse.created_at, warehouse.updated_at 
FROM warehouse 
WHERE warehouse.med_org_id = $1::INTEGER
2026-02-22 00:03:20,265 INFO sqlalchemy.engine.Engine [cached since 574.8s ago] (4,)
2026-02-22 00:03:20,294 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.med_org_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:03:20,296 INFO sqlalchemy.engine.Engine [cached since 574.8s ago] (4, 100, 0)
INFO:     127.0.0.1:58048 - "GET /api/v1/crm/med-orgs/4/stock HTTP/1.1" 200 OK
2026-02-22 00:03:20,316 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58049 - "GET /api/v1/crm/doctors/?med_org_id=4 HTTP/1.1" 200 OK
2026-02-22 00:03:20,396 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58553 - "OPTIONS /api/v1/crm/med-orgs/4/stock HTTP/1.1" 200 OK
INFO:     127.0.0.1:58555 - "OPTIONS /api/v1/crm/doctors/?med_org_id=4 HTTP/1.1" 200 OK
2026-02-22 00:05:23,623 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:05:23,626 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:05:23,627 INFO sqlalchemy.engine.Engine [cached since 712.9s ago] (1,)
2026-02-22 00:05:23,633 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:05:23,633 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:05:23,633 INFO sqlalchemy.engine.Engine [cached since 712.9s ago] (1,)
2026-02-22 00:05:23,674 INFO sqlalchemy.engine.Engine SELECT warehouse.id, warehouse.name, warehouse.warehouse_type, warehouse.med_org_id, warehouse.created_at, warehouse.updated_at 
FROM warehouse 
WHERE warehouse.med_org_id = $1::INTEGER
2026-02-22 00:05:23,674 INFO sqlalchemy.engine.Engine [cached since 698.2s ago] (4,)
2026-02-22 00:05:23,706 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.med_org_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:05:23,706 INFO sqlalchemy.engine.Engine [cached since 698.2s ago] (4, 100, 0)
INFO:     127.0.0.1:58557 - "GET /api/v1/crm/doctors/?med_org_id=4 HTTP/1.1" 200 OK
2026-02-22 00:05:23,776 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58553 - "GET /api/v1/crm/med-orgs/4/stock HTTP/1.1" 200 OK
2026-02-22 00:05:23,789 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58553 - "OPTIONS /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:58557 - "OPTIONS /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:58555 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:58553 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 00:05:27,853 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:05:27,858 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:05:27,859 INFO sqlalchemy.engine.Engine [cached since 717.1s ago] (1,)
2026-02-22 00:05:27,878 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:05:27,878 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:05:27,879 INFO sqlalchemy.engine.Engine [cached since 717.1s ago] (1,)
2026-02-22 00:05:27,885 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:05:27,886 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:05:27,887 INFO sqlalchemy.engine.Engine [cached since 717.1s ago] (1,)
2026-02-22 00:05:27,980 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:05:27,980 INFO sqlalchemy.engine.Engine [generated in 0.00113s] (100, 0)
2026-02-22 00:05:27,983 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:05:27,983 INFO sqlalchemy.engine.Engine [cached since 717.2s ago] (100, 0)
2026-02-22 00:05:27,988 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:05:27,989 INFO sqlalchemy.engine.Engine [generated in 0.00036s] (100, 0)
2026-02-22 00:05:27,999 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 00:05:27,999 INFO sqlalchemy.engine.Engine [cached since 717.2s ago] (8,)
2026-02-22 00:05:28,007 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 00:05:28,008 INFO sqlalchemy.engine.Engine [cached since 717.2s ago] (4,)
INFO:     127.0.0.1:58575 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 00:05:28,027 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58557 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 00:05:28,031 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:58577 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 00:05:28,037 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:05:28,043 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:05:28,044 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:05:28,044 INFO sqlalchemy.engine.Engine [cached since 717.3s ago] (1,)
2026-02-22 00:05:28,055 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:05:28,055 INFO sqlalchemy.engine.Engine [cached since 717.3s ago] (100, 0)
INFO:     127.0.0.1:58555 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 00:05:28,061 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:44,903 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:44,908 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:44,908 INFO sqlalchemy.engine.Engine [cached since 974.1s ago] (1,)
2026-02-22 00:09:44,912 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:44,913 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:44,913 INFO sqlalchemy.engine.Engine [cached since 974.1s ago] (1,)
2026-02-22 00:09:44,917 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:44,918 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:44,919 INFO sqlalchemy.engine.Engine [cached since 974.2s ago] (1,)
2026-02-22 00:09:44,920 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:44,921 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:44,921 INFO sqlalchemy.engine.Engine [cached since 974.2s ago] (1,)
2026-02-22 00:09:44,942 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:44,943 INFO sqlalchemy.engine.Engine [cached since 974.1s ago] (100, 0)
2026-02-22 00:09:44,945 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:44,946 INFO sqlalchemy.engine.Engine [cached since 257s ago] (100, 0)
2026-02-22 00:09:44,951 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:44,952 INFO sqlalchemy.engine.Engine [cached since 257s ago] (100, 0)
2026-02-22 00:09:44,954 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:44,954 INFO sqlalchemy.engine.Engine [cached since 974.2s ago] (100, 0)
2026-02-22 00:09:44,967 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 00:09:44,967 INFO sqlalchemy.engine.Engine [cached since 974.1s ago] (8,)
INFO:     127.0.0.1:59658 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 00:09:44,974 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59663 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 00:09:44,984 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 00:09:44,984 INFO sqlalchemy.engine.Engine [cached since 974.1s ago] (4,)
2026-02-22 00:09:44,987 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59660 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 00:09:44,994 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59662 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 00:09:45,004 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59710 - "OPTIONS /api/v1/domain/payments/invoices/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59710 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 00:09:54,195 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,199 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,200 INFO sqlalchemy.engine.Engine [cached since 983.3s ago] (1,)
2026-02-22 00:09:54,221 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,221 INFO sqlalchemy.engine.Engine [cached since 561.2s ago] (100, 0)
INFO:     127.0.0.1:59710 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,243 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,246 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,246 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,246 INFO sqlalchemy.engine.Engine [cached since 983.3s ago] (1,)
2026-02-22 00:09:54,256 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,256 INFO sqlalchemy.engine.Engine [cached since 561.3s ago] (100, 0)
2026-02-22 00:09:54,259 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,260 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,260 INFO sqlalchemy.engine.Engine [cached since 983.3s ago] (1,)
2026-02-22 00:09:54,272 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,272 INFO sqlalchemy.engine.Engine [cached since 561.3s ago] (100, 0)
INFO:     127.0.0.1:59714 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,286 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,326 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,327 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,327 INFO sqlalchemy.engine.Engine [cached since 983.4s ago] (1,)
INFO:     127.0.0.1:59710 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,406 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,409 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,409 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,410 INFO sqlalchemy.engine.Engine [cached since 983.5s ago] (1,)
2026-02-22 00:09:54,413 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,413 INFO sqlalchemy.engine.Engine [cached since 983.4s ago] (100, 0)
2026-02-22 00:09:54,414 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,415 INFO sqlalchemy.engine.Engine [cached since 561.4s ago] (100, 0)
2026-02-22 00:09:54,419 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,419 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,419 INFO sqlalchemy.engine.Engine [cached since 983.5s ago] (1,)
INFO:     127.0.0.1:59710 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,428 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 00:09:54,428 INFO sqlalchemy.engine.Engine [cached since 983.4s ago] (8,)
2026-02-22 00:09:54,429 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,430 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,430 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,430 INFO sqlalchemy.engine.Engine [cached since 983.5s ago] (1,)
2026-02-22 00:09:54,435 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,435 INFO sqlalchemy.engine.Engine [cached since 561.4s ago] (100, 0)
2026-02-22 00:09:54,438 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 00:09:54,438 INFO sqlalchemy.engine.Engine [cached since 983.4s ago] (4,)
2026-02-22 00:09:54,440 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,440 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (100, 0)
INFO:     127.0.0.1:59718 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,445 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59710 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,449 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,449 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,450 INFO sqlalchemy.engine.Engine [cached since 983.5s ago] (1,)
2026-02-22 00:09:54,451 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59714 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,458 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59720 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 00:09:54,461 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,461 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,462 INFO sqlalchemy.engine.Engine [cached since 983.5s ago] (1,)
2026-02-22 00:09:54,464 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,464 INFO sqlalchemy.engine.Engine [cached since 561.4s ago] (100, 0)
2026-02-22 00:09:54,492 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,492 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,493 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (1,)
INFO:     127.0.0.1:59718 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,495 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,498 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,499 INFO sqlalchemy.engine.Engine [cached since 983.5s ago] (100, 0)
2026-02-22 00:09:54,505 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,505 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,506 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (1,)
2026-02-22 00:09:54,550 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 00:09:54,550 INFO sqlalchemy.engine.Engine [generated in 0.00090s] (2, 2026)
2026-02-22 00:09:54,552 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 00:09:54,552 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (8,)
2026-02-22 00:09:54,554 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,554 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,555 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (1,)
2026-02-22 00:09:54,558 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,558 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (100, 0)
2026-02-22 00:09:54,560 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 00:09:54,560 INFO sqlalchemy.engine.Engine [cached since 983.5s ago] (4,)
INFO:     127.0.0.1:59718 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,562 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,566 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 00:09:54,566 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (14,)
INFO:     127.0.0.1:59714 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,568 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,569 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,569 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,570 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (1,)
2026-02-22 00:09:54,571 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,571 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (100, 0)
2026-02-22 00:09:54,574 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 00:09:54,574 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (8,)
2026-02-22 00:09:54,575 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 00:09:54,576 INFO sqlalchemy.engine.Engine [cached since 983.5s ago] (4,)
INFO:     127.0.0.1:59714 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,578 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59720 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:09:54,580 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,584 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,585 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,585 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (1,)
2026-02-22 00:09:54,586 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,587 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,587 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (1,)
INFO:     127.0.0.1:59710 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 00:09:54,593 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,596 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:54,596 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (100, 0)
2026-02-22 00:09:54,598 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,598 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,598 INFO sqlalchemy.engine.Engine [cached since 983.7s ago] (1,)
2026-02-22 00:09:54,600 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 00:09:54,600 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (14,)
2026-02-22 00:09:54,602 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 00:09:54,602 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (8,)
2026-02-22 00:09:54,603 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 00:09:54,603 INFO sqlalchemy.engine.Engine [cached since 983.6s ago] (4,)
2026-02-22 00:09:54,609 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:09:54,609 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (1, 100, 0)
INFO:     127.0.0.1:59714 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:59720 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:09:54,614 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,616 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,618 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,620 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,620 INFO sqlalchemy.engine.Engine [cached since 983.7s ago] (1,)
2026-02-22 00:09:54,625 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 00:09:54,625 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (14,)
INFO:     127.0.0.1:59718 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,626 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,629 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,629 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,630 INFO sqlalchemy.engine.Engine [cached since 983.7s ago] (1,)
INFO:     127.0.0.1:59720 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:09:54,632 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,639 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,639 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,639 INFO sqlalchemy.engine.Engine [cached since 983.7s ago] (1,)
2026-02-22 00:09:54,641 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,641 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,642 INFO sqlalchemy.engine.Engine [cached since 983.7s ago] (1,)
2026-02-22 00:09:54,643 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:09:54,643 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (1, 100, 0)
2026-02-22 00:09:54,645 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 00:09:54,645 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (14,)
2026-02-22 00:09:54,648 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:09:54,648 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (14, 100, 0)
INFO:     127.0.0.1:59718 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,650 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59720 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:09:54,653 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59714 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:09:54,656 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,657 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,658 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,658 INFO sqlalchemy.engine.Engine [cached since 983.7s ago] (1,)
2026-02-22 00:09:54,659 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,660 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,660 INFO sqlalchemy.engine.Engine [cached since 983.7s ago] (1,)
2026-02-22 00:09:54,662 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:09:54,662 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (1, 100, 0)
2026-02-22 00:09:54,663 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:09:54,663 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (14, 100, 0)
INFO:     127.0.0.1:59714 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:09:54,667 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59718 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,673 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:54,676 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:54,676 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:54,676 INFO sqlalchemy.engine.Engine [cached since 983.7s ago] (1,)
2026-02-22 00:09:54,677 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:09:54,678 INFO sqlalchemy.engine.Engine [cached since 561.5s ago] (1, 100, 0)
INFO:     127.0.0.1:59718 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 00:09:54,683 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:55,072 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:55,072 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:55,072 INFO sqlalchemy.engine.Engine [cached since 984.1s ago] (1,)
2026-02-22 00:09:55,074 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:55,074 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:55,074 INFO sqlalchemy.engine.Engine [cached since 984.1s ago] (1,)
2026-02-22 00:09:55,088 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:55,088 INFO sqlalchemy.engine.Engine [cached since 562.1s ago] (100, 0)
2026-02-22 00:09:55,098 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:09:55,098 INFO sqlalchemy.engine.Engine [cached since 561.9s ago] (14, 100, 0)
INFO:     127.0.0.1:59714 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:09:55,100 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59718 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:09:55,106 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:55,111 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:55,112 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:55,113 INFO sqlalchemy.engine.Engine [cached since 984.2s ago] (1,)
2026-02-22 00:09:55,226 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:55,226 INFO sqlalchemy.engine.Engine [cached since 562.2s ago] (100, 0)
INFO:     127.0.0.1:59718 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:09:55,666 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:56,321 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:56,321 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:56,321 INFO sqlalchemy.engine.Engine [cached since 985.4s ago] (1,)
2026-02-22 00:09:56,322 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:56,323 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:56,323 INFO sqlalchemy.engine.Engine [cached since 985.4s ago] (1,)
2026-02-22 00:09:56,325 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 00:09:56,325 INFO sqlalchemy.engine.Engine [cached since 563.1s ago] (14, 100, 0)
2026-02-22 00:09:56,326 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:56,326 INFO sqlalchemy.engine.Engine [cached since 563.3s ago] (100, 0)
INFO:     127.0.0.1:59714 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 00:09:56,329 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:59718 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:09:56,330 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 00:09:56,332 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 00:09:56,332 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 00:09:56,332 INFO sqlalchemy.engine.Engine [cached since 985.4s ago] (1,)
2026-02-22 00:09:56,337 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 00:09:56,337 INFO sqlalchemy.engine.Engine [cached since 563.3s ago] (100, 0)
INFO:     127.0.0.1:59718 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 00:09:56,340 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 04:51:08,252 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 04:51:08,260 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 04:51:08,262 INFO sqlalchemy.engine.Engine [cached since 1056s ago] (1,)
2026-02-22 04:51:08,995 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 04:51:08,995 INFO sqlalchemy.engine.Engine [cached since 73.27s ago] (2, 2026)
INFO:     127.0.0.1:60361 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 04:51:09,074 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 06:01:08,765 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 06:01:08,775 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 06:01:08,776 INFO sqlalchemy.engine.Engine [cached since 1090s ago] (1,)
2026-02-22 06:01:09,101 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 06:01:09,101 INFO sqlalchemy.engine.Engine [cached since 106.6s ago] (2, 2026)
INFO:     127.0.0.1:60775 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 06:01:09,227 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:14:18,388 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:14:18,397 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:14:18,398 INFO sqlalchemy.engine.Engine [cached since 1122s ago] (1,)
2026-02-22 07:14:18,483 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:14:18,484 INFO sqlalchemy.engine.Engine [cached since 138.9s ago] (2, 2026)
INFO:     127.0.0.1:61295 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:14:18,547 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:23:36,601 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:23:36,608 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:23:36,609 INFO sqlalchemy.engine.Engine [cached since 1156s ago] (1,)
2026-02-22 07:23:36,658 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:23:36,658 INFO sqlalchemy.engine.Engine [cached since 171.9s ago] (2, 2026)
INFO:     127.0.0.1:61694 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:23:36,817 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63093 - "OPTIONS /api/v1/crm/med-orgs/4/stock HTTP/1.1" 200 OK
INFO:     127.0.0.1:63094 - "OPTIONS /api/v1/crm/doctors/?med_org_id=4 HTTP/1.1" 200 OK
2026-02-22 07:29:09,312 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:09,317 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:09,318 INFO sqlalchemy.engine.Engine [cached since 1488s ago] (1,)
2026-02-22 07:29:09,327 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:09,328 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:09,328 INFO sqlalchemy.engine.Engine [cached since 1488s ago] (1,)
2026-02-22 07:29:09,347 INFO sqlalchemy.engine.Engine SELECT warehouse.id, warehouse.name, warehouse.warehouse_type, warehouse.med_org_id, warehouse.created_at, warehouse.updated_at 
FROM warehouse 
WHERE warehouse.med_org_id = $1::INTEGER
2026-02-22 07:29:09,347 INFO sqlalchemy.engine.Engine [cached since 1473s ago] (4,)
2026-02-22 07:29:09,360 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
WHERE doctor.med_org_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:29:09,361 INFO sqlalchemy.engine.Engine [cached since 1473s ago] (4, 100, 0)
INFO:     127.0.0.1:63094 - "GET /api/v1/crm/doctors/?med_org_id=4 HTTP/1.1" 200 OK
2026-02-22 07:29:09,382 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63093 - "GET /api/v1/crm/med-orgs/4/stock HTTP/1.1" 200 OK
2026-02-22 07:29:09,388 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63093 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63094 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,653 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,653 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,653 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:13,681 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:29:13,681 INFO sqlalchemy.engine.Engine [cached since 1071s ago] (100, 0)
INFO:     127.0.0.1:63100 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,690 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:29:13,693 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,693 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,693 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
INFO:     127.0.0.1:63094 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,695 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,695 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,695 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:13,696 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:29:13,696 INFO sqlalchemy.engine.Engine [cached since 1071s ago] (100, 0)
2026-02-22 07:29:13,698 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:29:13,698 INFO sqlalchemy.engine.Engine [cached since 1070s ago] (100, 0)
INFO:     127.0.0.1:63100 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,761 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63093 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,762 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:29:13,765 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,765 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,765 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
INFO:     127.0.0.1:63100 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,767 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:29:13,767 INFO sqlalchemy.engine.Engine [cached since 1071s ago] (100, 0)
2026-02-22 07:29:13,768 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,768 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,769 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
INFO:     127.0.0.1:63093 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,769 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:29:13,772 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:29:13,772 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (100, 0)
2026-02-22 07:29:13,778 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:29:13,778 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (8,)
2026-02-22 07:29:13,780 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:29:13,780 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (4,)
INFO:     127.0.0.1:63094 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,783 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:29:13,784 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,785 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,785 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
INFO:     127.0.0.1:63093 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:29:13,787 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:29:13,787 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (100, 0)
2026-02-22 07:29:13,789 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,789 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,789 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:13,790 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:29:13,790 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (8,)
2026-02-22 07:29:13,792 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:29:13,792 INFO sqlalchemy.engine.Engine [cached since 1070s ago] (14,)
2026-02-22 07:29:13,793 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:29:13,793 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (4,)
INFO:     127.0.0.1:63100 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:29:13,794 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63100 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,798 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,799 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,799 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
INFO:     127.0.0.1:63094 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,800 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:29:13,802 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:29:13,802 INFO sqlalchemy.engine.Engine [cached since 1070s ago] (1, 100, 0)
2026-02-22 07:29:13,803 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,803 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,803 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:13,804 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:29:13,804 INFO sqlalchemy.engine.Engine [cached since 1071s ago] (14,)
INFO:     127.0.0.1:63093 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,805 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63094 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:29:13,808 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63093 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:29:13,811 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,812 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,812 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:13,813 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,813 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,813 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:13,814 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:29:13,814 INFO sqlalchemy.engine.Engine [cached since 1070s ago] (1, 100, 0)
2026-02-22 07:29:13,816 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:29:13,816 INFO sqlalchemy.engine.Engine [cached since 1070s ago] (14, 100, 0)
INFO:     127.0.0.1:63094 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:29:13,817 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:63100 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:29:13,820 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:29:13,821 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:13,821 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:13,821 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:13,823 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:29:13,823 INFO sqlalchemy.engine.Engine [cached since 1070s ago] (14, 100, 0)
INFO:     127.0.0.1:63100 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:29:13,827 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:29:14,011 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:14,011 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:14,011 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:14,013 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:29:14,013 INFO sqlalchemy.engine.Engine [cached since 1071s ago] (100, 0)
INFO:     127.0.0.1:63100 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:29:14,014 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:29:14,016 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:29:14,016 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:29:14,016 INFO sqlalchemy.engine.Engine [cached since 1493s ago] (1,)
2026-02-22 07:29:14,018 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:29:14,018 INFO sqlalchemy.engine.Engine [cached since 1071s ago] (100, 0)
INFO:     127.0.0.1:63100 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:29:14,020 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52448 - "OPTIONS /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:52450 - "OPTIONS /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:52452 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:52453 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 07:52:16,491 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:52:16,496 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:52:16,497 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (1,)
2026-02-22 07:52:16,508 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:52:16,508 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:52:16,508 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (1,)
2026-02-22 07:52:16,511 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:52:16,511 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:52:16,511 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (1,)
2026-02-22 07:52:16,514 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:52:16,514 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:52:16,514 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (1,)
2026-02-22 07:52:16,537 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:52:16,537 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (100, 0)
2026-02-22 07:52:16,539 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:52:16,539 INFO sqlalchemy.engine.Engine [cached since 2158s ago] (100, 0)
2026-02-22 07:52:16,540 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:52:16,540 INFO sqlalchemy.engine.Engine [cached since 2158s ago] (100, 0)
2026-02-22 07:52:16,543 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:52:16,543 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (100, 0)
2026-02-22 07:52:16,549 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:52:16,549 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (8,)
INFO:     127.0.0.1:52448 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 07:52:16,555 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:52:16,560 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:52:16,560 INFO sqlalchemy.engine.Engine [cached since 2875s ago] (4,)
INFO:     127.0.0.1:52456 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 07:52:16,562 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52450 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 07:52:16,568 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52452 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:52:16,573 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53122 - "OPTIONS /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
INFO:     127.0.0.1:53125 - "OPTIONS /api/v1/domain/payments/invoices/ HTTP/1.1" 200 OK
2026-02-22 07:54:48,600 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:48,603 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:48,604 INFO sqlalchemy.engine.Engine [cached since 3027s ago] (1,)
INFO:     127.0.0.1:53127 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 07:54:48,831 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:54:48,831 INFO sqlalchemy.engine.Engine [cached since 2044s ago] (2, 2026)
INFO:     127.0.0.1:53122 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:54:49,008 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53122 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:53122 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:53122 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:54:55,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:55,170 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:55,170 INFO sqlalchemy.engine.Engine [cached since 3034s ago] (1,)
INFO:     127.0.0.1:53168 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:54:55,916 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:54:55,917 INFO sqlalchemy.engine.Engine [cached since 2613s ago] (100, 0)
INFO:     127.0.0.1:53122 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:54:56,340 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:54:56,368 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:56,369 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:56,369 INFO sqlalchemy.engine.Engine [cached since 3035s ago] (1,)
INFO:     127.0.0.1:53168 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:54:56,393 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:56,393 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:56,394 INFO sqlalchemy.engine.Engine [cached since 3035s ago] (1,)
2026-02-22 07:54:56,435 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:54:56,436 INFO sqlalchemy.engine.Engine [cached since 2613s ago] (100, 0)
2026-02-22 07:54:56,438 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:54:56,438 INFO sqlalchemy.engine.Engine [cached since 2613s ago] (100, 0)
INFO:     127.0.0.1:53122 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:54:56,589 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53170 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:54:56,598 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:54:56,621 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:56,621 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:56,621 INFO sqlalchemy.engine.Engine [cached since 3035s ago] (1,)
2026-02-22 07:54:56,626 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:56,626 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:56,626 INFO sqlalchemy.engine.Engine [cached since 3035s ago] (1,)
2026-02-22 07:54:56,635 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:54:56,635 INFO sqlalchemy.engine.Engine [cached since 2613s ago] (100, 0)
2026-02-22 07:54:56,647 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:54:56,647 INFO sqlalchemy.engine.Engine [cached since 3035s ago] (100, 0)
2026-02-22 07:54:56,745 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:54:56,745 INFO sqlalchemy.engine.Engine [cached since 3035s ago] (8,)
2026-02-22 07:54:56,785 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:54:56,785 INFO sqlalchemy.engine.Engine [cached since 3035s ago] (4,)
INFO:     127.0.0.1:53170 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:54:56,789 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53122 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:54:56,891 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:54:56,897 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:56,898 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:56,898 INFO sqlalchemy.engine.Engine [cached since 3036s ago] (1,)
INFO:     127.0.0.1:53122 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:54:56,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:56,917 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:56,917 INFO sqlalchemy.engine.Engine [cached since 3036s ago] (1,)
2026-02-22 07:54:56,938 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:54:56,938 INFO sqlalchemy.engine.Engine [cached since 2614s ago] (14,)
2026-02-22 07:54:56,943 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:54:56,943 INFO sqlalchemy.engine.Engine [cached since 3036s ago] (100, 0)
INFO:     127.0.0.1:53168 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:54:56,999 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53168 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:54:57,006 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:57,006 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:57,007 INFO sqlalchemy.engine.Engine [cached since 3036s ago] (1,)
2026-02-22 07:54:57,020 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:54:57,021 INFO sqlalchemy.engine.Engine [cached since 2614s ago] (1, 100, 0)
INFO:     127.0.0.1:53122 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:54:57,035 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53122 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:54:57,049 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:57,051 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:57,051 INFO sqlalchemy.engine.Engine [cached since 3036s ago] (1,)
2026-02-22 07:54:57,054 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:54:57,054 INFO sqlalchemy.engine.Engine [cached since 3036s ago] (8,)
2026-02-22 07:54:57,081 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:54:57,081 INFO sqlalchemy.engine.Engine [cached since 2614s ago] (14, 100, 0)
INFO:     127.0.0.1:53168 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:54:57,094 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:54:57,257 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:54:57,257 INFO sqlalchemy.engine.Engine [cached since 3036s ago] (4,)
INFO:     127.0.0.1:53170 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:54:57,758 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:54:58,217 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:58,218 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:58,218 INFO sqlalchemy.engine.Engine [cached since 3037s ago] (1,)
2026-02-22 07:54:58,366 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:54:58,367 INFO sqlalchemy.engine.Engine [cached since 2615s ago] (100, 0)
INFO:     127.0.0.1:53170 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:54:58,380 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:54:58,383 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:58,384 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:58,384 INFO sqlalchemy.engine.Engine [cached since 3037s ago] (1,)
2026-02-22 07:54:58,422 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:54:58,422 INFO sqlalchemy.engine.Engine [cached since 2615s ago] (100, 0)
2026-02-22 07:54:58,739 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:58,739 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:58,739 INFO sqlalchemy.engine.Engine [cached since 3038s ago] (1,)
INFO:     127.0.0.1:53170 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:54:58,824 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:54:59,378 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:54:59,378 INFO sqlalchemy.engine.Engine [cached since 2616s ago] (14,)
INFO:     127.0.0.1:53168 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:54:59,385 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:54:59,952 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:54:59,959 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:54:59,960 INFO sqlalchemy.engine.Engine [cached since 3039s ago] (1,)
2026-02-22 07:54:59,983 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:54:59,983 INFO sqlalchemy.engine.Engine [cached since 2617s ago] (1, 100, 0)
INFO:     127.0.0.1:53168 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:54:59,989 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:55:00,421 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:55:00,422 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:55:00,425 INFO sqlalchemy.engine.Engine [cached since 3039s ago] (1,)
2026-02-22 07:55:00,434 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:55:00,434 INFO sqlalchemy.engine.Engine [cached since 2617s ago] (14, 100, 0)
INFO:     127.0.0.1:53168 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:55:00,458 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:55:23,226 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:55:23,227 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:55:23,227 INFO sqlalchemy.engine.Engine [cached since 3062s ago] (1,)
2026-02-22 07:55:23,230 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:55:23,231 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:55:23,231 INFO sqlalchemy.engine.Engine [cached since 3062s ago] (1,)
2026-02-22 07:55:23,234 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:55:23,234 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:55:23,235 INFO sqlalchemy.engine.Engine [cached since 3062s ago] (1,)
2026-02-22 07:55:23,251 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:55:23,254 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:55:23,254 INFO sqlalchemy.engine.Engine [cached since 3062s ago] (1,)
2026-02-22 07:55:23,336 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:55:23,337 INFO sqlalchemy.engine.Engine [cached since 2345s ago] (100, 0)
2026-02-22 07:55:23,347 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:55:23,347 INFO sqlalchemy.engine.Engine [cached since 3062s ago] (100, 0)
2026-02-22 07:55:23,353 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:55:23,353 INFO sqlalchemy.engine.Engine [cached since 3062s ago] (100, 0)
2026-02-22 07:55:23,382 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:55:23,382 INFO sqlalchemy.engine.Engine [cached since 2345s ago] (100, 0)
2026-02-22 07:55:23,386 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:55:23,386 INFO sqlalchemy.engine.Engine [cached since 3062s ago] (8,)
INFO:     127.0.0.1:53311 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:53305 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 07:55:23,399 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:55:23,399 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:55:23,402 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:55:23,403 INFO sqlalchemy.engine.Engine [cached since 3062s ago] (4,)
INFO:     127.0.0.1:53307 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 07:55:23,409 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53309 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:55:23,415 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:55:26,689 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:55:26,692 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:55:26,692 INFO sqlalchemy.engine.Engine [cached since 3065s ago] (1,)
2026-02-22 07:55:26,710 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:55:26,711 INFO sqlalchemy.engine.Engine [cached since 2082s ago] (2, 2026)
INFO:     127.0.0.1:53307 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:53309 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:55:26,942 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53309 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:53309 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:53309 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 07:57:36,790 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:36,802 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:36,802 INFO sqlalchemy.engine.Engine [cached since 3196s ago] (1,)
INFO:     127.0.0.1:53893 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 07:57:38,059 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:38,059 INFO sqlalchemy.engine.Engine [cached since 2775s ago] (100, 0)
INFO:     127.0.0.1:53887 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:57:38,138 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:38,143 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:38,143 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:38,143 INFO sqlalchemy.engine.Engine [cached since 3197s ago] (1,)
2026-02-22 07:57:38,145 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:38,145 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:38,146 INFO sqlalchemy.engine.Engine [cached since 3197s ago] (1,)
2026-02-22 07:57:38,199 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:38,199 INFO sqlalchemy.engine.Engine [cached since 2775s ago] (100, 0)
INFO:     127.0.0.1:53887 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:57:38,482 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:38,489 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:38,489 INFO sqlalchemy.engine.Engine [cached since 2775s ago] (100, 0)
2026-02-22 07:57:38,505 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:38,505 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:38,505 INFO sqlalchemy.engine.Engine [cached since 3197s ago] (1,)
2026-02-22 07:57:38,578 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:38,582 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:38,583 INFO sqlalchemy.engine.Engine [cached since 3197s ago] (1,)
2026-02-22 07:57:38,745 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:38,746 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (100, 0)
2026-02-22 07:57:38,756 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:57:38,756 INFO sqlalchemy.engine.Engine [cached since 2214s ago] (2, 2026)
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:53899 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:57:38,762 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:38,762 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:38,766 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:38,766 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:38,766 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:38,816 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:38,816 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:38,816 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:38,826 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:38,827 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (100, 0)
2026-02-22 07:57:38,829 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:38,829 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (100, 0)
INFO:     127.0.0.1:53901 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:57:38,849 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:38,861 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:38,863 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:38,864 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:38,864 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
INFO:     127.0.0.1:53887 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:57:38,873 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:38,876 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:38,876 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:38,895 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:38,903 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:38,903 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:38,903 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:38,913 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:38,913 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:39,007 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,092 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,092 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,092 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,129 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:39,129 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (100, 0)
2026-02-22 07:57:39,200 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:57:39,200 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (8,)
2026-02-22 07:57:39,208 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:57:39,209 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (4,)
INFO:     127.0.0.1:53899 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:57:39,258 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,276 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,276 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,276 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,277 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,278 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,278 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,283 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:39,284 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (100, 0)
2026-02-22 07:57:39,287 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:57:39,287 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (14,)
INFO:     127.0.0.1:53893 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:39,297 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,299 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:57:39,299 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (8,)
2026-02-22 07:57:39,301 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,301 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,301 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,302 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:57:39,303 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (4,)
2026-02-22 07:57:39,305 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:39,305 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (1, 100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:57:39,313 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53899 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:57:39,316 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,319 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,320 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,320 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,321 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,321 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,321 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,322 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,322 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,322 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,324 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:39,324 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (100, 0)
2026-02-22 07:57:39,325 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:57:39,325 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (14,)
2026-02-22 07:57:39,328 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:57:39,328 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (8,)
2026-02-22 07:57:39,331 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:39,332 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (14, 100, 0)
INFO:     127.0.0.1:53887 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:39,336 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:57:39,336 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (4,)
2026-02-22 07:57:39,336 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,347 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,347 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,348 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
INFO:     127.0.0.1:53899 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:57:39,349 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,352 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,352 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,353 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,355 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:39,355 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (1, 100, 0)
2026-02-22 07:57:39,356 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,357 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,357 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,359 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:57:39,360 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (14,)
2026-02-22 07:57:39,362 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:39,362 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (100, 0)
INFO:     127.0.0.1:53901 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53887 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:53893 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:39,385 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,389 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,389 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,391 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,391 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,391 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,393 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:57:39,393 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (8,)
2026-02-22 07:57:39,399 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:57:39,399 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (4,)
2026-02-22 07:57:39,402 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:39,402 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (1, 100, 0)
INFO:     127.0.0.1:53899 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:57:39,405 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,422 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,422 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,422 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,424 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:57:39,424 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (14,)
2026-02-22 07:57:39,430 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,431 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,431 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
INFO:     127.0.0.1:53899 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:39,439 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53887 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:57:39,443 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,448 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:39,448 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (14, 100, 0)
2026-02-22 07:57:39,449 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,449 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,450 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,451 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:39,451 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (1, 100, 0)
INFO:     127.0.0.1:53887 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:57:39,461 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53893 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:39,464 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,476 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,476 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,476 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,481 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:39,481 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (14, 100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:39,483 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,491 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,491 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,492 INFO sqlalchemy.engine.Engine [cached since 3198s ago] (1,)
2026-02-22 07:57:39,498 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:39,499 INFO sqlalchemy.engine.Engine [cached since 2776s ago] (14, 100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:39,504 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:39,987 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:39,987 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:39,987 INFO sqlalchemy.engine.Engine [cached since 3199s ago] (1,)
2026-02-22 07:57:40,042 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:40,042 INFO sqlalchemy.engine.Engine [cached since 2777s ago] (100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:40,065 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:40,067 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:40,068 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:40,068 INFO sqlalchemy.engine.Engine [cached since 3199s ago] (1,)
2026-02-22 07:57:40,129 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:40,129 INFO sqlalchemy.engine.Engine [cached since 2777s ago] (100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:40,292 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:41,277 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:41,277 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:41,278 INFO sqlalchemy.engine.Engine [cached since 3200s ago] (1,)
2026-02-22 07:57:41,308 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:41,309 INFO sqlalchemy.engine.Engine [cached since 2778s ago] (100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:41,311 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:41,312 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:41,313 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:41,313 INFO sqlalchemy.engine.Engine [cached since 3200s ago] (1,)
2026-02-22 07:57:41,409 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:41,409 INFO sqlalchemy.engine.Engine [cached since 2778s ago] (100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:41,418 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:44,106 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:44,107 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:44,107 INFO sqlalchemy.engine.Engine [cached since 3203s ago] (1,)
2026-02-22 07:57:44,196 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:57:44,197 INFO sqlalchemy.engine.Engine [cached since 2219s ago] (2, 2026)
INFO:     127.0.0.1:53887 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:53893 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:57:45,294 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53893 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 07:57:49,366 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:49,402 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:49,412 INFO sqlalchemy.engine.Engine [cached since 3208s ago] (1,)
2026-02-22 07:57:49,974 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:49,974 INFO sqlalchemy.engine.Engine [cached since 2787s ago] (100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:57:50,058 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:50,064 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,065 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,066 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (1,)
2026-02-22 07:57:50,108 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,109 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,110 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (1,)
2026-02-22 07:57:50,155 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:50,157 INFO sqlalchemy.engine.Engine [cached since 2787s ago] (100, 0)
2026-02-22 07:57:50,161 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:50,161 INFO sqlalchemy.engine.Engine [cached since 2787s ago] (100, 0)
INFO:     127.0.0.1:53966 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:50,171 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:50,200 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,201 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,201 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (1,)
INFO:     127.0.0.1:53893 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 07:57:50,227 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:50,231 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,231 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,232 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (1,)
2026-02-22 07:57:50,321 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:50,321 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (100, 0)
2026-02-22 07:57:50,328 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:50,329 INFO sqlalchemy.engine.Engine [cached since 2787s ago] (100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:50,398 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:50,444 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:57:50,444 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (8,)
2026-02-22 07:57:50,495 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:57:50,496 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (4,)
INFO:     127.0.0.1:53966 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:57:50,579 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:50,582 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,583 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,583 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (1,)
2026-02-22 07:57:50,600 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,602 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,603 INFO sqlalchemy.engine.Engine [cached since 3209s ago] (1,)
2026-02-22 07:57:50,681 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:50,681 INFO sqlalchemy.engine.Engine [cached since 3210s ago] (100, 0)
2026-02-22 07:57:50,686 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:57:50,686 INFO sqlalchemy.engine.Engine [cached since 2787s ago] (14,)
2026-02-22 07:57:50,702 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:57:50,702 INFO sqlalchemy.engine.Engine [cached since 3210s ago] (8,)
2026-02-22 07:57:50,723 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:57:50,724 INFO sqlalchemy.engine.Engine [cached since 3210s ago] (4,)
INFO:     127.0.0.1:53893 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:50,730 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:50,736 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,737 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,737 INFO sqlalchemy.engine.Engine [cached since 3210s ago] (1,)
2026-02-22 07:57:50,748 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:50,748 INFO sqlalchemy.engine.Engine [cached since 2787s ago] (1, 100, 0)
INFO:     127.0.0.1:53966 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:57:50,771 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:50,779 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,779 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,779 INFO sqlalchemy.engine.Engine [cached since 3210s ago] (1,)
INFO:     127.0.0.1:53893 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:57:50,787 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:50,795 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:50,796 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:50,796 INFO sqlalchemy.engine.Engine [cached since 3210s ago] (1,)
2026-02-22 07:57:50,797 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 07:57:50,797 INFO sqlalchemy.engine.Engine [cached since 2787s ago] (14,)
2026-02-22 07:57:50,836 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:50,837 INFO sqlalchemy.engine.Engine [cached since 2787s ago] (14, 100, 0)
INFO:     127.0.0.1:53893 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:50,849 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53966 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:50,856 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53966 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 07:57:52,719 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:52,720 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:52,720 INFO sqlalchemy.engine.Engine [cached since 3212s ago] (1,)
2026-02-22 07:57:52,870 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:52,870 INFO sqlalchemy.engine.Engine [cached since 2790s ago] (100, 0)
INFO:     127.0.0.1:53966 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:52,889 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:52,892 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:52,893 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:52,893 INFO sqlalchemy.engine.Engine [cached since 3212s ago] (1,)
2026-02-22 07:57:52,901 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:57:52,902 INFO sqlalchemy.engine.Engine [cached since 2790s ago] (100, 0)
INFO:     127.0.0.1:53966 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 07:57:52,906 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:52,956 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:52,957 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:52,957 INFO sqlalchemy.engine.Engine [cached since 3212s ago] (1,)
2026-02-22 07:57:52,966 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:52,966 INFO sqlalchemy.engine.Engine [cached since 2790s ago] (1, 100, 0)
INFO:     127.0.0.1:53966 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 07:57:52,971 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:57:55,658 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:57:55,659 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:57:55,659 INFO sqlalchemy.engine.Engine [cached since 3215s ago] (1,)
2026-02-22 07:57:55,666 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 07:57:55,667 INFO sqlalchemy.engine.Engine [cached since 2792s ago] (14, 100, 0)
INFO:     127.0.0.1:53966 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 07:57:55,671 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54384 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 07:58:42,827 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:58:42,906 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:58:42,930 INFO sqlalchemy.engine.Engine [cached since 3251s ago] (1,)
2026-02-22 07:58:48,950 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:58:48,952 INFO sqlalchemy.engine.Engine [cached since 2273s ago] (2, 2026)
INFO:     127.0.0.1:54386 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:58:48,997 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:58:53,136 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:58:53,137 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:58:53,137 INFO sqlalchemy.engine.Engine [cached since 3261s ago] (1,)
INFO:     127.0.0.1:54439 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54439 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 07:58:59,463 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:58:59,468 INFO sqlalchemy.engine.Engine [cached since 2284s ago] (2, 2026)
INFO:     127.0.0.1:54439 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54386 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:59:01,788 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:59:25,850 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:59:25,878 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:59:25,879 INFO sqlalchemy.engine.Engine [cached since 3294s ago] (1,)
2026-02-22 07:59:25,897 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:59:25,901 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:59:25,901 INFO sqlalchemy.engine.Engine [cached since 3294s ago] (1,)
2026-02-22 07:59:25,907 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:59:25,910 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:59:25,910 INFO sqlalchemy.engine.Engine [cached since 3294s ago] (1,)
2026-02-22 07:59:25,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:59:25,918 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:59:25,918 INFO sqlalchemy.engine.Engine [cached since 3294s ago] (1,)
2026-02-22 07:59:26,140 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:59:26,141 INFO sqlalchemy.engine.Engine [cached since 3294s ago] (100, 0)
2026-02-22 07:59:26,156 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:59:26,157 INFO sqlalchemy.engine.Engine [cached since 3294s ago] (100, 0)
2026-02-22 07:59:26,164 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:59:26,164 INFO sqlalchemy.engine.Engine [cached since 2577s ago] (100, 0)
INFO:     127.0.0.1:54588 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 07:59:26,180 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 07:59:26,180 INFO sqlalchemy.engine.Engine [cached since 2577s ago] (100, 0)
2026-02-22 07:59:26,182 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:59:26,202 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 07:59:26,203 INFO sqlalchemy.engine.Engine [cached since 3294s ago] (8,)
2026-02-22 07:59:26,270 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 07:59:26,309 INFO sqlalchemy.engine.Engine [cached since 3294s ago] (4,)
INFO:     127.0.0.1:54587 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 07:59:26,362 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54585 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 07:59:26,380 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54583 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 07:59:26,516 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 07:59:31,931 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 07:59:31,935 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 07:59:31,935 INFO sqlalchemy.engine.Engine [cached since 3300s ago] (1,)
INFO:     127.0.0.1:54621 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54621 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 07:59:34,378 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 07:59:34,379 INFO sqlalchemy.engine.Engine [cached since 2319s ago] (2, 2026)
INFO:     127.0.0.1:54615 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 07:59:34,460 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54615 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54615 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 08:00:41,265 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:00:41,286 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:00:41,287 INFO sqlalchemy.engine.Engine [cached since 3369s ago] (1,)
INFO:     127.0.0.1:54897 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54897 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 08:00:43,170 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 08:00:43,171 INFO sqlalchemy.engine.Engine [cached since 2387s ago] (2, 2026)
INFO:     127.0.0.1:54891 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 08:00:44,083 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54891 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54891 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 08:01:22,073 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:01:22,087 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:01:22,238 INFO sqlalchemy.engine.Engine [cached since 3410s ago] (1,)
INFO:     127.0.0.1:55071 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 08:01:22,337 INFO sqlalchemy.engine.Engine SELECT sum(doctor_monthly_stat.paid_amount) AS total_revenue, sum(doctor_monthly_stat.bonus_amount) AS total_bonus_accrued, sum(doctor_monthly_stat.paid_quantity) AS total_items_sold 
FROM doctor_monthly_stat 
WHERE doctor_monthly_stat.month = $1::INTEGER AND doctor_monthly_stat.year = $2::INTEGER
2026-02-22 08:01:22,339 INFO sqlalchemy.engine.Engine [cached since 2427s ago] (2, 2026)
INFO:     127.0.0.1:55071 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55069 - "GET /api/v1/domain/analytics/dashboard/global HTTP/1.1" 200 OK
2026-02-22 08:01:23,363 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55069 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55069 - "GET /api/v1/domain/payments/invoices/ HTTP/1.1" 404 Not Found
2026-02-22 08:01:57,089 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:01:57,103 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:01:57,106 INFO sqlalchemy.engine.Engine [cached since 3445s ago] (1,)
2026-02-22 08:01:57,127 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:01:57,131 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:01:57,133 INFO sqlalchemy.engine.Engine [cached since 3445s ago] (1,)
2026-02-22 08:01:57,143 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:01:57,144 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:01:57,145 INFO sqlalchemy.engine.Engine [cached since 3445s ago] (1,)
2026-02-22 08:01:57,153 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:01:57,157 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:01:57,157 INFO sqlalchemy.engine.Engine [cached since 3445s ago] (1,)
2026-02-22 08:01:57,315 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:01:57,315 INFO sqlalchemy.engine.Engine [cached since 3445s ago] (100, 0)
2026-02-22 08:01:57,323 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:01:57,325 INFO sqlalchemy.engine.Engine [cached since 2728s ago] (100, 0)
2026-02-22 08:01:57,332 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:01:57,332 INFO sqlalchemy.engine.Engine [cached since 2728s ago] (100, 0)
INFO:     127.0.0.1:55228 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:01:57,347 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:01:57,367 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:01:57,368 INFO sqlalchemy.engine.Engine [cached since 3445s ago] (100, 0)
INFO:     127.0.0.1:55225 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:01:57,469 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55222 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:01:57,550 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:01:57,869 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:01:57,870 INFO sqlalchemy.engine.Engine [cached since 3446s ago] (8,)
2026-02-22 08:01:58,004 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:01:58,009 INFO sqlalchemy.engine.Engine [cached since 3446s ago] (4,)
INFO:     127.0.0.1:55227 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:01:58,176 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:39,796 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:39,809 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:39,810 INFO sqlalchemy.engine.Engine [cached since 3608s ago] (1,)
2026-02-22 08:04:39,929 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:04:39,930 INFO sqlalchemy.engine.Engine [cached since 3186s ago] (100, 0)
INFO:     127.0.0.1:55311 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:04:39,955 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:39,958 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:39,959 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:39,960 INFO sqlalchemy.engine.Engine [cached since 3608s ago] (1,)
2026-02-22 08:04:39,970 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:04:39,971 INFO sqlalchemy.engine.Engine [cached since 3186s ago] (100, 0)
INFO:     127.0.0.1:55311 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:04:39,977 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:40,240 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:40,244 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:40,245 INFO sqlalchemy.engine.Engine [cached since 3608s ago] (1,)
2026-02-22 08:04:40,291 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:04:40,291 INFO sqlalchemy.engine.Engine [cached since 3186s ago] (100, 0)
INFO:     127.0.0.1:55311 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:04:40,949 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:40,954 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:40,955 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:40,955 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (1,)
INFO:     127.0.0.1:55314 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:04:40,996 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:40,996 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:40,996 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (1,)
2026-02-22 08:04:41,005 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:04:41,005 INFO sqlalchemy.engine.Engine [cached since 3187s ago] (100, 0)
2026-02-22 08:04:41,012 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:04:41,012 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (100, 0)
2026-02-22 08:04:41,049 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:04:41,050 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (8,)
INFO:     127.0.0.1:55311 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:04:41,055 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:41,085 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:04:41,086 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (4,)
INFO:     127.0.0.1:55314 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:04:41,155 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:41,160 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:41,161 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:41,161 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (1,)
2026-02-22 08:04:41,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:41,168 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:41,168 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (1,)
2026-02-22 08:04:41,192 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:04:41,193 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (100, 0)
2026-02-22 08:04:41,206 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:04:41,207 INFO sqlalchemy.engine.Engine [cached since 3187s ago] (14,)
2026-02-22 08:04:41,213 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:04:41,213 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (8,)
2026-02-22 08:04:41,224 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:04:41,224 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (4,)
INFO:     127.0.0.1:55311 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:04:41,233 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:41,251 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:41,251 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:41,253 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (1,)
2026-02-22 08:04:41,265 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:04:41,266 INFO sqlalchemy.engine.Engine [cached since 3187s ago] (1, 100, 0)
INFO:     127.0.0.1:55314 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:04:41,272 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:41,281 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:41,282 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:41,282 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (1,)
2026-02-22 08:04:41,293 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:04:41,293 INFO sqlalchemy.engine.Engine [cached since 3187s ago] (14,)
INFO:     127.0.0.1:55311 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:04:41,328 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:41,344 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:41,345 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:41,345 INFO sqlalchemy.engine.Engine [cached since 3609s ago] (1,)
2026-02-22 08:04:41,384 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:04:41,384 INFO sqlalchemy.engine.Engine [cached since 3187s ago] (14, 100, 0)
INFO:     127.0.0.1:55311 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:04:41,411 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55314 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:04:41,686 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:42,329 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:42,331 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:42,332 INFO sqlalchemy.engine.Engine [cached since 3610s ago] (1,)
2026-02-22 08:04:42,343 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:04:42,343 INFO sqlalchemy.engine.Engine [cached since 3188s ago] (100, 0)
INFO:     127.0.0.1:55314 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:04:42,352 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:42,355 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:42,356 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:42,356 INFO sqlalchemy.engine.Engine [cached since 3610s ago] (1,)
2026-02-22 08:04:42,368 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:04:42,368 INFO sqlalchemy.engine.Engine [cached since 3188s ago] (100, 0)
INFO:     127.0.0.1:55311 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:04:42,381 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:42,470 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:42,471 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:42,471 INFO sqlalchemy.engine.Engine [cached since 3610s ago] (1,)
2026-02-22 08:04:42,499 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:04:42,500 INFO sqlalchemy.engine.Engine [cached since 3188s ago] (1, 100, 0)
INFO:     127.0.0.1:55311 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:04:42,526 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:04:43,679 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:43,680 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:43,680 INFO sqlalchemy.engine.Engine [cached since 3611s ago] (1,)
2026-02-22 08:04:43,755 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:04:43,756 INFO sqlalchemy.engine.Engine [cached since 3189s ago] (14, 100, 0)
INFO:     127.0.0.1:55311 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:04:43,788 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55316 - "OPTIONS /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55324 - "OPTIONS /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:04:59,918 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:59,931 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:59,934 INFO sqlalchemy.engine.Engine [cached since 3628s ago] (1,)
INFO:     127.0.0.1:55328 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:04:59,954 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:59,955 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:59,955 INFO sqlalchemy.engine.Engine [cached since 3628s ago] (1,)
2026-02-22 08:04:59,977 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:59,978 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:59,978 INFO sqlalchemy.engine.Engine [cached since 3628s ago] (1,)
2026-02-22 08:04:59,985 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:04:59,988 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:04:59,988 INFO sqlalchemy.engine.Engine [cached since 3628s ago] (1,)
2026-02-22 08:05:00,075 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:05:00,075 INFO sqlalchemy.engine.Engine [cached since 2911s ago] (100, 0)
2026-02-22 08:05:00,088 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:05:00,088 INFO sqlalchemy.engine.Engine [cached since 3628s ago] (100, 0)
2026-02-22 08:05:00,091 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:05:00,091 INFO sqlalchemy.engine.Engine [cached since 2911s ago] (100, 0)
2026-02-22 08:05:00,094 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:05:00,094 INFO sqlalchemy.engine.Engine [cached since 3628s ago] (100, 0)
INFO:     127.0.0.1:55330 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:05:00,102 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55324 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:05:00,127 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:05:00,140 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:05:00,140 INFO sqlalchemy.engine.Engine [cached since 3628s ago] (8,)
2026-02-22 08:05:00,154 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:05:00,155 INFO sqlalchemy.engine.Engine [cached since 3628s ago] (4,)
INFO:     127.0.0.1:55316 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:05:00,181 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55327 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:05:00,203 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:06:13,932 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:06:13,945 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:06:13,946 INFO sqlalchemy.engine.Engine [cached since 3702s ago] (1,)
2026-02-22 08:06:13,955 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:06:13,956 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:06:13,956 INFO sqlalchemy.engine.Engine [cached since 3702s ago] (1,)
2026-02-22 08:06:13,960 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:06:13,961 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:06:13,961 INFO sqlalchemy.engine.Engine [cached since 3702s ago] (1,)
2026-02-22 08:06:13,965 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:06:13,966 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:06:13,966 INFO sqlalchemy.engine.Engine [cached since 3702s ago] (1,)
2026-02-22 08:06:14,671 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:06:14,671 INFO sqlalchemy.engine.Engine [cached since 2985s ago] (100, 0)
2026-02-22 08:06:14,685 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:06:14,686 INFO sqlalchemy.engine.Engine [cached since 3702s ago] (100, 0)
2026-02-22 08:06:14,689 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:06:14,689 INFO sqlalchemy.engine.Engine [cached since 3702s ago] (100, 0)
2026-02-22 08:06:14,695 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:06:14,696 INFO sqlalchemy.engine.Engine [cached since 2985s ago] (100, 0)
INFO:     127.0.0.1:55350 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:06:14,802 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:06:14,822 INFO sqlalchemy.engine.Engine [cached since 3703s ago] (8,)
INFO:     127.0.0.1:55353 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:06:14,977 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:06:14,980 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55348 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:06:14,990 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:06:15,018 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:06:15,019 INFO sqlalchemy.engine.Engine [cached since 3703s ago] (4,)
INFO:     127.0.0.1:55352 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:06:15,058 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55495 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55497 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:14:29,813 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:29,825 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:29,828 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,213 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:30,214 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (100, 0)
INFO:     127.0.0.1:55495 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,289 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:30,291 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,292 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,293 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,304 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:30,305 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (100, 0)
INFO:     127.0.0.1:55495 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,321 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55495 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55497 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,426 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,426 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,427 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,448 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:30,448 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (100, 0)
INFO:     127.0.0.1:55501 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,454 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:30,462 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,464 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,465 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,473 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,473 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,474 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,516 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:30,517 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (100, 0)
2026-02-22 08:14:30,521 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:30,521 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (100, 0)
2026-02-22 08:14:30,532 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:14:30,533 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (8,)
INFO:     127.0.0.1:55501 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,536 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:30,545 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:14:30,546 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (4,)
INFO:     127.0.0.1:55497 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,555 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:30,559 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,560 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,560 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
INFO:     127.0.0.1:55501 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:14:30,567 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,567 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,567 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,576 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:14:30,576 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (14,)
2026-02-22 08:14:30,579 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:30,580 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (100, 0)
2026-02-22 08:14:30,584 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:14:30,584 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (8,)
INFO:     127.0.0.1:55495 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:14:30,592 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55495 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,599 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:14:30,599 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (4,)
2026-02-22 08:14:30,602 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,603 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,603 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,627 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:14:30,627 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (1, 100, 0)
INFO:     127.0.0.1:55497 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,633 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:30,642 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,643 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,644 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,647 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:14:30,647 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (14,)
INFO:     127.0.0.1:55501 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,649 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55501 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55497 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:14:30,659 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:30,664 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,665 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,665 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,668 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:30,668 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:30,668 INFO sqlalchemy.engine.Engine [cached since 4198s ago] (1,)
2026-02-22 08:14:30,671 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:14:30,672 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (14, 100, 0)
2026-02-22 08:14:30,674 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:14:30,674 INFO sqlalchemy.engine.Engine [cached since 3776s ago] (1, 100, 0)
INFO:     127.0.0.1:55495 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:14:30,677 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55497 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:14:30,681 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:31,051 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:31,052 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:31,052 INFO sqlalchemy.engine.Engine [cached since 4199s ago] (1,)
2026-02-22 08:14:31,056 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:31,057 INFO sqlalchemy.engine.Engine [cached since 3777s ago] (100, 0)
INFO:     127.0.0.1:55497 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:14:31,062 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:31,068 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:31,068 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:31,068 INFO sqlalchemy.engine.Engine [cached since 4199s ago] (1,)
2026-02-22 08:14:31,072 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:31,073 INFO sqlalchemy.engine.Engine [cached since 3777s ago] (100, 0)
INFO:     127.0.0.1:55497 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:14:31,077 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:31,110 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:31,110 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:31,110 INFO sqlalchemy.engine.Engine [cached since 4199s ago] (1,)
2026-02-22 08:14:31,114 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:14:31,115 INFO sqlalchemy.engine.Engine [cached since 3777s ago] (14, 100, 0)
INFO:     127.0.0.1:55497 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:14:31,121 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:47,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:47,546 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:47,547 INFO sqlalchemy.engine.Engine [cached since 4215s ago] (1,)
2026-02-22 08:14:47,551 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:47,552 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:47,552 INFO sqlalchemy.engine.Engine [cached since 4215s ago] (1,)
INFO:     127.0.0.1:55516 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:14:47,556 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:47,557 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:47,557 INFO sqlalchemy.engine.Engine [cached since 4215s ago] (1,)
2026-02-22 08:14:47,561 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:14:47,562 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:14:47,562 INFO sqlalchemy.engine.Engine [cached since 4215s ago] (1,)
2026-02-22 08:14:47,629 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:47,629 INFO sqlalchemy.engine.Engine [cached since 4215s ago] (100, 0)
2026-02-22 08:14:47,631 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:47,632 INFO sqlalchemy.engine.Engine [cached since 4215s ago] (100, 0)
2026-02-22 08:14:47,637 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:47,637 INFO sqlalchemy.engine.Engine [cached since 3498s ago] (100, 0)
2026-02-22 08:14:47,640 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:14:47,640 INFO sqlalchemy.engine.Engine [cached since 3498s ago] (100, 0)
INFO:     127.0.0.1:55514 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:14:47,645 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:14:47,645 INFO sqlalchemy.engine.Engine [cached since 4215s ago] (8,)
2026-02-22 08:14:47,647 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:14:47,659 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:14:47,660 INFO sqlalchemy.engine.Engine [cached since 4215s ago] (4,)
INFO:     127.0.0.1:55517 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:14:47,709 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55516 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:14:47,749 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55511 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:14:47,786 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,325 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,332 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,332 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,359 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:26,360 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (100, 0)
INFO:     127.0.0.1:55573 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,386 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,400 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,401 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,401 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,410 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,413 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,413 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,414 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:26,414 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (100, 0)
INFO:     127.0.0.1:55573 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,419 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,438 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:26,438 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (100, 0)
INFO:     127.0.0.1:55575 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,457 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,462 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,463 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,463 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,464 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,464 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,464 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,469 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:26,470 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (100, 0)
2026-02-22 08:18:26,475 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:26,475 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (100, 0)
2026-02-22 08:18:26,494 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:18:26,494 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (8,)
INFO:     127.0.0.1:55575 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,498 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,502 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:18:26,502 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (4,)
INFO:     127.0.0.1:55573 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,546 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,550 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,552 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,552 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,553 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,554 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,554 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,568 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:18:26,568 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (14,)
2026-02-22 08:18:26,574 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:26,574 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (100, 0)
INFO:     127.0.0.1:55575 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:18:26,579 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,581 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:18:26,581 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (8,)
2026-02-22 08:18:26,584 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,584 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,584 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,590 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:18:26,591 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (1, 100, 0)
2026-02-22 08:18:26,597 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:18:26,597 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (4,)
INFO:     127.0.0.1:55575 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,607 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,611 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,613 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,614 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,620 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:18:26,620 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (14, 100, 0)
INFO:     127.0.0.1:55573 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,627 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,634 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,634 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,634 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
2026-02-22 08:18:26,635 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:18:26,635 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (14,)
INFO:     127.0.0.1:55573 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:18:26,644 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,648 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,648 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,648 INFO sqlalchemy.engine.Engine [cached since 4434s ago] (1,)
INFO:     127.0.0.1:55575 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:18:26,649 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,668 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:18:26,668 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (1, 100, 0)
INFO:     127.0.0.1:55573 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,669 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,913 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,913 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,913 INFO sqlalchemy.engine.Engine [cached since 4435s ago] (1,)
2026-02-22 08:18:26,915 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:26,915 INFO sqlalchemy.engine.Engine [cached since 4013s ago] (100, 0)
INFO:     127.0.0.1:55573 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,918 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,919 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,919 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,919 INFO sqlalchemy.engine.Engine [cached since 4435s ago] (1,)
2026-02-22 08:18:26,921 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:26,921 INFO sqlalchemy.engine.Engine [cached since 4013s ago] (100, 0)
INFO:     127.0.0.1:55573 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:18:26,923 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:26,938 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:26,938 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:26,938 INFO sqlalchemy.engine.Engine [cached since 4435s ago] (1,)
2026-02-22 08:18:26,940 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:18:26,940 INFO sqlalchemy.engine.Engine [cached since 4012s ago] (14, 100, 0)
INFO:     127.0.0.1:55573 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:18:26,943 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55587 - "OPTIONS /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55588 - "OPTIONS /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:18:44,055 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:44,055 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:44,055 INFO sqlalchemy.engine.Engine [cached since 4452s ago] (1,)
2026-02-22 08:18:44,059 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:44,060 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:44,060 INFO sqlalchemy.engine.Engine [cached since 4452s ago] (1,)
INFO:     127.0.0.1:55592 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:18:44,068 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:44,069 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:44,069 INFO sqlalchemy.engine.Engine [cached since 4452s ago] (1,)
2026-02-22 08:18:44,074 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:18:44,075 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:18:44,075 INFO sqlalchemy.engine.Engine [cached since 4452s ago] (1,)
2026-02-22 08:18:44,079 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:44,080 INFO sqlalchemy.engine.Engine [cached since 3735s ago] (100, 0)
2026-02-22 08:18:44,082 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:44,083 INFO sqlalchemy.engine.Engine [cached since 4452s ago] (100, 0)
2026-02-22 08:18:44,100 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:44,101 INFO sqlalchemy.engine.Engine [cached since 3735s ago] (100, 0)
INFO:     127.0.0.1:55587 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:18:44,111 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:44,117 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:18:44,118 INFO sqlalchemy.engine.Engine [cached since 4452s ago] (100, 0)
INFO:     127.0.0.1:55588 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:18:44,122 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55594 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:18:44,126 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:18:44,131 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:18:44,131 INFO sqlalchemy.engine.Engine [cached since 4452s ago] (8,)
2026-02-22 08:18:44,137 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:18:44,137 INFO sqlalchemy.engine.Engine [cached since 4452s ago] (4,)
INFO:     127.0.0.1:55591 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:18:44,153 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:22:52,407 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:22:52,420 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:22:52,421 INFO sqlalchemy.engine.Engine [cached since 4700s ago] (1,)
2026-02-22 08:22:52,430 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:22:52,431 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:22:52,431 INFO sqlalchemy.engine.Engine [cached since 4700s ago] (1,)
2026-02-22 08:22:52,436 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:22:52,436 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:22:52,437 INFO sqlalchemy.engine.Engine [cached since 4700s ago] (1,)
2026-02-22 08:22:52,440 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:22:52,442 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:22:52,442 INFO sqlalchemy.engine.Engine [cached since 4700s ago] (1,)
2026-02-22 08:22:52,737 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:22:52,737 INFO sqlalchemy.engine.Engine [cached since 4700s ago] (100, 0)
2026-02-22 08:22:52,746 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:22:52,762 INFO sqlalchemy.engine.Engine [cached since 3983s ago] (100, 0)
2026-02-22 08:22:52,765 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:22:52,767 INFO sqlalchemy.engine.Engine [cached since 3983s ago] (100, 0)
2026-02-22 08:22:52,790 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:22:52,810 INFO sqlalchemy.engine.Engine [cached since 4701s ago] (8,)
2026-02-22 08:22:52,886 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:22:52,887 INFO sqlalchemy.engine.Engine [cached since 4701s ago] (100, 0)
2026-02-22 08:22:53,032 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:22:53,033 INFO sqlalchemy.engine.Engine [cached since 4701s ago] (4,)
INFO:     127.0.0.1:55648 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:22:53,053 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55645 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:22:53,100 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55642 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:22:53,113 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55646 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:22:53,156 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:29,220 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:29,221 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:29,221 INFO sqlalchemy.engine.Engine [cached since 4737s ago] (1,)
2026-02-22 08:23:29,460 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:29,460 INFO sqlalchemy.engine.Engine [cached since 4315s ago] (100, 0)
INFO:     127.0.0.1:55663 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:23:29,530 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:29,534 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:29,534 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:29,535 INFO sqlalchemy.engine.Engine [cached since 4737s ago] (1,)
2026-02-22 08:23:29,589 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:29,590 INFO sqlalchemy.engine.Engine [cached since 4315s ago] (100, 0)
2026-02-22 08:23:29,634 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:29,634 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:29,634 INFO sqlalchemy.engine.Engine [cached since 4737s ago] (1,)
2026-02-22 08:23:29,681 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:29,681 INFO sqlalchemy.engine.Engine [cached since 4315s ago] (100, 0)
INFO:     127.0.0.1:55663 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:23:29,684 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55665 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:23:29,700 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:29,703 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:29,704 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:29,704 INFO sqlalchemy.engine.Engine [cached since 4737s ago] (1,)
2026-02-22 08:23:29,712 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:29,712 INFO sqlalchemy.engine.Engine [cached since 4315s ago] (100, 0)
INFO:     127.0.0.1:55665 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:23:29,731 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:29,991 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:29,991 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:29,992 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (1,)
2026-02-22 08:23:29,999 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:29,999 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (100, 0)
2026-02-22 08:23:30,003 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:23:30,003 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (8,)
2026-02-22 08:23:30,005 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:23:30,005 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (4,)
INFO:     127.0.0.1:55665 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:23:30,012 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:30,015 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:30,016 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:30,016 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (1,)
2026-02-22 08:23:30,020 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:30,021 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (100, 0)
2026-02-22 08:23:30,028 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:23:30,028 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (8,)
2026-02-22 08:23:30,031 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:23:30,031 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (4,)
INFO:     127.0.0.1:55665 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:23:30,041 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:30,049 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:30,049 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:30,050 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (1,)
2026-02-22 08:23:30,058 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:23:30,059 INFO sqlalchemy.engine.Engine [cached since 4316s ago] (14,)
INFO:     127.0.0.1:55663 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:23:30,074 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:30,088 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:30,089 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:30,089 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (1,)
2026-02-22 08:23:30,098 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:30,101 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:30,104 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (1,)
2026-02-22 08:23:30,273 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:23:30,275 INFO sqlalchemy.engine.Engine [cached since 4316s ago] (1, 100, 0)
2026-02-22 08:23:30,283 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:23:30,283 INFO sqlalchemy.engine.Engine [cached since 4316s ago] (14,)
INFO:     127.0.0.1:55663 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:23:30,301 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55665 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:23:30,315 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:30,333 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:30,334 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:30,334 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (1,)
2026-02-22 08:23:30,339 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:30,341 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:30,341 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (1,)
2026-02-22 08:23:30,347 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:23:30,348 INFO sqlalchemy.engine.Engine [cached since 4316s ago] (1, 100, 0)
2026-02-22 08:23:30,359 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:23:30,360 INFO sqlalchemy.engine.Engine [cached since 4316s ago] (14, 100, 0)
INFO:     127.0.0.1:55665 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:23:30,380 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55663 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:23:30,392 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:30,396 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:30,397 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:30,397 INFO sqlalchemy.engine.Engine [cached since 4738s ago] (1,)
2026-02-22 08:23:30,441 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:23:30,441 INFO sqlalchemy.engine.Engine [cached since 4316s ago] (14, 100, 0)
INFO:     127.0.0.1:55663 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:23:30,584 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:31,257 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:31,257 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:31,258 INFO sqlalchemy.engine.Engine [cached since 4739s ago] (1,)
2026-02-22 08:23:31,262 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:31,262 INFO sqlalchemy.engine.Engine [cached since 4317s ago] (100, 0)
INFO:     127.0.0.1:55663 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:23:31,267 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:31,280 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:31,281 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:31,281 INFO sqlalchemy.engine.Engine [cached since 4739s ago] (1,)
2026-02-22 08:23:31,286 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:31,287 INFO sqlalchemy.engine.Engine [cached since 4317s ago] (100, 0)
INFO:     127.0.0.1:55663 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:23:31,292 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:59,638 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:59,648 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:59,649 INFO sqlalchemy.engine.Engine [cached since 4767s ago] (1,)
2026-02-22 08:23:59,655 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:59,655 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:59,656 INFO sqlalchemy.engine.Engine [cached since 4767s ago] (1,)
2026-02-22 08:23:59,658 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:59,658 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:59,658 INFO sqlalchemy.engine.Engine [cached since 4767s ago] (1,)
2026-02-22 08:23:59,662 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:23:59,663 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:23:59,663 INFO sqlalchemy.engine.Engine [cached since 4767s ago] (1,)
2026-02-22 08:23:59,680 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:59,680 INFO sqlalchemy.engine.Engine [cached since 4050s ago] (100, 0)
2026-02-22 08:23:59,683 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:59,683 INFO sqlalchemy.engine.Engine [cached since 4050s ago] (100, 0)
2026-02-22 08:23:59,701 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:59,703 INFO sqlalchemy.engine.Engine [cached since 4767s ago] (100, 0)
2026-02-22 08:23:59,714 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:23:59,715 INFO sqlalchemy.engine.Engine [cached since 4767s ago] (100, 0)
INFO:     127.0.0.1:55675 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55674 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:23:59,730 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:59,731 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:59,751 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:23:59,752 INFO sqlalchemy.engine.Engine [cached since 4767s ago] (8,)
INFO:     127.0.0.1:55679 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:23:59,758 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:23:59,848 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:23:59,849 INFO sqlalchemy.engine.Engine [cached since 4768s ago] (4,)
INFO:     127.0.0.1:55678 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:24:00,233 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:25:15,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:25:15,186 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:25:15,188 INFO sqlalchemy.engine.Engine [cached since 4843s ago] (1,)
2026-02-22 08:25:15,199 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:25:15,199 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:25:15,199 INFO sqlalchemy.engine.Engine [cached since 4843s ago] (1,)
INFO:     127.0.0.1:55713 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:25:15,212 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:25:15,212 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:25:15,213 INFO sqlalchemy.engine.Engine [cached since 4843s ago] (1,)
2026-02-22 08:25:15,220 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:25:15,220 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:25:15,220 INFO sqlalchemy.engine.Engine [cached since 4843s ago] (1,)
2026-02-22 08:25:15,237 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:25:15,238 INFO sqlalchemy.engine.Engine [cached since 4126s ago] (100, 0)
2026-02-22 08:25:15,244 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:25:15,244 INFO sqlalchemy.engine.Engine [cached since 4126s ago] (100, 0)
2026-02-22 08:25:15,250 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:25:15,250 INFO sqlalchemy.engine.Engine [cached since 4843s ago] (100, 0)
INFO:     127.0.0.1:55711 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:25:15,267 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:25:15,268 INFO sqlalchemy.engine.Engine [cached since 4843s ago] (100, 0)
INFO:     127.0.0.1:55709 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:25:15,307 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:25:15,319 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55714 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:25:15,341 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:25:15,378 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:25:15,378 INFO sqlalchemy.engine.Engine [cached since 4843s ago] (8,)
2026-02-22 08:25:15,400 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:25:15,400 INFO sqlalchemy.engine.Engine [cached since 4843s ago] (4,)
INFO:     127.0.0.1:55713 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:25:15,576 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55757 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55758 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:27:32,957 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:32,969 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:32,969 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,060 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:27:33,060 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (100, 0)
INFO:     127.0.0.1:55757 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,071 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:33,075 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,075 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,075 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,094 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:27:33,095 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (100, 0)
INFO:     127.0.0.1:55758 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,105 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,106 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,106 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
INFO:     127.0.0.1:55757 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,112 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:33,145 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:27:33,146 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (100, 0)
INFO:     127.0.0.1:55760 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,153 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:33,158 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,159 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,160 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,165 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,165 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,165 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,173 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:27:33,173 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (100, 0)
2026-02-22 08:27:33,178 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:27:33,178 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (100, 0)
INFO:     127.0.0.1:55760 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,181 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:33,195 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:27:33,195 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (8,)
2026-02-22 08:27:33,203 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:27:33,204 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (4,)
INFO:     127.0.0.1:55757 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,223 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:33,227 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,228 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,228 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
INFO:     127.0.0.1:55760 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:27:33,238 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,238 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,238 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,241 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:27:33,241 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (100, 0)
2026-02-22 08:27:33,247 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:27:33,247 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (14,)
2026-02-22 08:27:33,250 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:27:33,250 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (8,)
INFO:     127.0.0.1:55758 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:27:33,255 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55758 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,272 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,273 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,273 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,277 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:27:33,278 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (4,)
2026-02-22 08:27:33,289 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:27:33,289 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (1, 100, 0)
INFO:     127.0.0.1:55760 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,295 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55760 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55757 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,306 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:33,312 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,313 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,313 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,322 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,323 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,323 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,335 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:27:33,335 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (14, 100, 0)
2026-02-22 08:27:33,337 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:27:33,337 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (14,)
INFO:     127.0.0.1:55757 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:27:33,342 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55758 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:27:33,348 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:33,357 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:33,359 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:33,359 INFO sqlalchemy.engine.Engine [cached since 4981s ago] (1,)
2026-02-22 08:27:33,374 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:27:33,374 INFO sqlalchemy.engine.Engine [cached since 4559s ago] (1, 100, 0)
INFO:     127.0.0.1:55757 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:27:33,396 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:34,056 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:34,056 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:34,056 INFO sqlalchemy.engine.Engine [cached since 4982s ago] (1,)
2026-02-22 08:27:34,062 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:27:34,062 INFO sqlalchemy.engine.Engine [cached since 4560s ago] (100, 0)
INFO:     127.0.0.1:55757 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:27:34,066 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:34,075 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:34,076 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:34,076 INFO sqlalchemy.engine.Engine [cached since 4982s ago] (1,)
2026-02-22 08:27:34,080 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:27:34,080 INFO sqlalchemy.engine.Engine [cached since 4560s ago] (100, 0)
INFO:     127.0.0.1:55757 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:27:34,087 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:27:34,239 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:27:34,241 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:27:34,242 INFO sqlalchemy.engine.Engine [cached since 4982s ago] (1,)
2026-02-22 08:27:34,266 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:27:34,266 INFO sqlalchemy.engine.Engine [cached since 4560s ago] (14, 100, 0)
INFO:     127.0.0.1:55757 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:27:34,277 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55818 - "OPTIONS /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55821 - "OPTIONS /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:32:04,283 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:32:04,289 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:32:04,292 INFO sqlalchemy.engine.Engine [cached since 5252s ago] (1,)
INFO:     127.0.0.1:55824 - "OPTIONS /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:32:04,330 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:32:04,330 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:32:04,332 INFO sqlalchemy.engine.Engine [cached since 5252s ago] (1,)
2026-02-22 08:32:04,338 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:32:04,340 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:32:04,340 INFO sqlalchemy.engine.Engine [cached since 5252s ago] (1,)
2026-02-22 08:32:04,344 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:32:04,344 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:32:04,344 INFO sqlalchemy.engine.Engine [cached since 5252s ago] (1,)
2026-02-22 08:32:04,419 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:32:04,419 INFO sqlalchemy.engine.Engine [cached since 5252s ago] (100, 0)
2026-02-22 08:32:04,421 INFO sqlalchemy.engine.Engine SELECT region.id, region.name 
FROM region 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:32:04,421 INFO sqlalchemy.engine.Engine [cached since 5252s ago] (100, 0)
2026-02-22 08:32:04,423 INFO sqlalchemy.engine.Engine SELECT doctorcategory.id, doctorcategory.name 
FROM doctorcategory 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:32:04,423 INFO sqlalchemy.engine.Engine [cached since 4535s ago] (100, 0)
2026-02-22 08:32:04,434 INFO sqlalchemy.engine.Engine SELECT doctorspecialty.id, doctorspecialty.name 
FROM doctorspecialty 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:32:04,434 INFO sqlalchemy.engine.Engine [cached since 4535s ago] (100, 0)
2026-02-22 08:32:04,446 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:32:04,446 INFO sqlalchemy.engine.Engine [cached since 5252s ago] (8,)
INFO:     127.0.0.1:55827 - "GET /api/v1/crm/regions/ HTTP/1.1" 200 OK
2026-02-22 08:32:04,456 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55818 - "GET /api/v1/crm/doctor-specialties/ HTTP/1.1" 200 OK
2026-02-22 08:32:04,459 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:32:04,466 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:32:04,466 INFO sqlalchemy.engine.Engine [cached since 5252s ago] (4,)
INFO:     127.0.0.1:55822 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:32:04,481 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55821 - "GET /api/v1/crm/doctor-categories/ HTTP/1.1" 200 OK
2026-02-22 08:32:04,518 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55908 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55910 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55912 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55913 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,259 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,266 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,267 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,567 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,567 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (100, 0)
INFO:     127.0.0.1:55908 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,692 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,694 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,695 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,695 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
INFO:     127.0.0.1:55913 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,702 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,703 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,703 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,708 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,709 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (100, 0)
INFO:     127.0.0.1:55908 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,710 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,720 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,720 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (100, 0)
2026-02-22 08:38:38,724 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,724 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,724 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,726 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,726 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (100, 0)
INFO:     127.0.0.1:55908 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,732 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,734 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,735 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,735 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,737 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,737 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (100, 0)
INFO:     127.0.0.1:55912 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,753 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,756 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,756 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,756 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
INFO:     127.0.0.1:55913 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,760 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,760 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,760 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,762 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,763 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (100, 0)
INFO:     127.0.0.1:55908 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,764 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,767 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,768 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (100, 0)
INFO:     127.0.0.1:55912 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,769 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,777 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:38:38,777 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (8,)
2026-02-22 08:38:38,778 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,779 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,779 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,781 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:38:38,781 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (4,)
2026-02-22 08:38:38,783 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,783 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (100, 0)
INFO:     127.0.0.1:55912 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,786 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,789 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,790 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,790 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,794 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,794 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (100, 0)
INFO:     127.0.0.1:55912 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,795 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55910 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,823 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,825 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,825 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,825 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,828 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,829 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (100, 0)
INFO:     127.0.0.1:55912 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:38,833 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,833 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,833 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,838 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:38:38,838 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (14,)
INFO:     127.0.0.1:55908 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:38,840 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,841 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:38:38,841 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (8,)
INFO:     127.0.0.1:55908 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,845 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,845 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,846 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (1,)
2026-02-22 08:38:38,847 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:38:38,847 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (4,)
2026-02-22 08:38:38,849 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:38:38,849 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (1, 100, 0)
INFO:     127.0.0.1:55910 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,855 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,857 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,857 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,857 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:38,859 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,859 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,859 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:38,861 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,861 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (100, 0)
2026-02-22 08:38:38,864 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:38:38,864 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (14,)
2026-02-22 08:38:38,865 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:38:38,865 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (8,)
INFO:     127.0.0.1:55908 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:38,865 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55912 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,875 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,877 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:38:38,878 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (4,)
2026-02-22 08:38:38,879 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,879 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,879 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
INFO:     127.0.0.1:55908 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:38,881 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:38:38,881 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (1, 100, 0)
2026-02-22 08:38:38,883 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,883 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,883 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:38,885 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:38:38,885 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (14, 100, 0)
INFO:     127.0.0.1:55912 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,886 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55913 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:38,895 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55910 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,898 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,899 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,899 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:38,899 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,903 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,903 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,903 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:38,905 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,905 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,905 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:38,906 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:38:38,906 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (14, 100, 0)
2026-02-22 08:38:38,908 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:38:38,908 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (14,)
INFO:     127.0.0.1:55912 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:38,909 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,913 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:38,913 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (100, 0)
INFO:     127.0.0.1:55913 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:38,915 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,916 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,916 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:38,918 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:38:38,918 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (1, 100, 0)
INFO:     127.0.0.1:55912 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,919 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,923 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:38,923 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:38,924 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:38,926 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:38:38,926 INFO sqlalchemy.engine.Engine [cached since 5224s ago] (14, 100, 0)
2026-02-22 08:38:38,928 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:38:38,928 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (8,)
INFO:     127.0.0.1:55912 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:38,929 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:38,930 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:38:38,930 INFO sqlalchemy.engine.Engine [cached since 5646s ago] (4,)
INFO:     127.0.0.1:55910 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:38:38,940 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:39,224 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:39,224 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:39,224 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:39,225 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:39,226 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:39,226 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:39,228 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:38:39,228 INFO sqlalchemy.engine.Engine [cached since 5225s ago] (14,)
2026-02-22 08:38:39,232 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:39,232 INFO sqlalchemy.engine.Engine [cached since 5225s ago] (100, 0)
INFO:     127.0.0.1:55912 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:39,235 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55910 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:39,237 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:39,239 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:39,240 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:39,240 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:39,243 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:39,243 INFO sqlalchemy.engine.Engine [cached since 5225s ago] (100, 0)
INFO:     127.0.0.1:55910 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:39,246 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:39,252 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:39,253 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:39,253 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:39,259 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:39,259 INFO sqlalchemy.engine.Engine [cached since 5225s ago] (100, 0)
INFO:     127.0.0.1:55910 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:39,261 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:39,263 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:39,263 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:39,263 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:39,282 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:38:39,282 INFO sqlalchemy.engine.Engine [cached since 5225s ago] (100, 0)
INFO:     127.0.0.1:55910 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:38:39,284 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:39,557 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:39,557 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:39,557 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:39,560 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:38:39,560 INFO sqlalchemy.engine.Engine [cached since 5225s ago] (1, 100, 0)
INFO:     127.0.0.1:55910 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:38:39,567 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:38:39,721 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:38:39,721 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:38:39,721 INFO sqlalchemy.engine.Engine [cached since 5647s ago] (1,)
2026-02-22 08:38:39,724 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:38:39,724 INFO sqlalchemy.engine.Engine [cached since 5225s ago] (14, 100, 0)
INFO:     127.0.0.1:55910 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:38:39,744 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,275 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,286 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,287 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,701 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,701 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (100, 0)
INFO:     127.0.0.1:55963 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,720 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,723 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,724 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,724 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,727 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,727 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,727 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,748 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,748 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (100, 0)
2026-02-22 08:47:14,772 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,772 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (100, 0)
INFO:     127.0.0.1:55965 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,777 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55963 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,781 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,785 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,786 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,786 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,787 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,788 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,788 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,790 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,790 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,790 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,793 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,793 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (100, 0)
2026-02-22 08:47:14,799 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,799 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (100, 0)
INFO:     127.0.0.1:55967 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,818 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,829 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:47:14,829 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (8,)
2026-02-22 08:47:14,831 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,831 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (100, 0)
2026-02-22 08:47:14,835 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:47:14,835 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (4,)
INFO:     127.0.0.1:55965 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,876 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,878 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,879 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,879 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,881 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,881 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (100, 0)
2026-02-22 08:47:14,884 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,884 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,884 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,886 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:47:14,886 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (8,)
2026-02-22 08:47:14,888 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:47:14,888 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (4,)
2026-02-22 08:47:14,895 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:47:14,895 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (14,)
INFO:     127.0.0.1:55965 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,910 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55967 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:47:14,922 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55963 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,925 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,928 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,928 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,928 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,930 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,930 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,930 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,931 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,931 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,931 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,933 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,933 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,934 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,938 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:47:14,938 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (1, 100, 0)
2026-02-22 08:47:14,939 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,939 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (100, 0)
2026-02-22 08:47:14,941 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:47:14,941 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (14,)
2026-02-22 08:47:14,943 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,943 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (100, 0)
INFO:     127.0.0.1:55969 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,945 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,949 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,950 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,950 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:14,952 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:14,952 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (100, 0)
INFO:     127.0.0.1:55965 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,957 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55967 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55963 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 08:47:14,964 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,965 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:14,968 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:14,968 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:14,968 INFO sqlalchemy.engine.Engine [cached since 5760s ago] (1,)
2026-02-22 08:47:15,069 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:47:15,072 INFO sqlalchemy.engine.Engine [cached since 5761s ago] (8,)
2026-02-22 08:47:15,080 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:47:15,080 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (14, 100, 0)
2026-02-22 08:47:15,082 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:47:15,082 INFO sqlalchemy.engine.Engine [cached since 5761s ago] (4,)
INFO:     127.0.0.1:55965 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:47:15,086 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55969 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:47:15,120 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:15,125 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:15,125 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:15,125 INFO sqlalchemy.engine.Engine [cached since 5761s ago] (1,)
2026-02-22 08:47:15,127 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:47:15,127 INFO sqlalchemy.engine.Engine [cached since 5338s ago] (14,)
INFO:     127.0.0.1:55969 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:47:15,130 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:15,531 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:15,531 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:15,531 INFO sqlalchemy.engine.Engine [cached since 5761s ago] (1,)
2026-02-22 08:47:15,532 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:15,533 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:15,533 INFO sqlalchemy.engine.Engine [cached since 5761s ago] (1,)
2026-02-22 08:47:15,952 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:47:15,953 INFO sqlalchemy.engine.Engine [cached since 5339s ago] (1, 100, 0)
2026-02-22 08:47:15,954 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:15,954 INFO sqlalchemy.engine.Engine [cached since 5339s ago] (100, 0)
INFO:     127.0.0.1:55963 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,010 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,013 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,014 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,014 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,022 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,023 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,023 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,028 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:16,028 INFO sqlalchemy.engine.Engine [cached since 5339s ago] (100, 0)
2026-02-22 08:47:16,030 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:16,030 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (100, 0)
INFO:     127.0.0.1:55963 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,032 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,033 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 08:47:16,033 INFO sqlalchemy.engine.Engine [cached since 5761s ago] (8,)
2026-02-22 08:47:16,035 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,035 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,035 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
INFO:     127.0.0.1:55967 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,036 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,038 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 08:47:16,038 INFO sqlalchemy.engine.Engine [cached since 5761s ago] (4,)
2026-02-22 08:47:16,040 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,041 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,044 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,046 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,046 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,046 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,048 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:16,049 INFO sqlalchemy.engine.Engine [cached since 5339s ago] (100, 0)
INFO:     127.0.0.1:55963 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,051 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,053 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:47:16,053 INFO sqlalchemy.engine.Engine [cached since 5339s ago] (14, 100, 0)
2026-02-22 08:47:16,054 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:47:16,054 INFO sqlalchemy.engine.Engine [cached since 5339s ago] (1, 100, 0)
INFO:     127.0.0.1:55967 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,055 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55969 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,061 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:55965 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:47:16,062 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,072 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,072 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,072 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,082 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:47:16,082 INFO sqlalchemy.engine.Engine [cached since 5339s ago] (14, 100, 0)
INFO:     127.0.0.1:55965 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:47:16,097 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,372 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,375 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,375 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,390 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 08:47:16,391 INFO sqlalchemy.engine.Engine [cached since 5340s ago] (14,)
INFO:     127.0.0.1:55965 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:47:16,392 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,765 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,765 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,765 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,829 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:16,830 INFO sqlalchemy.engine.Engine [cached since 5340s ago] (100, 0)
INFO:     127.0.0.1:55965 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,834 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,836 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,836 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,836 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,842 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 08:47:16,842 INFO sqlalchemy.engine.Engine [cached since 5340s ago] (100, 0)
INFO:     127.0.0.1:55965 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,847 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:16,851 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:16,851 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:16,851 INFO sqlalchemy.engine.Engine [cached since 5762s ago] (1,)
2026-02-22 08:47:16,854 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:47:16,854 INFO sqlalchemy.engine.Engine [cached since 5340s ago] (1, 100, 0)
INFO:     127.0.0.1:55965 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 08:47:16,856 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 08:47:17,207 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 08:47:17,208 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 08:47:17,208 INFO sqlalchemy.engine.Engine [cached since 5763s ago] (1,)
2026-02-22 08:47:17,303 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 08:47:17,303 INFO sqlalchemy.engine.Engine [cached since 5341s ago] (14, 100, 0)
INFO:     127.0.0.1:55965 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 08:47:17,320 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:22,808 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:22,826 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:22,827 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:22,844 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:22,844 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
INFO:     127.0.0.1:56083 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 09:27:22,859 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:22,861 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:22,862 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:22,862 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:22,870 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:22,870 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:22,870 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:22,882 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:22,882 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
2026-02-22 09:27:22,885 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:22,885 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 09:27:22,892 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:22,898 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:22,898 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:22,899 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:22,912 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:22,913 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (100, 0)
2026-02-22 09:27:22,931 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 09:27:22,931 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (8,)
2026-02-22 09:27:22,941 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 09:27:22,942 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (4,)
INFO:     127.0.0.1:56083 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 09:27:22,967 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:22,970 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:22,970 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:22,970 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:22,973 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:22,975 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:22,975 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:22,977 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:22,977 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
INFO:     127.0.0.1:56087 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 09:27:22,979 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 09:27:22,989 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:22,991 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:22,991 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
2026-02-22 09:27:22,994 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:22,994 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:22,994 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:22,996 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:22,997 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:22,997 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
INFO:     127.0.0.1:56083 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 09:27:22,999 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,002 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,002 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (100, 0)
2026-02-22 09:27:23,005 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 09:27:23,005 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (14,)
2026-02-22 09:27:23,007 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,007 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,007 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,009 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,010 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,010 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,011 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,012 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
2026-02-22 09:27:23,016 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 09:27:23,016 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (8,)
INFO:     127.0.0.1:56083 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,017 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,020 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,020 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
2026-02-22 09:27:23,023 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 09:27:23,023 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (4,)
INFO:     127.0.0.1:56089 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,025 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56087 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 09:27:23,027 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,028 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,029 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,029 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,032 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,032 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,032 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,034 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,035 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,043 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,045 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 09:27:23,045 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (1, 100, 0)
2026-02-22 09:27:23,048 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,048 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,049 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,049 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,050 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,050 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
INFO:     127.0.0.1:56083 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,052 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,054 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,054 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (100, 0)
2026-02-22 09:27:23,055 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 09:27:23,056 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (14,)
INFO:     127.0.0.1:56089 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 09:27:23,057 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56087 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,059 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,061 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 09:27:23,061 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (8,)
2026-02-22 09:27:23,062 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,063 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,063 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,064 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,064 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,064 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,069 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 09:27:23,069 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (4,)
2026-02-22 09:27:23,073 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 09:27:23,073 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (14, 100, 0)
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,077 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 09:27:23,077 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (1, 100, 0)
2026-02-22 09:27:23,077 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,079 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,080 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,080 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,081 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,081 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,081 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
INFO:     127.0.0.1:56089 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56087 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,087 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,087 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,090 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,090 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (100, 0)
2026-02-22 09:27:23,092 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 09:27:23,092 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (14,)
INFO:     127.0.0.1:56083 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 09:27:23,108 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,111 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,112 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,112 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,113 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 09:27:23,113 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (1, 100, 0)
INFO:     127.0.0.1:56083 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,119 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,122 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,122 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,122 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,124 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 09:27:23,124 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (14, 100, 0)
INFO:     127.0.0.1:56083 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 09:27:23,125 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,166 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 09:27:23,166 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (8,)
2026-02-22 09:27:23,169 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 09:27:23,169 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (4,)
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,239 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,414 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,415 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,415 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,417 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,418 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,418 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,422 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,422 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
2026-02-22 09:27:23,424 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 09:27:23,424 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (14, 100, 0)
INFO:     127.0.0.1:56083 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 09:27:23,426 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,440 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,440 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,441 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,445 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,446 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 09:27:23,447 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (14,)
2026-02-22 09:27:23,448 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,448 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,448 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
INFO:     127.0.0.1:56083 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 09:27:23,456 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,456 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
2026-02-22 09:27:23,457 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,459 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,462 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,462 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,462 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,468 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,468 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,474 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,478 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,478 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,479 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,480 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 09:27:23,481 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (100, 0)
INFO:     127.0.0.1:56085 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,486 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,661 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,661 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,661 INFO sqlalchemy.engine.Engine [cached since 5907s ago] (1,)
2026-02-22 09:27:23,663 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 09:27:23,663 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (1, 100, 0)
INFO:     127.0.0.1:56085 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 09:27:23,669 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 09:27:23,877 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 09:27:23,877 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 09:27:23,877 INFO sqlalchemy.engine.Engine [cached since 5908s ago] (1,)
2026-02-22 09:27:23,879 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 09:27:23,879 INFO sqlalchemy.engine.Engine [cached since 5485s ago] (14, 100, 0)
INFO:     127.0.0.1:56085 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 09:27:23,902 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56625 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56627 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56628 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56630 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,282 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,285 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,285 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,296 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,296 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
INFO:     127.0.0.1:56625 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,304 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,305 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,306 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,306 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
INFO:     127.0.0.1:56630 - "OPTIONS /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,309 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,310 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,310 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,310 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,310 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
INFO:     127.0.0.1:56625 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,312 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,317 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,317 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
2026-02-22 12:05:41,318 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,318 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,318 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
INFO:     127.0.0.1:56628 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,320 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,321 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,322 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,322 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,323 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,323 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
INFO:     127.0.0.1:56630 - "OPTIONS /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56625 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,325 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,327 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,327 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
2026-02-22 12:05:41,328 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,328 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,328 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,329 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,329 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,329 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
INFO:     127.0.0.1:56628 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,330 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,332 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,332 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
2026-02-22 12:05:41,333 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,333 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,333 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
INFO:     127.0.0.1:56625 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,335 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,336 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (100, 0)
2026-02-22 12:05:41,336 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,338 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,338 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
2026-02-22 12:05:41,343 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 12:05:41,343 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (8,)
INFO:     127.0.0.1:56628 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,344 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,347 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 12:05:41,347 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (4,)
2026-02-22 12:05:41,348 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,349 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,349 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
INFO:     127.0.0.1:56627 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,351 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,353 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,353 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,353 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,355 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,355 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
INFO:     127.0.0.1:56625 - "OPTIONS /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56628 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,358 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,359 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (100, 0)
2026-02-22 12:05:41,359 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,360 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,360 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,360 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,361 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 12:05:41,361 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (8,)
2026-02-22 12:05:41,363 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 12:05:41,363 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (14,)
2026-02-22 12:05:41,364 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 12:05:41,364 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (4,)
INFO:     127.0.0.1:56630 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,365 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56627 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,367 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56630 - "OPTIONS /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,369 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,369 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,370 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,371 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,371 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,371 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,372 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,372 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,372 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,374 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,374 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (100, 0)
2026-02-22 12:05:41,376 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:05:41,376 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (1, 100, 0)
2026-02-22 12:05:41,377 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 12:05:41,377 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (8,)
2026-02-22 12:05:41,378 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 12:05:41,378 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (14,)
INFO:     127.0.0.1:56628 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,379 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56630 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,381 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 12:05:41,382 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (4,)
2026-02-22 12:05:41,382 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56630 - "OPTIONS /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,383 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,383 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,384 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
INFO:     127.0.0.1:56627 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,386 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,386 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,386 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,387 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,388 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,388 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,388 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,389 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,389 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,389 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,391 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:05:41,391 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (1, 100, 0)
2026-02-22 12:05:41,392 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:05:41,392 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (14, 100, 0)
INFO:     127.0.0.1:56628 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,393 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,394 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,394 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (100, 0)
INFO:     127.0.0.1:56625 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,397 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 12:05:41,397 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (14,)
2026-02-22 12:05:41,397 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,398 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 12:05:41,398 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (8,)
2026-02-22 12:05:41,399 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,399 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,399 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
INFO:     127.0.0.1:56630 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,400 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,401 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 12:05:41,401 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (4,)
INFO:     127.0.0.1:56627 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,405 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:05:41,405 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (14, 100, 0)
2026-02-22 12:05:41,405 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,407 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,407 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,407 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
INFO:     127.0.0.1:56625 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,408 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,410 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 12:05:41,410 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (14,)
INFO:     127.0.0.1:56627 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,411 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,639 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,640 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,640 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,641 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,641 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,641 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,642 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,643 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
2026-02-22 12:05:41,644 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:05:41,644 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (1, 100, 0)
INFO:     127.0.0.1:56627 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,645 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56625 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,646 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,647 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,648 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,648 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,649 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,649 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,649 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,651 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,651 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
2026-02-22 12:05:41,653 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:05:41,653 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (1, 100, 0)
INFO:     127.0.0.1:56627 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,654 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56625 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,655 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,657 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,657 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,657 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,658 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,659 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
INFO:     127.0.0.1:56627 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,660 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,661 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,662 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,662 INFO sqlalchemy.engine.Engine [cached since 6897s ago] (1,)
2026-02-22 12:05:41,664 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:05:41,664 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (100, 0)
INFO:     127.0.0.1:56627 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:05:41,665 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,820 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,820 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,820 INFO sqlalchemy.engine.Engine [cached since 6898s ago] (1,)
2026-02-22 12:05:41,824 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:05:41,824 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (14, 100, 0)
INFO:     127.0.0.1:56627 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,828 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:05:41,830 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:05:41,830 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:05:41,830 INFO sqlalchemy.engine.Engine [cached since 6898s ago] (1,)
2026-02-22 12:05:41,831 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:05:41,832 INFO sqlalchemy.engine.Engine [cached since 6475s ago] (14, 100, 0)
INFO:     127.0.0.1:56627 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:05:41,833 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,562 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,568 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,568 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,583 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,583 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (100, 0)
INFO:     127.0.0.1:56664 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,588 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,591 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,591 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,592 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,594 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,594 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,594 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,596 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,596 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (100, 0)
INFO:     127.0.0.1:56664 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,597 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,601 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,602 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (100, 0)
2026-02-22 12:08:59,604 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,604 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,604 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
INFO:     127.0.0.1:56666 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,607 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,609 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,610 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,610 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,612 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,612 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,613 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,614 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,614 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (100, 0)
2026-02-22 12:08:59,616 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,616 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (100, 0)
INFO:     127.0.0.1:56664 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,618 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,618 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (100, 0)
2026-02-22 12:08:59,618 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56666 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,620 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,620 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,621 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,621 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,626 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 12:08:59,626 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (8,)
2026-02-22 12:08:59,629 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,629 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,629 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,631 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 12:08:59,631 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (4,)
2026-02-22 12:08:59,632 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,632 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (100, 0)
2026-02-22 12:08:59,634 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,634 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (100, 0)
INFO:     127.0.0.1:56664 - "GET /api/v1/users/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,635 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56668 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,640 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56666 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,642 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,644 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,644 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,644 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,646 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,646 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,646 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,647 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,647 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,647 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,649 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 12:08:59,649 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (14,)
2026-02-22 12:08:59,650 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,650 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (100, 0)
2026-02-22 12:08:59,651 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,651 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (100, 0)
2026-02-22 12:08:59,652 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 12:08:59,652 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (8,)
INFO:     127.0.0.1:56664 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:08:59,653 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56666 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,655 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 12:08:59,655 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (4,)
2026-02-22 12:08:59,656 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,658 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,658 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,658 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,662 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:08:59,662 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (1, 100, 0)
INFO:     127.0.0.1:56668 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,663 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56664 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,664 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,666 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,666 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,666 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,667 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,668 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,668 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,668 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,668 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,668 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,670 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,670 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (100, 0)
2026-02-22 12:08:59,674 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:08:59,674 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (14, 100, 0)
2026-02-22 12:08:59,677 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 12:08:59,677 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (14,)
2026-02-22 12:08:59,678 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 12:08:59,678 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (8,)
INFO:     127.0.0.1:56664 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:08:59,679 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,680 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 12:08:59,680 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (4,)
2026-02-22 12:08:59,681 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,682 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,682 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
INFO:     127.0.0.1:56668 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,684 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,686 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:08:59,686 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (1, 100, 0)
2026-02-22 12:08:59,687 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,687 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,687 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
INFO:     127.0.0.1:56664 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:56666 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:08:59,690 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,690 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,691 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,691 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,691 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,692 INFO sqlalchemy.engine.Engine SELECT medicalorganization.id, medicalorganization.name, medicalorganization.address, medicalorganization.region_id, medicalorganization.org_type, medicalorganization.brand, medicalorganization.director_name, medicalorganization.contact_phone 
FROM medicalorganization 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,693 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (100, 0)
2026-02-22 12:08:59,702 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,703 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,703 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,704 INFO sqlalchemy.engine.Engine SELECT region.id AS region_id, region.name AS region_name 
FROM region 
WHERE region.id IN ($1::INTEGER)
2026-02-22 12:08:59,704 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (8,)
2026-02-22 12:08:59,705 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 12:08:59,705 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (14,)
2026-02-22 12:08:59,707 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:08:59,707 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (14, 100, 0)
2026-02-22 12:08:59,708 INFO sqlalchemy.engine.Engine SELECT medicalorganization_1.id AS medicalorganization_1_id, "user".id AS user_id, "user".full_name AS user_full_name, "user".username AS user_username, "user".hashed_password AS user_hashed_password, "user".is_active AS user_is_active, "user".role AS user_role, "user".manager_id AS user_manager_id 
FROM medicalorganization AS medicalorganization_1 JOIN medrep_organization AS medrep_organization_1 ON medicalorganization_1.id = medrep_organization_1.organization_id JOIN "user" ON "user".id = medrep_organization_1.user_id 
WHERE medicalorganization_1.id IN ($1::INTEGER)
2026-02-22 12:08:59,708 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (4,)
INFO:     127.0.0.1:56670 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56666 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:08:59,709 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,710 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56668 - "GET /api/v1/crm/med-orgs/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,712 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,713 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,714 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,714 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,715 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,715 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,715 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,716 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:08:59,716 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (1, 100, 0)
2026-02-22 12:08:59,717 INFO sqlalchemy.engine.Engine SELECT visitplan.id, visitplan.med_rep_id, visitplan.doctor_id, visitplan.med_org_id, visitplan.planned_date, visitplan.subject, visitplan.description, visitplan.visit_type, visitplan.status 
FROM visitplan 
WHERE visitplan.med_rep_id = $1::INTEGER
2026-02-22 12:08:59,717 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (14,)
INFO:     127.0.0.1:56666 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,718 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56668 - "GET /api/v1/visit-plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:08:59,720 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,722 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,722 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,722 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,724 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,724 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,724 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,725 INFO sqlalchemy.engine.Engine SELECT notification.id, notification.topic, notification.message, notification.recipient_id, notification.created_at, notification.status, notification.related_entity_type, notification.related_entity_name 
FROM notification 
WHERE notification.recipient_id = $1::INTEGER ORDER BY notification.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:08:59,725 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (1, 100, 0)
2026-02-22 12:08:59,726 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:08:59,726 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (14, 100, 0)
INFO:     127.0.0.1:56668 - "GET /api/v1/notifications/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,727 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56666 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:08:59,729 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,730 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,731 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,731 INFO sqlalchemy.engine.Engine [cached since 6955s ago] (1,)
2026-02-22 12:08:59,732 INFO sqlalchemy.engine.Engine SELECT plan.id, plan.med_rep_id, plan.doctor_id, plan.med_org_id, plan.product_id, plan.month, plan.year, plan.target_amount, plan.target_quantity, plan.deadline 
FROM plan 
WHERE plan.med_rep_id = $1::INTEGER 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2026-02-22 12:08:59,732 INFO sqlalchemy.engine.Engine [cached since 6533s ago] (14, 100, 0)
INFO:     127.0.0.1:56666 - "GET /api/v1/sales/plans/?med_rep_id=14 HTTP/1.1" 200 OK
2026-02-22 12:08:59,733 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,908 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,908 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,908 INFO sqlalchemy.engine.Engine [cached since 6956s ago] (1,)
2026-02-22 12:08:59,910 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,910 INFO sqlalchemy.engine.Engine [cached since 6534s ago] (100, 0)
INFO:     127.0.0.1:56666 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,911 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,912 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,913 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,913 INFO sqlalchemy.engine.Engine [cached since 6956s ago] (1,)
2026-02-22 12:08:59,914 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,914 INFO sqlalchemy.engine.Engine [cached since 6534s ago] (100, 0)
INFO:     127.0.0.1:56666 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,916 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,929 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,929 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,929 INFO sqlalchemy.engine.Engine [cached since 6956s ago] (1,)
2026-02-22 12:08:59,931 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,931 INFO sqlalchemy.engine.Engine [cached since 6534s ago] (100, 0)
INFO:     127.0.0.1:56666 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,932 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-22 12:08:59,933 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-22 12:08:59,933 INFO sqlalchemy.engine.Engine SELECT "user".id, "user".full_name, "user".username, "user".hashed_password, "user".is_active, "user".role, "user".manager_id 
FROM "user" 
WHERE "user".id = $1::INTEGER
2026-02-22 12:08:59,933 INFO sqlalchemy.engine.Engine [cached since 6956s ago] (1,)
2026-02-22 12:08:59,936 INFO sqlalchemy.engine.Engine SELECT doctor.id, doctor.full_name, doctor.contact1, doctor.contact2, doctor.email, doctor.birth_date, doctor.latitude, doctor.longitude, doctor.address, doctor.region_id, doctor.specialty_id, doctor.category_id, doctor.med_org_id, doctor.assigned_rep_id 
FROM doctor 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-22 12:08:59,936 INFO sqlalchemy.engine.Engine [cached since 6534s ago] (100, 0)
INFO:     127.0.0.1:56666 - "GET /api/v1/crm/doctors/ HTTP/1.1" 200 OK
2026-02-22 12:08:59,938 INFO sqlalchemy.engine.Engine ROLLBACK
